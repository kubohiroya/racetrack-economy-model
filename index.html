<!DOCTYPE html>
<html lang="en">
<head>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <title>The Racetrack Economy</title>
    <meta charset="UTF-8"/>
    <link href="./src/style.css" rel="stylesheet">
</head>
<body>
<div id="root">

    <h1 id="title">
        <div id="raceTrackTitle">
            The Racetrack Economy Model
            <div class="infoDialogOpenButton">
                <svg aria-hidden="true" aria-label="fontSize large" class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i"
                     data-testid="ImportContactsIcon" focusable="false" viewBox="0 0 24 24">
                    <path d="M17.5 4.5c-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .65.73.45.75.45C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.41.21.75-.19.75-.45V6c-1.49-1.12-3.63-1.5-5.5-1.5zm3.5 14c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"></path>
                </svg>
            </div>
        </div>
        <div id="graphTitle">
            The Graph Structured Economy Model
            <div class="infoDialogOpenButton">
                <svg aria-hidden="true" aria-label="fontSize large" class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i"
                     data-testid="ImportContactsIcon" focusable="false" viewBox="0 0 24 24">
                    <path d="M17.5 4.5c-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .65.73.45.75.45C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.41.21.75-.19.75-.45V6c-1.49-1.12-3.63-1.5-5.5-1.5zm3.5 14c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"></path>
                </svg>
            </div>
        </div>
    </h1>

    <fast-dialog aria-label="modal dialog" hidden id="infoDialog" modal="true">
        <div class="dialog">
            <div id="raceTrackDialog">
                <h2 class="dialogTitle">The Racetrack Economy Model</h2>
                <div class="dialogContent">
                    <p>Paul Krugman, the 2008 winner of the Nobel Prize in Economics, conducted a simulation using a
                        spatial
                        economics model called the "Racetrack Economy" model.
                        This model hypothesizes several locations (in Krugman's case, 12 cities) arranged at equal
                        intervals
                        in a circular fashion, like the numbers on a clock face.
                        The economy includes farmers, who live in the locations and do not move, and factory workers,
                        who
                        move between the locations in search of higher wages and lower prices.
                    </p>
                    <p>
                        Initially, the populations of the locations are only slightly different (a uniformly equal
                        location
                        size causes equilibrium, which prevents the simulation from working).
                    </p>
                    <p>
                        Using these basic conditions, Krugman modified transportation cost (T) and the degree of love of
                        variety for industrial products (σ) in order to analyze changes in the numbers and
                        locations of agglomerations.
                    </p>
                    <p>
                        Variables "Κ", "π", "τ" and "σ" can be changed while the simulation is in progress.
                        This allows the observation of agglomeration formation, agglomeration dispersal, and changes in
                        the
                        numbers and locations of agglomerations according to various parameters.
                    </p>
                </div>
            </div>
            <div id="graphDialog">
                <h2 class="dialogTitle">The Graph Structured Economy Model</h2>
                <div class="dialogContent">
                    <p>
                        The Graph Structured Economy Model is a simulation model that extends the Racetrack Economy
                        Model
                        to a graph structure.
                        The graph structure is a network of nodes and edges, and the Racetrack Economy Model is
                        applied to
                        each node.
                        The nodes are connected by edges, and the transportation cost between nodes is determined by
                        the
                        distance between the nodes.
                    </p>
                </div>
            </div>
            <fast-button appearance="primary" id="infoDialogCloseButton">
                OK
            </fast-button>
        </div>
    </fast-dialog>

    <div style="font-size: 75%">
        Share of Manufacturing: <select id="mshareVisualizer">
        <option value="">--</option>
        <optgroup label="circle on circumference">
            <option value="radius">radius</option>
            <option value="color">color</option>
        </optgroup>
        <optgroup label="polygon">
            <option value="dot">dot</option>
            <option value="red">red</option>
            <option value="gray">gray</option>
        </optgroup>
    </select>
        &gt; <span id="priceIndexLabel">PriceIndex</span>: <select id="priceIndexVisualizer">
        <option value="">--</option>
        <optgroup label="circle on circumference">
            <option value="radius">radius</option>
            <option value="color">color</option>
        </optgroup>
        <optgroup label="polygon">
            <option value="dot">dot</option>
            <option value="red">red</option>
            <option value="gray">gray</option>
        </optgroup>
    </select>
        &gt; <span id="nominalWageLabel">NominalWage</span>: <select id="nominalWageVisualizer">
        <option value="">--</option>
        <optgroup label="circle on circumference">
            <option value="radius">radius</option>
            <option value="color">color</option>
        </optgroup>
        <optgroup label="polygon">
            <option value="dot">dot</option>
            <option value="red">red</option>
            <option value="gray">gray</option>
        </optgroup>
    </select>
        &gt; <span id="realWageLabel">RealWage</span>: <select id="realWageVisualizer">
        <option value="">--</option>
        <optgroup label="circle on circumference">
            <option value="radius">radius</option>
            <option value="color">color</option>
        </optgroup>
        <optgroup label="polygon">
            <option value="dot">dot</option>
            <option value="red">red</option>
            <option value="gray">gray</option>
        </optgroup>
    </select>
        <span id="avgRealWageLabel">AverageRealWage</span>: <select id="avgRealWageVisualizer">
        <option value="">--</option>
        <optgroup label="circle on circumference">
            <option value="radius">radius</option>
            <option value="color">color</option>
        </optgroup>
        <optgroup label="polygon">
            <option value="dot">dot</option>
            <option value="red">red</option>
            <option value="gray">gray</option>
        </optgroup>
    </select>
    </div>

    <div class="version">
        <a aria-label="View source on GitHub" class="github-corner"
           href="https://github.com/kubohiroya/racetrack-economy-model">
            <svg aria-hidden="true" height="80" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;"
                 viewBox="0 0 250 250" width="80">
                <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
                <path class="octo-arm"
                      d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;"></path>
                <path class="octo-body"
                      d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor"></path>
            </svg>
        </a>
        <style>.github-corner:hover .octo-arm {
            animation: octocat-wave 560ms ease-in-out
        }

        @keyframes octocat-wave {
            0%, 100% {
                transform: rotate(0)
            }
            20%, 60% {
                transform: rotate(-25deg)
            }
            40%, 80% {
                transform: rotate(10deg)
            }
        }

        @media (max-width: 500px) {
            .github-corner:hover .octo-arm {
                animation: none
            }

            .github-corner .octo-arm {
                animation: octocat-wave 560ms ease-in-out
            }
        }</style>
    </div>

    <div id="canvasDiv">

        <div id="raceTrackCountry" style="display: block">
            <canvas height="400"
                    id="raceTrackCountryCanvas" width="400"
            ></canvas>
        </div>

        <div id="graphCountry" style="display: block">
            <div style="width: 600px; height: 400px; position: relative">
                <canvas height="400" id="graphCountryCanvas" width="600">
                </canvas>
                <button class="button" id="fitButton"
                        style="position: absolute; bottom: 130px; right: 5px; width: 24px; height: 24px; margin: 0; padding: 1px">
                    <svg aria-hidden="true" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-uqopch"
                         data-testid="ZoomOutMapIcon" focusable="false" viewBox="0 0 24 24">
                        <path d="m15 3 2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3v6zm6 12-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6h6zm12-6-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6v-6z"></path>
                    </svg>
                </button>

                <button class="button" id="addNodeButton"
                        style="position: absolute; bottom: 100px; right: 5px; width: 24px; height: 24px; margin: 0; padding: 1px">
                    <svg aria-hidden="true" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-1szh1ks"
                         data-testid="DomainAddIcon" focusable="false" viewBox="0 0 24 24">
                        <path d="M12 7V3H2v18h14v-2h-4v-2h2v-2h-2v-2h2v-2h-2V9h8v6h2V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm14 12v2h-2v2h-2v-2h-2v-2h2v-2h2v2h2zm-6-8h-2v2h2v-2zm0 4h-2v2h2v-2z"></path>
                    </svg>
                </button>

                <button class="button" id="removeNodeButton"
                        style="position: absolute; bottom: 70px; right: 5px; width: 24px; height: 24px; margin: 0; padding: 1px">
                    <svg aria-hidden="true" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-1szh1ks"
                         data-testid="DomainDisabledIcon" focusable="false" viewBox="0 0 24 24">
                        <path d="M8 5h2v2h-.9L12 9.9V9h8v8.9l2 2V7H12V3H5.1L8 5.9zm8 6h2v2h-2zM1.3 1.8.1 3.1 2 5v16h16l3 3 1.3-1.3-21-20.9zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm4 8H8v-2h2v2zm0-4H8v-2h2v2zm2 4v-2h2l2 2h-4z"></path>
                    </svg>
                </button>

                <button class="button" id="addEdgeButton"
                        style="position: absolute; bottom: 40px; right: 5px; width: 24px; height: 24px; margin: 0; padding: 1px">
                    <svg aria-hidden="true" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-1szh1ks"
                         data-testid="AddRoadIcon" focusable="false" viewBox="0 0 24 24">
                        <path d="M20 18v-3h-2v3h-3v2h3v3h2v-3h3v-2zM18 4h2v9h-2zM4 4h2v16H4zm7 0h2v4h-2zm0 6h2v4h-2zm0 6h2v4h-2z"></path>
                    </svg>
                </button>

                <button class="button" id="removeEdgeButton"
                        style="position: absolute; bottom: 10px; right: 5px; width: 24px; height: 24px; margin: 0; padding: 1px">
                    <svg aria-hidden="true" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-1szh1ks"
                         data-testid="RemoveRoadIcon" focusable="false" viewBox="0 0 24 24">
                        <path d="M18 4h2v9h-2zM4 4h2v16H4zm7 0h2v4h-2zm0 6h2v4h-2zm0 6h2v4h-2zm11.5.41L21.09 15 19 17.09 16.91 15l-1.41 1.41 2.09 2.09-2.09 2.09L16.91 22 19 19.91 21.09 22l1.41-1.41-2.09-2.09z"></path>
                    </svg>
                </button>
            </div>
        </div>

        <div>
            <h3 class="caption">Share of manufacturing</h3>
            <div id="scaleSelector">
                <div class="icon" id="magnifyIcon"></div>
                <select id="scale">
                    <option>x 21</option>
                    <option>x 13</option>
                    <option>x 8</option>
                    <option>x 5</option>
                    <option>x 3</option>
                    <option>x 2</option>
                    <option selected>x 1</option>
                </select>
            </div>
            <canvas
                    height="300"
                    id="barChartCanvas" width="700"
            >
            </canvas>

        </div>
    </div>

    <div style="display: flex">
        <div style="flex:1">
            <fast-radio-group id="caseSelector" name="case" value="0">
                <fast-radio value="0">
                    <p class="preset">Base case: (K=12, π=0.2, τ=2, σ=4). All workers usually end up in two
                        concentrations.</p>
                </fast-radio>
                <fast-radio value="1">
                    <p class="preset">Case i: Less differentiated products (K=12, π=0.2, τ=2, σ=2). In this case (in
                        which
                        firms have more market power, and in which the equilibrium degree of scale economies is also
                        larger),
                        all runs produced only a single city.</p>
                </fast-radio>
                <fast-radio value="2">
                    <p class="preset">Case ii: A larger manufacturing share (K=12, π=0.4, τ=2, σ=4). In this case, in
                        which one
                        would expect the backward and forward linkages driving agglomeration to be stronger, we also
                        consistently get only a single city.</p>
                </fast-radio>
                <fast-radio value="3">
                    <p class="preset">Case iii: Lower transport costs (K=12, π=0.2, τ=1, σ=4). In this case we would
                        expect
                        there to be less incentive to set up multiple urban centers, and again all ten runs produce only
                        a
                        single city.</p>
                </fast-radio>
            </fast-radio-group>
        </div>

        <div style="flex:1">
            <div class="slider-container">
                <div class="slider-label">
                    <div class="icon" id="cityIcon"></div>
                    <span class="slider-label">K = </span><span id="numRegions"></span>
                </div>

                <fast-slider
                        id="numRegionsSlider"
                        max="100" min="0"
                        step="1"
                        value="12">
                    <fast-slider-label position="0">0</fast-slider-label>
                    <fast-slider-label position="20">20</fast-slider-label>
                    <fast-slider-label position="40">40</fast-slider-label>
                    <fast-slider-label position="60">60</fast-slider-label>
                    <fast-slider-label position="80">80</fast-slider-label>
                    <fast-slider-label position="100">100</fast-slider-label>
                </fast-slider>
            </div>

            <div class="slider-container">
                <div class="slider-label">
                    <div class="icon" id="factoryIcon"></div>
                    <span class="slider-label">π = </span><span id="pi"></span>
                </div>
                <fast-slider
                        id="piSlider"
                        max="1.0" min="0" step="0.01"
                        value="0.2">
                    <fast-slider-label position="0">0</fast-slider-label>
                    <fast-slider-label position="0.2">0.2</fast-slider-label>
                    <fast-slider-label position="0.4">0.4</fast-slider-label>
                    <fast-slider-label position="0.6">0.6</fast-slider-label>
                    <fast-slider-label position="0.8">0.8</fast-slider-label>
                    <fast-slider-label position="1.0">1.0</fast-slider-label>
                </fast-slider>
            </div>

            <div class="slider-container">
                <div class="slider-label">
                    <div class="icon" id="truckIcon"></div>
                    <span class="slider-label">τ = </span><span id="tcost"></span>
                </div>
                <fast-slider
                        id="tcostSlider"
                        max="10" min="1" step="0.1"
                        value="2">
                    <fast-slider-label position="1">1</fast-slider-label>
                    <fast-slider-label position="4">4</fast-slider-label>
                    <fast-slider-label position="7">7</fast-slider-label>
                    <fast-slider-label position="10">10</fast-slider-label>
                </fast-slider>
            </div>

            <div class="slider-container">
                <div class="slider-label">
                    <div class="icon" id="headHeartIcon"></div>
                    <span class="slider-label">σ = </span><span id="sigma"></span>
                </div>
                <fast-slider
                        id="sigmaSlider"
                        max="20" min="1" step="0.1"
                        value="4">
                    <fast-slider-label position="1">1</fast-slider-label>
                    <fast-slider-label position="5">5</fast-slider-label>
                    <fast-slider-label position="10">10</fast-slider-label>
                    <fast-slider-label position="15">15</fast-slider-label>
                    <fast-slider-label position="20">20</fast-slider-label>
                </fast-slider>
            </div>
        </div>
    </div>

    <div style="display:flex">
        <div class="blink"
             id="buttonPanel"
             style="flex: 1"
        >
            <fast-button
                    id="start"
            >
                <div class="iconButton">
                    <div class="icon" id="startIcon"></div>
                    <div>Start</div>
                </div>
            </fast-button>

            <fast-button
                    id="stop"
            >
                <div class="iconButton">
                    <div class="icon" id="stopIcon"></div>
                    <div>Stop</div>
                </div>
            </fast-button>

            <fast-button
                    id="reset"
            >
                <div class="iconButton">
                    <div class="icon" id="resetIcon"></div>
                    <div>Reset</div>
                </div>
            </fast-button>

            <div id="counterDiv">
                Time: <span id="counter">0</span>
            </div>
        </div>
        <div style="flex:1; margin-top: 20px; margin-right: 50px">
            <fast-slider
                    id="speedSlider"
                    max="1.0" min="0" step="0.05"
                    value="0.5">
                <fast-slider-label position="0">🐢 slow</fast-slider-label>
                <fast-slider-label position="1">🐇 fast</fast-slider-label>
            </fast-slider>
        </div>

    </div>

    <ul>
        <li>K: The number of locations assumed to be laid out symmetrically in a circle, with transportation
            possible only around the circumference. The distance between any two neighboring locations is set equal
            to one.
        </li>
        <li>π: The share of manufacturing goods in expenditure.</li>
        <li>τ: The level of transportation cost among locations. A value of 1 represents no transportation cost,
            while a value of 10 represents significant transportation cost.
        </li>
        <li>σ: The elasticity of substitution among manufactured goods. A value of 1 represents a strong love of
            variety, while a value of 20 represents a limited love of variety.
        </li>
    </ul>

    <div style="display: flex; gap: 20px">
        <div>
            <h3 style="display: flex">
                <div class="icon" id="adjacencyMatrixIcon"></div>
                Adjacency distances between each pair of locations
            </h3>
            <table id="adjacencyMatrix">
            </table>
        </div>
        <div>
            <h3 style="display: flex">
                <div class="icon" id="distanceMatrixIcon"></div>
                Distances between each pair of locations
            </h3>
            <table id="distanceMatrix">
            </table>
        </div>
        <div>
            <h3 style="display: flex">
                <div class="icon" id="transportCostMatrixIcon"></div>
                Transportation costs between each pair of locations
            </h3>
            <table id="transportCostMatrix">
            </table>
        </div>
    </div>

    <h3>References</h3>
    <ul>
        <li>Krugman, P. (1993) On the number and location of cities. <i>European Economic Review</i>, Vol. 37 (2-3)
            pp.293-298.
        </li>
        <li>Fujita, M., Krugman, P., Venables, A. (1999) "The Spatial Economy: Cities, Regions, and International
            Trade", <i>MIT Press</i>.
        </li>
    </ul>
</div>

<script src="src/index.ts" type="module"></script>
</body>
</html>
