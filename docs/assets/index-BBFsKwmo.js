var Cn=Object.defineProperty;var Sn=(i,t,e)=>t in i?Cn(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var g=(i,t,e)=>(Sn(i,typeof t!="symbol"?t+"":t,e),e);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const Ft=function(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof self<"u")return self;if(typeof window<"u")return window;try{return new Function("return this")()}catch{return{}}}();Ft.trustedTypes===void 0&&(Ft.trustedTypes={createPolicy:(i,t)=>t});const Vs={configurable:!1,enumerable:!1,writable:!1};Ft.FAST===void 0&&Reflect.defineProperty(Ft,"FAST",Object.assign({value:Object.create(null)},Vs));const de=Ft.FAST;if(de.getById===void 0){const i=Object.create(null);Reflect.defineProperty(de,"getById",Object.assign({value(t,e){let s=i[t];return s===void 0&&(s=e?i[t]=e():null),s}},Vs))}const ue=Object.freeze([]);function Os(){const i=new WeakMap;return function(t){let e=i.get(t);if(e===void 0){let s=Reflect.getPrototypeOf(t);for(;e===void 0&&s!==null;)e=i.get(s),s=Reflect.getPrototypeOf(s);e=e===void 0?[]:e.slice(0),i.set(t,e)}return e}}const Ci=Ft.FAST.getById(1,()=>{const i=[],t=[];function e(){if(t.length)throw t.shift()}function s(r){try{r.call()}catch(a){t.push(a),setTimeout(e,0)}}function o(){let r=0;for(;r<i.length;)if(s(i[r]),r++,r>1024){for(let a=0,l=i.length-r;a<l;a++)i[a]=i[a+r];i.length-=r,r=0}i.length=0}function n(r){i.length<1&&Ft.requestAnimationFrame(o),i.push(r)}return Object.freeze({enqueue:n,process:o})}),Ns=Ft.trustedTypes.createPolicy("fast-html",{createHTML:i=>i});let Si=Ns;const ge=`fast-${Math.random().toString(36).substring(2,8)}`,As=`${ge}{`,ki=`}${ge}`,T=Object.freeze({supportsAdoptedStyleSheets:Array.isArray(document.adoptedStyleSheets)&&"replace"in CSSStyleSheet.prototype,setHTMLPolicy(i){if(Si!==Ns)throw new Error("The HTML policy can only be set once.");Si=i},createHTML(i){return Si.createHTML(i)},isMarker(i){return i&&i.nodeType===8&&i.data.startsWith(ge)},extractDirectiveIndexFromMarker(i){return parseInt(i.data.replace(`${ge}:`,""))},createInterpolationPlaceholder(i){return`${As}${i}${ki}`},createCustomAttributePlaceholder(i,t){return`${i}="${this.createInterpolationPlaceholder(t)}"`},createBlockPlaceholder(i){return`<!--${ge}:${i}-->`},queueUpdate:Ci.enqueue,processUpdates:Ci.process,nextUpdate(){return new Promise(Ci.enqueue)},setAttribute(i,t,e){e==null?i.removeAttribute(t):i.setAttribute(t,e)},setBooleanAttribute(i,t,e){e?i.setAttribute(t,""):i.removeAttribute(t)},removeChildNodes(i){for(let t=i.firstChild;t!==null;t=i.firstChild)i.removeChild(t)},createTemplateWalker(i){return document.createTreeWalker(i,133,null,!1)}});class Ri{constructor(t,e){this.sub1=void 0,this.sub2=void 0,this.spillover=void 0,this.source=t,this.sub1=e}has(t){return this.spillover===void 0?this.sub1===t||this.sub2===t:this.spillover.indexOf(t)!==-1}subscribe(t){const e=this.spillover;if(e===void 0){if(this.has(t))return;if(this.sub1===void 0){this.sub1=t;return}if(this.sub2===void 0){this.sub2=t;return}this.spillover=[this.sub1,this.sub2,t],this.sub1=void 0,this.sub2=void 0}else e.indexOf(t)===-1&&e.push(t)}unsubscribe(t){const e=this.spillover;if(e===void 0)this.sub1===t?this.sub1=void 0:this.sub2===t&&(this.sub2=void 0);else{const s=e.indexOf(t);s!==-1&&e.splice(s,1)}}notify(t){const e=this.spillover,s=this.source;if(e===void 0){const o=this.sub1,n=this.sub2;o!==void 0&&o.handleChange(s,t),n!==void 0&&n.handleChange(s,t)}else for(let o=0,n=e.length;o<n;++o)e[o].handleChange(s,t)}}class zs{constructor(t){this.subscribers={},this.sourceSubscribers=null,this.source=t}notify(t){var e;const s=this.subscribers[t];s!==void 0&&s.notify(t),(e=this.sourceSubscribers)===null||e===void 0||e.notify(t)}subscribe(t,e){var s;if(e){let o=this.subscribers[e];o===void 0&&(this.subscribers[e]=o=new Ri(this.source)),o.subscribe(t)}else this.sourceSubscribers=(s=this.sourceSubscribers)!==null&&s!==void 0?s:new Ri(this.source),this.sourceSubscribers.subscribe(t)}unsubscribe(t,e){var s;if(e){const o=this.subscribers[e];o!==void 0&&o.unsubscribe(t)}else(s=this.sourceSubscribers)===null||s===void 0||s.unsubscribe(t)}}const V=de.getById(2,()=>{const i=/(:|&&|\|\||if)/,t=new WeakMap,e=T.queueUpdate;let s,o=h=>{throw new Error("Must call enableArrayObservation before observing arrays.")};function n(h){let c=h.$fastController||t.get(h);return c===void 0&&(Array.isArray(h)?c=o(h):t.set(h,c=new zs(h))),c}const r=Os();class a{constructor(c){this.name=c,this.field=`_${c}`,this.callback=`${c}Changed`}getValue(c){return s!==void 0&&s.watch(c,this.name),c[this.field]}setValue(c,d){const u=this.field,p=c[u];if(p!==d){c[u]=d;const b=c[this.callback];typeof b=="function"&&b.call(c,p,d),n(c).notify(this.name)}}}class l extends Ri{constructor(c,d,u=!1){super(c,d),this.binding=c,this.isVolatileBinding=u,this.needsRefresh=!0,this.needsQueue=!0,this.first=this,this.last=null,this.propertySource=void 0,this.propertyName=void 0,this.notifier=void 0,this.next=void 0}observe(c,d){this.needsRefresh&&this.last!==null&&this.disconnect();const u=s;s=this.needsRefresh?this:void 0,this.needsRefresh=this.isVolatileBinding;const p=this.binding(c,d);return s=u,p}disconnect(){if(this.last!==null){let c=this.first;for(;c!==void 0;)c.notifier.unsubscribe(this,c.propertyName),c=c.next;this.last=null,this.needsRefresh=this.needsQueue=!0}}watch(c,d){const u=this.last,p=n(c),b=u===null?this.first:{};if(b.propertySource=c,b.propertyName=d,b.notifier=p,p.subscribe(this,d),u!==null){if(!this.needsRefresh){let w;s=void 0,w=u.propertySource[u.propertyName],s=this,c===w&&(this.needsRefresh=!0)}u.next=b}this.last=b}handleChange(){this.needsQueue&&(this.needsQueue=!1,e(this))}call(){this.last!==null&&(this.needsQueue=!0,this.notify(this))}records(){let c=this.first;return{next:()=>{const d=c;return d===void 0?{value:void 0,done:!0}:(c=c.next,{value:d,done:!1})},[Symbol.iterator]:function(){return this}}}}return Object.freeze({setArrayObserverFactory(h){o=h},getNotifier:n,track(h,c){s!==void 0&&s.watch(h,c)},trackVolatile(){s!==void 0&&(s.needsRefresh=!0)},notify(h,c){n(h).notify(c)},defineProperty(h,c){typeof c=="string"&&(c=new a(c)),r(h).push(c),Reflect.defineProperty(h,c.name,{enumerable:!0,get:function(){return c.getValue(this)},set:function(d){c.setValue(this,d)}})},getAccessors:r,binding(h,c,d=this.isVolatileBinding(h)){return new l(h,c,d)},isVolatileBinding(h){return i.test(h.toString())}})});function S(i,t){V.defineProperty(i,t)}const Bs=de.getById(3,()=>{let i=null;return{get(){return i},set(t){i=t}}});class pe{constructor(){this.index=0,this.length=0,this.parent=null,this.parentContext=null}get event(){return Bs.get()}get isEven(){return this.index%2===0}get isOdd(){return this.index%2!==0}get isFirst(){return this.index===0}get isInMiddle(){return!this.isFirst&&!this.isLast}get isLast(){return this.index===this.length-1}static setEvent(t){Bs.set(t)}}V.defineProperty(pe.prototype,"index"),V.defineProperty(pe.prototype,"length");const fe=Object.seal(new pe);class Ei{constructor(){this.targetIndex=0}}class js extends Ei{constructor(){super(...arguments),this.createPlaceholder=T.createInterpolationPlaceholder}}class Hs extends Ei{constructor(t,e,s){super(),this.name=t,this.behavior=e,this.options=s}createPlaceholder(t){return T.createCustomAttributePlaceholder(this.name,t)}createBehavior(t){return new this.behavior(t,this.options)}}function kn(i,t){this.source=i,this.context=t,this.bindingObserver===null&&(this.bindingObserver=V.binding(this.binding,this,this.isBindingVolatile)),this.updateTarget(this.bindingObserver.observe(i,t))}function Rn(i,t){this.source=i,this.context=t,this.target.addEventListener(this.targetName,this)}function En(){this.bindingObserver.disconnect(),this.source=null,this.context=null}function Tn(){this.bindingObserver.disconnect(),this.source=null,this.context=null;const i=this.target.$fastView;i!==void 0&&i.isComposed&&(i.unbind(),i.needsBindOnly=!0)}function $n(){this.target.removeEventListener(this.targetName,this),this.source=null,this.context=null}function Mn(i){T.setAttribute(this.target,this.targetName,i)}function In(i){T.setBooleanAttribute(this.target,this.targetName,i)}function Dn(i){if(i==null&&(i=""),i.create){this.target.textContent="";let t=this.target.$fastView;t===void 0?t=i.create():this.target.$fastTemplate!==i&&(t.isComposed&&(t.remove(),t.unbind()),t=i.create()),t.isComposed?t.needsBindOnly&&(t.needsBindOnly=!1,t.bind(this.source,this.context)):(t.isComposed=!0,t.bind(this.source,this.context),t.insertBefore(this.target),this.target.$fastView=t,this.target.$fastTemplate=i)}else{const t=this.target.$fastView;t!==void 0&&t.isComposed&&(t.isComposed=!1,t.remove(),t.needsBindOnly?t.needsBindOnly=!1:t.unbind()),this.target.textContent=i}}function Pn(i){this.target[this.targetName]=i}function Ln(i){const t=this.classVersions||Object.create(null),e=this.target;let s=this.version||0;if(i!=null&&i.length){const o=i.split(/\s+/);for(let n=0,r=o.length;n<r;++n){const a=o[n];a!==""&&(t[a]=s,e.classList.add(a))}}if(this.classVersions=t,this.version=s+1,s!==0){s-=1;for(const o in t)t[o]===s&&e.classList.remove(o)}}class Ti extends js{constructor(t){super(),this.binding=t,this.bind=kn,this.unbind=En,this.updateTarget=Mn,this.isBindingVolatile=V.isVolatileBinding(this.binding)}get targetName(){return this.originalTargetName}set targetName(t){if(this.originalTargetName=t,t!==void 0)switch(t[0]){case":":if(this.cleanedTargetName=t.substr(1),this.updateTarget=Pn,this.cleanedTargetName==="innerHTML"){const e=this.binding;this.binding=(s,o)=>T.createHTML(e(s,o))}break;case"?":this.cleanedTargetName=t.substr(1),this.updateTarget=In;break;case"@":this.cleanedTargetName=t.substr(1),this.bind=Rn,this.unbind=$n;break;default:this.cleanedTargetName=t,t==="class"&&(this.updateTarget=Ln);break}}targetAtContent(){this.updateTarget=Dn,this.unbind=Tn}createBehavior(t){return new Fn(t,this.binding,this.isBindingVolatile,this.bind,this.unbind,this.updateTarget,this.cleanedTargetName)}}class Fn{constructor(t,e,s,o,n,r,a){this.source=null,this.context=null,this.bindingObserver=null,this.target=t,this.binding=e,this.isBindingVolatile=s,this.bind=o,this.unbind=n,this.updateTarget=r,this.targetName=a}handleChange(){this.updateTarget(this.bindingObserver.observe(this.source,this.context))}handleEvent(t){pe.setEvent(t);const e=this.binding(this.source,this.context);pe.setEvent(null),e!==!0&&t.preventDefault()}}let $i=null;class Ls{addFactory(t){t.targetIndex=this.targetIndex,this.behaviorFactories.push(t)}captureContentBinding(t){t.targetAtContent(),this.addFactory(t)}reset(){this.behaviorFactories=[],this.targetIndex=-1}release(){$i=this}static borrow(t){const e=$i||new Ls;return e.directives=t,e.reset(),$i=null,e}}function Vn(i){if(i.length===1)return i[0];let t;const e=i.length,s=i.map(r=>typeof r=="string"?()=>r:(t=r.targetName||t,r.binding)),o=(r,a)=>{let l="";for(let h=0;h<e;++h)l+=s[h](r,a);return l},n=new Ti(o);return n.targetName=t,n}const On=ki.length;function Us(i,t){const e=t.split(As);if(e.length===1)return null;const s=[];for(let o=0,n=e.length;o<n;++o){const r=e[o],a=r.indexOf(ki);let l;if(a===-1)l=r;else{const h=parseInt(r.substring(0,a));s.push(i.directives[h]),l=r.substring(a+On)}l!==""&&s.push(l)}return s}function Ws(i,t,e=!1){const s=t.attributes;for(let o=0,n=s.length;o<n;++o){const r=s[o],a=r.value,l=Us(i,a);let h=null;l===null?e&&(h=new Ti(()=>a),h.targetName=r.name):h=Vn(l),h!==null&&(t.removeAttributeNode(r),o--,n--,i.addFactory(h))}}function Nn(i,t,e){const s=Us(i,t.textContent);if(s!==null){let o=t;for(let n=0,r=s.length;n<r;++n){const a=s[n],l=n===0?t:o.parentNode.insertBefore(document.createTextNode(""),o.nextSibling);typeof a=="string"?l.textContent=a:(l.textContent=" ",i.captureContentBinding(a)),o=l,i.targetIndex++,l!==t&&e.nextNode()}i.targetIndex--}}function An(i,t){const e=i.content;document.adoptNode(e);const s=Ls.borrow(t);Ws(s,i,!0);const o=s.behaviorFactories;s.reset();const n=T.createTemplateWalker(e);let r;for(;r=n.nextNode();)switch(s.targetIndex++,r.nodeType){case 1:Ws(s,r);break;case 3:Nn(s,r,n);break;case 8:T.isMarker(r)&&s.addFactory(t[T.extractDirectiveIndexFromMarker(r)])}let a=0;(T.isMarker(e.firstChild)||e.childNodes.length===1&&t.length)&&(e.insertBefore(document.createComment(""),e.firstChild),a=-1);const l=s.behaviorFactories;return s.release(),{fragment:e,viewBehaviorFactories:l,hostBehaviorFactories:o,targetOffset:a}}const Mi=document.createRange();class zn{constructor(t,e){this.fragment=t,this.behaviors=e,this.source=null,this.context=null,this.firstChild=t.firstChild,this.lastChild=t.lastChild}appendTo(t){t.appendChild(this.fragment)}insertBefore(t){if(this.fragment.hasChildNodes())t.parentNode.insertBefore(this.fragment,t);else{const e=this.lastChild;if(t.previousSibling===e)return;const s=t.parentNode;let o=this.firstChild,n;for(;o!==e;)n=o.nextSibling,s.insertBefore(o,t),o=n;s.insertBefore(e,t)}}remove(){const t=this.fragment,e=this.lastChild;let s=this.firstChild,o;for(;s!==e;)o=s.nextSibling,t.appendChild(s),s=o;t.appendChild(e)}dispose(){const t=this.firstChild.parentNode,e=this.lastChild;let s=this.firstChild,o;for(;s!==e;)o=s.nextSibling,t.removeChild(s),s=o;t.removeChild(e);const n=this.behaviors,r=this.source;for(let a=0,l=n.length;a<l;++a)n[a].unbind(r)}bind(t,e){const s=this.behaviors;if(this.source!==t)if(this.source!==null){const o=this.source;this.source=t,this.context=e;for(let n=0,r=s.length;n<r;++n){const a=s[n];a.unbind(o),a.bind(t,e)}}else{this.source=t,this.context=e;for(let o=0,n=s.length;o<n;++o)s[o].bind(t,e)}}unbind(){if(this.source===null)return;const t=this.behaviors,e=this.source;for(let s=0,o=t.length;s<o;++s)t[s].unbind(e);this.source=null}static disposeContiguousBatch(t){if(t.length!==0){Mi.setStartBefore(t[0].firstChild),Mi.setEndAfter(t[t.length-1].lastChild),Mi.deleteContents();for(let e=0,s=t.length;e<s;++e){const o=t[e],n=o.behaviors,r=o.source;for(let a=0,l=n.length;a<l;++a)n[a].unbind(r)}}}}class qs{constructor(t,e){this.behaviorCount=0,this.hasHostBehaviors=!1,this.fragment=null,this.targetOffset=0,this.viewBehaviorFactories=null,this.hostBehaviorFactories=null,this.html=t,this.directives=e}create(t){if(this.fragment===null){let h;const c=this.html;if(typeof c=="string"){h=document.createElement("template"),h.innerHTML=T.createHTML(c);const u=h.content.firstElementChild;u!==null&&u.tagName==="TEMPLATE"&&(h=u)}else h=c;const d=An(h,this.directives);this.fragment=d.fragment,this.viewBehaviorFactories=d.viewBehaviorFactories,this.hostBehaviorFactories=d.hostBehaviorFactories,this.targetOffset=d.targetOffset,this.behaviorCount=this.viewBehaviorFactories.length+this.hostBehaviorFactories.length,this.hasHostBehaviors=this.hostBehaviorFactories.length>0}const e=this.fragment.cloneNode(!0),s=this.viewBehaviorFactories,o=new Array(this.behaviorCount),n=T.createTemplateWalker(e);let r=0,a=this.targetOffset,l=n.nextNode();for(let h=s.length;r<h;++r){const c=s[r],d=c.targetIndex;for(;l!==null;)if(a===d){o[r]=c.createBehavior(l);break}else l=n.nextNode(),a++}if(this.hasHostBehaviors){const h=this.hostBehaviorFactories;for(let c=0,d=h.length;c<d;++c,++r)o[r]=h[c].createBehavior(t)}return new zn(e,o)}render(t,e,s){typeof e=="string"&&(e=document.getElementById(e)),s===void 0&&(s=e);const o=this.create(s);return o.bind(t,fe),o.appendTo(e),o}}const Bn=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function rt(i,...t){const e=[];let s="";for(let o=0,n=i.length-1;o<n;++o){const r=i[o];let a=t[o];if(s+=r,a instanceof qs){const l=a;a=()=>l}if(typeof a=="function"&&(a=new Ti(a)),a instanceof js){const l=Bn.exec(r);l!==null&&(a.targetName=l[2])}a instanceof Ei?(s+=a.createPlaceholder(e.length),e.push(a)):s+=a}return s+=i[i.length-1],new qs(s,e)}class et{constructor(){this.targets=new WeakSet}addStylesTo(t){this.targets.add(t)}removeStylesFrom(t){this.targets.delete(t)}isAttachedTo(t){return this.targets.has(t)}withBehaviors(...t){return this.behaviors=this.behaviors===null?t:this.behaviors.concat(t),this}}et.create=(()=>{if(T.supportsAdoptedStyleSheets){const i=new Map;return t=>new jn(t,i)}return i=>new Wn(i)})();function Ii(i){return i.map(t=>t instanceof et?Ii(t.styles):[t]).reduce((t,e)=>t.concat(e),[])}function Gs(i){return i.map(t=>t instanceof et?t.behaviors:null).reduce((t,e)=>e===null?t:(t===null&&(t=[]),t.concat(e)),null)}const Ys=Symbol("prependToAdoptedStyleSheets");function Xs(i){const t=[],e=[];return i.forEach(s=>(s[Ys]?t:e).push(s)),{prepend:t,append:e}}let _s=(i,t)=>{const{prepend:e,append:s}=Xs(t);i.adoptedStyleSheets=[...e,...i.adoptedStyleSheets,...s]},Ks=(i,t)=>{i.adoptedStyleSheets=i.adoptedStyleSheets.filter(e=>t.indexOf(e)===-1)};if(T.supportsAdoptedStyleSheets)try{document.adoptedStyleSheets.push(),document.adoptedStyleSheets.splice(),_s=(i,t)=>{const{prepend:e,append:s}=Xs(t);i.adoptedStyleSheets.splice(0,0,...e),i.adoptedStyleSheets.push(...s)},Ks=(i,t)=>{for(const e of t){const s=i.adoptedStyleSheets.indexOf(e);s!==-1&&i.adoptedStyleSheets.splice(s,1)}}}catch{}class jn extends et{constructor(t,e){super(),this.styles=t,this.styleSheetCache=e,this._styleSheets=void 0,this.behaviors=Gs(t)}get styleSheets(){if(this._styleSheets===void 0){const t=this.styles,e=this.styleSheetCache;this._styleSheets=Ii(t).map(s=>{if(s instanceof CSSStyleSheet)return s;let o=e.get(s);return o===void 0&&(o=new CSSStyleSheet,o.replaceSync(s),e.set(s,o)),o})}return this._styleSheets}addStylesTo(t){_s(t,this.styleSheets),super.addStylesTo(t)}removeStylesFrom(t){Ks(t,this.styleSheets),super.removeStylesFrom(t)}}let Hn=0;function Un(){return`fast-style-class-${++Hn}`}class Wn extends et{constructor(t){super(),this.styles=t,this.behaviors=null,this.behaviors=Gs(t),this.styleSheets=Ii(t),this.styleClass=Un()}addStylesTo(t){const e=this.styleSheets,s=this.styleClass;t=this.normalizeTarget(t);for(let o=0;o<e.length;o++){const n=document.createElement("style");n.innerHTML=e[o],n.className=s,t.append(n)}super.addStylesTo(t)}removeStylesFrom(t){t=this.normalizeTarget(t);const e=t.querySelectorAll(`.${this.styleClass}`);for(let s=0,o=e.length;s<o;++s)t.removeChild(e[s]);super.removeStylesFrom(t)}isAttachedTo(t){return super.isAttachedTo(this.normalizeTarget(t))}normalizeTarget(t){return t===document?document.body:t}}const Oe=Object.freeze({locate:Os()}),Qs={toView(i){return i?"true":"false"},fromView(i){return!(i==null||i==="false"||i===!1||i===0)}},Di={toView(i){if(i==null)return null;const t=i*1;return isNaN(t)?null:t.toString()},fromView(i){if(i==null)return null;const t=i*1;return isNaN(t)?null:t}};class bi{constructor(t,e,s=e.toLowerCase(),o="reflect",n){this.guards=new Set,this.Owner=t,this.name=e,this.attribute=s,this.mode=o,this.converter=n,this.fieldName=`_${e}`,this.callbackName=`${e}Changed`,this.hasCallback=this.callbackName in t.prototype,o==="boolean"&&n===void 0&&(this.converter=Qs)}setValue(t,e){const s=t[this.fieldName],o=this.converter;o!==void 0&&(e=o.fromView(e)),s!==e&&(t[this.fieldName]=e,this.tryReflectToAttribute(t),this.hasCallback&&t[this.callbackName](s,e),t.$fastController.notify(this.name))}getValue(t){return V.track(t,this.name),t[this.fieldName]}onAttributeChangedCallback(t,e){this.guards.has(t)||(this.guards.add(t),this.setValue(t,e),this.guards.delete(t))}tryReflectToAttribute(t){const e=this.mode,s=this.guards;s.has(t)||e==="fromView"||T.queueUpdate(()=>{s.add(t);const o=t[this.fieldName];switch(e){case"reflect":const n=this.converter;T.setAttribute(t,this.attribute,n!==void 0?n.toView(o):o);break;case"boolean":T.setBooleanAttribute(t,this.attribute,o);break}s.delete(t)})}static collect(t,...e){const s=[];e.push(Oe.locate(t));for(let o=0,n=e.length;o<n;++o){const r=e[o];if(r!==void 0)for(let a=0,l=r.length;a<l;++a){const h=r[a];typeof h=="string"?s.push(new bi(t,h)):s.push(new bi(t,h.property,h.attribute,h.mode,h.converter))}}return s}}function y(i,t){let e;function s(o,n){arguments.length>1&&(e.property=n),Oe.locate(o.constructor).push(e)}if(arguments.length>1){e={},s(i,t);return}return e=i===void 0?{}:i,s}const Js={mode:"open"},Zs={},Pi=de.getById(4,()=>{const i=new Map;return Object.freeze({register(t){return i.has(t.type)?!1:(i.set(t.type,t),!0)},getByType(t){return i.get(t)}})});class Ne{constructor(t,e=t.definition){typeof e=="string"&&(e={name:e}),this.type=t,this.name=e.name,this.template=e.template;const s=bi.collect(t,e.attributes),o=new Array(s.length),n={},r={};for(let a=0,l=s.length;a<l;++a){const h=s[a];o[a]=h.attribute,n[h.name]=h,r[h.attribute]=h}this.attributes=s,this.observedAttributes=o,this.propertyLookup=n,this.attributeLookup=r,this.shadowOptions=e.shadowOptions===void 0?Js:e.shadowOptions===null?void 0:Object.assign(Object.assign({},Js),e.shadowOptions),this.elementOptions=e.elementOptions===void 0?Zs:Object.assign(Object.assign({},Zs),e.elementOptions),this.styles=e.styles===void 0?void 0:Array.isArray(e.styles)?et.create(e.styles):e.styles instanceof et?e.styles:et.create([e.styles])}get isDefined(){return!!Pi.getByType(this.type)}define(t=customElements){const e=this.type;if(Pi.register(this)){const s=this.attributes,o=e.prototype;for(let n=0,r=s.length;n<r;++n)V.defineProperty(o,s[n]);Reflect.defineProperty(e,"observedAttributes",{value:this.observedAttributes,enumerable:!0})}return t.get(this.name)||t.define(this.name,e,this.elementOptions),this}}Ne.forType=Pi.getByType;const to=new WeakMap,qn={bubbles:!0,composed:!0,cancelable:!0};function Li(i){return i.shadowRoot||to.get(i)||null}class Fs extends zs{constructor(t,e){super(t),this.boundObservables=null,this.behaviors=null,this.needsInitialization=!0,this._template=null,this._styles=null,this._isConnected=!1,this.$fastController=this,this.view=null,this.element=t,this.definition=e;const s=e.shadowOptions;if(s!==void 0){const n=t.attachShadow(s);s.mode==="closed"&&to.set(t,n)}const o=V.getAccessors(t);if(o.length>0){const n=this.boundObservables=Object.create(null);for(let r=0,a=o.length;r<a;++r){const l=o[r].name,h=t[l];h!==void 0&&(delete t[l],n[l]=h)}}}get isConnected(){return V.track(this,"isConnected"),this._isConnected}setIsConnected(t){this._isConnected=t,V.notify(this,"isConnected")}get template(){return this._template}set template(t){this._template!==t&&(this._template=t,this.needsInitialization||this.renderTemplate(t))}get styles(){return this._styles}set styles(t){this._styles!==t&&(this._styles!==null&&this.removeStyles(this._styles),this._styles=t,!this.needsInitialization&&t!==null&&this.addStyles(t))}addStyles(t){const e=Li(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)e.append(t);else if(!t.isAttachedTo(e)){const s=t.behaviors;t.addStylesTo(e),s!==null&&this.addBehaviors(s)}}removeStyles(t){const e=Li(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)e.removeChild(t);else if(t.isAttachedTo(e)){const s=t.behaviors;t.removeStylesFrom(e),s!==null&&this.removeBehaviors(s)}}addBehaviors(t){const e=this.behaviors||(this.behaviors=new Map),s=t.length,o=[];for(let n=0;n<s;++n){const r=t[n];e.has(r)?e.set(r,e.get(r)+1):(e.set(r,1),o.push(r))}if(this._isConnected){const n=this.element;for(let r=0;r<o.length;++r)o[r].bind(n,fe)}}removeBehaviors(t,e=!1){const s=this.behaviors;if(s===null)return;const o=t.length,n=[];for(let r=0;r<o;++r){const a=t[r];if(s.has(a)){const l=s.get(a)-1;l===0||e?s.delete(a)&&n.push(a):s.set(a,l)}}if(this._isConnected){const r=this.element;for(let a=0;a<n.length;++a)n[a].unbind(r)}}onConnectedCallback(){if(this._isConnected)return;const t=this.element;this.needsInitialization?this.finishInitialization():this.view!==null&&this.view.bind(t,fe);const e=this.behaviors;if(e!==null)for(const[s]of e)s.bind(t,fe);this.setIsConnected(!0)}onDisconnectedCallback(){if(!this._isConnected)return;this.setIsConnected(!1);const t=this.view;t!==null&&t.unbind();const e=this.behaviors;if(e!==null){const s=this.element;for(const[o]of e)o.unbind(s)}}onAttributeChangedCallback(t,e,s){const o=this.definition.attributeLookup[t];o!==void 0&&o.onAttributeChangedCallback(this.element,s)}emit(t,e,s){return this._isConnected?this.element.dispatchEvent(new CustomEvent(t,Object.assign(Object.assign({detail:e},qn),s))):!1}finishInitialization(){const t=this.element,e=this.boundObservables;if(e!==null){const o=Object.keys(e);for(let n=0,r=o.length;n<r;++n){const a=o[n];t[a]=e[a]}this.boundObservables=null}const s=this.definition;this._template===null&&(this.element.resolveTemplate?this._template=this.element.resolveTemplate():s.template&&(this._template=s.template||null)),this._template!==null&&this.renderTemplate(this._template),this._styles===null&&(this.element.resolveStyles?this._styles=this.element.resolveStyles():s.styles&&(this._styles=s.styles||null)),this._styles!==null&&this.addStyles(this._styles),this.needsInitialization=!1}renderTemplate(t){const e=this.element,s=Li(e)||e;this.view!==null?(this.view.dispose(),this.view=null):this.needsInitialization||T.removeChildNodes(s),t&&(this.view=t.render(e,s,e))}static forCustomElement(t){const e=t.$fastController;if(e!==void 0)return e;const s=Ne.forType(t.constructor);if(s===void 0)throw new Error("Missing FASTElement definition.");return t.$fastController=new Fs(t,s)}}function eo(i){return class extends i{constructor(){super(),Fs.forCustomElement(this)}$emit(t,e,s){return this.$fastController.emit(t,e,s)}connectedCallback(){this.$fastController.onConnectedCallback()}disconnectedCallback(){this.$fastController.onDisconnectedCallback()}attributeChangedCallback(t,e,s){this.$fastController.onAttributeChangedCallback(t,e,s)}}}const Ae=Object.assign(eo(HTMLElement),{from(i){return eo(i)},define(i,t){return new Ne(i,t).define().type}});class Fi{createCSS(){return""}createBehavior(){}}function io(i,t){const e=[];let s="";const o=[];for(let n=0,r=i.length-1;n<r;++n){s+=i[n];let a=t[n];if(a instanceof Fi){const l=a.createBehavior();a=a.createCSS(),l&&o.push(l)}a instanceof et||a instanceof CSSStyleSheet?(s.trim()!==""&&(e.push(s),s=""),e.push(a)):s+=a}return s+=i[i.length-1],s.trim()!==""&&e.push(s),{styles:e,behaviors:o}}function R(i,...t){const{styles:e,behaviors:s}=io(i,t),o=et.create(e);return s.length&&o.withBehaviors(...s),o}class Gn extends Fi{constructor(t,e){super(),this.behaviors=e,this.css="";const s=t.reduce((o,n)=>(typeof n=="string"?this.css+=n:o.push(n),o),[]);s.length&&(this.styles=et.create(s))}createBehavior(){return this}createCSS(){return this.css}bind(t){this.styles&&t.$fastController.addStyles(this.styles),this.behaviors.length&&t.$fastController.addBehaviors(this.behaviors)}unbind(t){this.styles&&t.$fastController.removeStyles(this.styles),this.behaviors.length&&t.$fastController.removeBehaviors(this.behaviors)}}function Yn(i,...t){const{styles:e,behaviors:s}=io(i,t);return new Gn(e,s)}class Xn{constructor(t,e){this.target=t,this.propertyName=e}bind(t){t[this.propertyName]=this.target}unbind(){}}function at(i){return new Hs("fast-ref",Xn,i)}const so=i=>typeof i=="function",_n=()=>null;function oo(i){return i===void 0?_n:so(i)?i:()=>i}function Vi(i,t,e){const s=so(i)?i:()=>i,o=oo(t),n=oo(e);return(r,a)=>s(r,a)?o(r,a):n(r,a)}function Kn(i){return function(t,e,s){return t.nodeType===1&&t.matches(i)}}class Qn{constructor(t,e){this.target=t,this.options=e,this.source=null}bind(t){const e=this.options.property;this.shouldUpdate=V.getAccessors(t).some(s=>s.name===e),this.source=t,this.updateTarget(this.computeNodes()),this.shouldUpdate&&this.observe()}unbind(){this.updateTarget(ue),this.source=null,this.shouldUpdate&&this.disconnect()}handleEvent(){this.updateTarget(this.computeNodes())}computeNodes(){let t=this.getNodes();return this.options.filter!==void 0&&(t=t.filter(this.options.filter)),t}updateTarget(t){this.source[this.options.property]=t}}class Jn extends Qn{constructor(t,e){super(t,e)}observe(){this.target.addEventListener("slotchange",this)}disconnect(){this.target.removeEventListener("slotchange",this)}getNodes(){return this.target.assignedNodes(this.options)}}function Oi(i){return typeof i=="string"&&(i={property:i}),new Hs("fast-slotted",Jn,i)}class Zn{handleStartContentChange(){this.startContainer.classList.toggle("start",this.start.assignedNodes().length>0)}handleEndContentChange(){this.endContainer.classList.toggle("end",this.end.assignedNodes().length>0)}}const tr=(i,t)=>rt`
    <span
        part="end"
        ${at("endContainer")}
        class=${e=>t.end?"end":void 0}
    >
        <slot name="end" ${at("end")} @slotchange="${e=>e.handleEndContentChange()}">
            ${t.end||""}
        </slot>
    </span>
`,er=(i,t)=>rt`
    <span
        part="start"
        ${at("startContainer")}
        class="${e=>t.start?"start":void 0}"
    >
        <slot
            name="start"
            ${at("start")}
            @slotchange="${e=>e.handleStartContentChange()}"
        >
            ${t.start||""}
        </slot>
    </span>
`;rt`
    <span part="end" ${at("endContainer")}>
        <slot
            name="end"
            ${at("end")}
            @slotchange="${i=>i.handleEndContentChange()}"
        ></slot>
    </span>
`,rt`
    <span part="start" ${at("startContainer")}>
        <slot
            name="start"
            ${at("start")}
            @slotchange="${i=>i.handleStartContentChange()}"
        ></slot>
    </span>
`;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function f(i,t,e,s){var o=arguments.length,n=o<3?t:s,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(i,t,e,s);else for(var a=i.length-1;a>=0;a--)(r=i[a])&&(n=(o<3?r(n):o>3?r(t,e,n):r(t,e))||n);return o>3&&n&&Object.defineProperty(t,e,n),n}const Ni=new Map;"metadata"in Reflect||(Reflect.metadata=function(i,t){return function(e){Reflect.defineMetadata(i,t,e)}},Reflect.defineMetadata=function(i,t,e){let s=Ni.get(e);s===void 0&&Ni.set(e,s=new Map),s.set(i,t)},Reflect.getOwnMetadata=function(i,t){const e=Ni.get(t);if(e!==void 0)return e.get(i)});class ir{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,uo(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:s,key:o}=this;return this.container=this.key=void 0,s.registerResolver(o,new ft(o,t,e))}}function me(i){const t=i.slice(),e=Object.keys(i),s=e.length;let o;for(let n=0;n<s;++n)o=e[n],fo(o)||(t[o]=i[o]);return t}const sr=Object.freeze({none(i){throw Error(`${i.toString()} not registered, did you forget to add @singleton()?`)},singleton(i){return new ft(i,1,i)},transient(i){return new ft(i,2,i)}}),Ai=Object.freeze({default:Object.freeze({parentLocator:()=>null,responsibleForOwnerRequests:!1,defaultResolver:sr.singleton})}),no=new Map;function ro(i){return t=>Reflect.getOwnMetadata(i,t)}let ao=null;const F=Object.freeze({createContainer(i){return new Pe(null,Object.assign({},Ai.default,i))},findResponsibleContainer(i){const t=i.$$container$$;return t&&t.responsibleForOwnerRequests?t:F.findParentContainer(i)},findParentContainer(i){const t=new CustomEvent(co,{bubbles:!0,composed:!0,cancelable:!0,detail:{container:void 0}});return i.dispatchEvent(t),t.detail.container||F.getOrCreateDOMContainer()},getOrCreateDOMContainer(i,t){return i?i.$$container$$||new Pe(i,Object.assign({},Ai.default,t,{parentLocator:F.findParentContainer})):ao||(ao=new Pe(null,Object.assign({},Ai.default,t,{parentLocator:()=>null})))},getDesignParamtypes:ro("design:paramtypes"),getAnnotationParamtypes:ro("di:paramtypes"),getOrCreateAnnotationParamTypes(i){let t=this.getAnnotationParamtypes(i);return t===void 0&&Reflect.defineMetadata("di:paramtypes",t=[],i),t},getDependencies(i){let t=no.get(i);if(t===void 0){const e=i.inject;if(e===void 0){const s=F.getDesignParamtypes(i),o=F.getAnnotationParamtypes(i);if(s===void 0)if(o===void 0){const n=Object.getPrototypeOf(i);typeof n=="function"&&n!==Function.prototype?t=me(F.getDependencies(n)):t=[]}else t=me(o);else if(o===void 0)t=me(s);else{t=me(s);let n=o.length,r;for(let h=0;h<n;++h)r=o[h],r!==void 0&&(t[h]=r);const a=Object.keys(o);n=a.length;let l;for(let h=0;h<n;++h)l=a[h],fo(l)||(t[l]=o[l])}}else t=me(e);no.set(i,t)}return t},defineProperty(i,t,e,s=!1){const o=`$di_${t}`;Reflect.defineProperty(i,t,{get:function(){let n=this[o];if(n===void 0&&(n=(this instanceof HTMLElement?F.findResponsibleContainer(this):F.getOrCreateDOMContainer()).get(e),this[o]=n,s&&this instanceof Ae)){const r=this.$fastController,a=()=>{const l=F.findResponsibleContainer(this).get(e),h=this[o];l!==h&&(this[o]=n,r.notify(t))};r.subscribe({handleChange:a},"isConnected")}return n}})},createInterface(i,t){const e=typeof i=="function"?i:t,s=typeof i=="string"?i:i&&"friendlyName"in i&&i.friendlyName||ur,o=typeof i=="string"?!1:i&&"respectConnection"in i&&i.respectConnection||!1,n=function(r,a,l){if(r==null||new.target!==void 0)throw new Error(`No registration for interface: '${n.friendlyName}'`);if(a)F.defineProperty(r,a,n,o);else{const h=F.getOrCreateAnnotationParamTypes(r);h[l]=n}};return n.$isInterface=!0,n.friendlyName=s??"(anonymous)",e!=null&&(n.register=function(r,a){return e(new ir(r,a??n))}),n.toString=function(){return`InterfaceSymbol<${n.friendlyName}>`},n},inject(...i){return function(t,e,s){if(typeof s=="number"){const o=F.getOrCreateAnnotationParamTypes(t),n=i[0];n!==void 0&&(o[s]=n)}else if(e)F.defineProperty(t,e,i[0]);else{const o=s?F.getOrCreateAnnotationParamTypes(s.value):F.getOrCreateAnnotationParamTypes(t);let n;for(let r=0;r<i.length;++r)n=i[r],n!==void 0&&(o[r]=n)}}},transient(i){return i.register=function(t){return be.transient(i,i).register(t)},i.registerInRequestor=!1,i},singleton(i,t=nr){return i.register=function(e){return be.singleton(i,i).register(e)},i.registerInRequestor=t.scoped,i}}),or=F.createInterface("Container");F.inject;const nr={scoped:!1};class ft{constructor(t,e,s){this.key=t,this.strategy=e,this.state=s,this.resolving=!1}get $isResolver(){return!0}register(t){return t.registerResolver(this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:{if(this.resolving)throw new Error(`Cyclic dependency found: ${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state}case 2:{const s=t.getFactory(this.state);if(s===null)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return s.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`Invalid resolver strategy specified: ${this.strategy}.`)}}getFactory(t){var e,s,o;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return(o=(s=(e=t.getResolver(this.state))===null||e===void 0?void 0:e.getFactory)===null||s===void 0?void 0:s.call(e,t))!==null&&o!==void 0?o:null;default:return null}}}function lo(i){return this.get(i)}function rr(i,t){return t(i)}class ar{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let s;return e===void 0?s=new this.Type(...this.dependencies.map(lo,t)):s=new this.Type(...this.dependencies.map(lo,t),...e),this.transformers==null?s:this.transformers.reduce(rr,s)}registerTransformer(t){(this.transformers||(this.transformers=[])).push(t)}}const lr={$isResolver:!0,resolve(i,t){return t}};function ze(i){return typeof i.register=="function"}function hr(i){return ze(i)&&typeof i.registerInRequestor=="boolean"}function ho(i){return hr(i)&&i.registerInRequestor}function cr(i){return i.prototype!==void 0}const dr=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]),co="__DI_LOCATE_PARENT__",zi=new Map;class Pe{constructor(t,e){this.owner=t,this.config=e,this._parent=void 0,this.registerDepth=0,this.context=null,t!==null&&(t.$$container$$=this),this.resolvers=new Map,this.resolvers.set(or,lr),t instanceof Node&&t.addEventListener(co,s=>{s.composedPath()[0]!==this.owner&&(s.detail.container=this,s.stopImmediatePropagation())})}get parent(){return this._parent===void 0&&(this._parent=this.config.parentLocator(this.owner)),this._parent}get depth(){return this.parent===null?0:this.parent.depth+1}get responsibleForOwnerRequests(){return this.config.responsibleForOwnerRequests}registerWithContext(t,...e){return this.context=t,this.register(...e),this.context=null,this}register(...t){if(++this.registerDepth===100)throw new Error("Unable to autoregister dependency");let e,s,o,n,r;const a=this.context;for(let l=0,h=t.length;l<h;++l)if(e=t[l],!!po(e))if(ze(e))e.register(this,a);else if(cr(e))be.singleton(e,e).register(this);else for(s=Object.keys(e),n=0,r=s.length;n<r;++n)o=e[s[n]],po(o)&&(ze(o)?o.register(this,a):this.register(o));return--this.registerDepth,this}registerResolver(t,e){Be(t);const s=this.resolvers,o=s.get(t);return o==null?s.set(t,e):o instanceof ft&&o.strategy===4?o.state.push(e):s.set(t,new ft(t,4,[o,e])),e}registerTransformer(t,e){const s=this.getResolver(t);if(s==null)return!1;if(s.getFactory){const o=s.getFactory(this);return o==null?!1:(o.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(Be(t),t.resolve!==void 0)return t;let s=this,o;for(;s!=null;)if(o=s.resolvers.get(t),o==null){if(s.parent==null){const n=ho(t)?this:s;return e?this.jitRegister(t,n):null}s=s.parent}else return o;return null}has(t,e=!1){return this.resolvers.has(t)?!0:e&&this.parent!=null?this.parent.has(t,!0):!1}get(t){if(Be(t),t.$isResolver)return t.resolve(this,this);let e=this,s;for(;e!=null;)if(s=e.resolvers.get(t),s==null){if(e.parent==null){const o=ho(t)?this:e;return s=this.jitRegister(t,o),s.resolve(e,this)}e=e.parent}else return s.resolve(e,this);throw new Error(`Unable to resolve key: ${String(t)}`)}getAll(t,e=!1){Be(t);const s=this;let o=s,n;if(e){let r=ue;for(;o!=null;)n=o.resolvers.get(t),n!=null&&(r=r.concat(go(n,o,s))),o=o.parent;return r}else for(;o!=null;)if(n=o.resolvers.get(t),n==null){if(o=o.parent,o==null)return ue}else return go(n,o,s);return ue}getFactory(t){let e=zi.get(t);if(e===void 0){if(gr(t))throw new Error(`${t.name} is a native function and therefore cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.`);zi.set(t,e=new ar(t,F.getDependencies(t)))}return e}registerFactory(t,e){zi.set(t,e)}createChild(t){return new Pe(null,Object.assign({},this.config,t,{parentLocator:()=>this}))}jitRegister(t,e){if(typeof t!="function")throw new Error(`Attempted to jitRegister something that is not a constructor: '${t}'. Did you forget to register this dependency?`);if(dr.has(t.name))throw new Error(`Attempted to jitRegister an intrinsic type: ${t.name}. Did you forget to add @inject(Key)`);if(ze(t)){const s=t.register(e);if(!(s instanceof Object)||s.resolve==null){const o=e.resolvers.get(t);if(o!=null)return o;throw new Error("A valid resolver was not returned from the static register method")}return s}else{if(t.$isInterface)throw new Error(`Attempted to jitRegister an interface: ${t.friendlyName}`);{const s=this.config.defaultResolver(t,e);return e.resolvers.set(t,s),s}}}}const Bi=new WeakMap;function uo(i){return function(t,e,s){if(Bi.has(s))return Bi.get(s);const o=i(t,e,s);return Bi.set(s,o),o}}const be=Object.freeze({instance(i,t){return new ft(i,0,t)},singleton(i,t){return new ft(i,1,t)},transient(i,t){return new ft(i,2,t)},callback(i,t){return new ft(i,3,t)},cachedCallback(i,t){return new ft(i,3,uo(t))},aliasTo(i,t){return new ft(t,5,i)}});function Be(i){if(i==null)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}function go(i,t,e){if(i instanceof ft&&i.strategy===4){const s=i.state;let o=s.length;const n=new Array(o);for(;o--;)n[o]=s[o].resolve(t,e);return n}return[i.resolve(t,e)]}const ur="(anonymous)";function po(i){return typeof i=="object"&&i!==null||typeof i=="function"}const gr=function(){const i=new WeakMap;let t=!1,e="",s=0;return function(o){return t=i.get(o),t===void 0&&(e=o.toString(),s=e.length,t=s>=29&&s<=100&&e.charCodeAt(s-1)===125&&e.charCodeAt(s-2)<=32&&e.charCodeAt(s-3)===93&&e.charCodeAt(s-4)===101&&e.charCodeAt(s-5)===100&&e.charCodeAt(s-6)===111&&e.charCodeAt(s-7)===99&&e.charCodeAt(s-8)===32&&e.charCodeAt(s-9)===101&&e.charCodeAt(s-10)===118&&e.charCodeAt(s-11)===105&&e.charCodeAt(s-12)===116&&e.charCodeAt(s-13)===97&&e.charCodeAt(s-14)===110&&e.charCodeAt(s-15)===88,i.set(o,t)),t}}(),je={};function fo(i){switch(typeof i){case"number":return i>=0&&(i|0)===i;case"string":{const t=je[i];if(t!==void 0)return t;const e=i.length;if(e===0)return je[i]=!1;let s=0;for(let o=0;o<e;++o)if(s=i.charCodeAt(o),o===0&&s===48&&e>1||s<48||s>57)return je[i]=!1;return je[i]=!0}default:return!1}}function mo(i){return`${i.toLowerCase()}:presentation`}const He=new Map,bo=Object.freeze({define(i,t,e){const s=mo(i);He.get(s)===void 0?He.set(s,t):He.set(s,!1),e.register(be.instance(s,t))},forTag(i,t){const e=mo(i),s=He.get(e);return s===!1?F.findResponsibleContainer(t).get(e):s||null}});class pr{constructor(t,e){this.template=t||null,this.styles=e===void 0?null:Array.isArray(e)?et.create(e):e instanceof et?e:et.create([e])}applyTo(t){const e=t.$fastController;e.template===null&&(e.template=this.template),e.styles===null&&(e.styles=this.styles)}}class ht extends Ae{constructor(){super(...arguments),this._presentation=void 0}get $presentation(){return this._presentation===void 0&&(this._presentation=bo.forTag(this.tagName,this)),this._presentation}templateChanged(){this.template!==void 0&&(this.$fastController.template=this.template)}stylesChanged(){this.styles!==void 0&&(this.$fastController.styles=this.styles)}connectedCallback(){this.$presentation!==null&&this.$presentation.applyTo(this),super.connectedCallback()}static compose(t){return(e={})=>new fr(this===ht?class extends ht{}:this,t,e)}}f([S],ht.prototype,"template",void 0),f([S],ht.prototype,"styles",void 0);function ve(i,t,e){return typeof i=="function"?i(t,e):i}class fr{constructor(t,e,s){this.type=t,this.elementDefinition=e,this.overrideDefinition=s,this.definition=Object.assign(Object.assign({},this.elementDefinition),this.overrideDefinition)}register(t,e){const s=this.definition,o=this.overrideDefinition,n=`${s.prefix||e.elementPrefix}-${s.baseName}`;e.tryDefineElement({name:n,type:this.type,baseClass:this.elementDefinition.baseClass,callback:r=>{const a=new pr(ve(s.template,r,s),ve(s.styles,r,s));r.definePresentation(a);let l=ve(s.shadowOptions,r,s);r.shadowRootMode&&(l?o.shadowOptions||(l.mode=r.shadowRootMode):l!==null&&(l={mode:r.shadowRootMode})),r.defineElement({elementOptions:ve(s.elementOptions,r,s),shadowOptions:l,attributes:ve(s.attributes,r,s)})}})}}function vo(i,...t){const e=Oe.locate(i);t.forEach(s=>{Object.getOwnPropertyNames(s.prototype).forEach(o=>{o!=="constructor"&&Object.defineProperty(i.prototype,o,Object.getOwnPropertyDescriptor(s.prototype,o))}),Oe.locate(s).forEach(o=>e.push(o))})}const K={horizontal:"horizontal",vertical:"vertical"};function mr(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function br(){const i=document.querySelector('meta[property="csp-nonce"]');return i?i.getAttribute("content"):null}let qt;function vr(){if(typeof qt=="boolean")return qt;if(!mr())return qt=!1,qt;const i=document.createElement("style"),t=br();t!==null&&i.setAttribute("nonce",t),document.head.appendChild(i);try{i.sheet.insertRule("foo:focus-visible {color:inherit}",0),qt=!0}catch{qt=!1}finally{document.head.removeChild(i)}return qt}const yo="resize",wo="scroll";var xo;(function(i){i[i.alt=18]="alt",i[i.arrowDown=40]="arrowDown",i[i.arrowLeft=37]="arrowLeft",i[i.arrowRight=39]="arrowRight",i[i.arrowUp=38]="arrowUp",i[i.back=8]="back",i[i.backSlash=220]="backSlash",i[i.break=19]="break",i[i.capsLock=20]="capsLock",i[i.closeBracket=221]="closeBracket",i[i.colon=186]="colon",i[i.colon2=59]="colon2",i[i.comma=188]="comma",i[i.ctrl=17]="ctrl",i[i.delete=46]="delete",i[i.end=35]="end",i[i.enter=13]="enter",i[i.equals=187]="equals",i[i.equals2=61]="equals2",i[i.equals3=107]="equals3",i[i.escape=27]="escape",i[i.forwardSlash=191]="forwardSlash",i[i.function1=112]="function1",i[i.function10=121]="function10",i[i.function11=122]="function11",i[i.function12=123]="function12",i[i.function2=113]="function2",i[i.function3=114]="function3",i[i.function4=115]="function4",i[i.function5=116]="function5",i[i.function6=117]="function6",i[i.function7=118]="function7",i[i.function8=119]="function8",i[i.function9=120]="function9",i[i.home=36]="home",i[i.insert=45]="insert",i[i.menu=93]="menu",i[i.minus=189]="minus",i[i.minus2=109]="minus2",i[i.numLock=144]="numLock",i[i.numPad0=96]="numPad0",i[i.numPad1=97]="numPad1",i[i.numPad2=98]="numPad2",i[i.numPad3=99]="numPad3",i[i.numPad4=100]="numPad4",i[i.numPad5=101]="numPad5",i[i.numPad6=102]="numPad6",i[i.numPad7=103]="numPad7",i[i.numPad8=104]="numPad8",i[i.numPad9=105]="numPad9",i[i.numPadDivide=111]="numPadDivide",i[i.numPadDot=110]="numPadDot",i[i.numPadMinus=109]="numPadMinus",i[i.numPadMultiply=106]="numPadMultiply",i[i.numPadPlus=107]="numPadPlus",i[i.openBracket=219]="openBracket",i[i.pageDown=34]="pageDown",i[i.pageUp=33]="pageUp",i[i.period=190]="period",i[i.print=44]="print",i[i.quote=222]="quote",i[i.scrollLock=145]="scrollLock",i[i.shift=16]="shift",i[i.space=32]="space",i[i.tab=9]="tab",i[i.tilde=192]="tilde",i[i.windowsLeft=91]="windowsLeft",i[i.windowsOpera=219]="windowsOpera",i[i.windowsRight=92]="windowsRight"})(xo||(xo={}));const ji="ArrowDown",Ue="ArrowLeft",We="ArrowRight",Hi="ArrowUp",Co="Enter",So="Escape",yr="Home",wr="End",xr=" ",Cr="Tab",Sr={ArrowDown:ji,ArrowLeft:Ue,ArrowRight:We,ArrowUp:Hi};var A;(function(i){i.ltr="ltr",i.rtl="rtl"})(A||(A={}));function kr(i,t,e){return Math.min(Math.max(e,i),t)}var m;(function(i){i.Canvas="Canvas",i.CanvasText="CanvasText",i.LinkText="LinkText",i.VisitedText="VisitedText",i.ActiveText="ActiveText",i.ButtonFace="ButtonFace",i.ButtonText="ButtonText",i.Field="Field",i.FieldText="FieldText",i.Highlight="Highlight",i.HighlightText="HighlightText",i.GrayText="GrayText"})(m||(m={}));class z{}f([y({attribute:"aria-atomic"})],z.prototype,"ariaAtomic",void 0),f([y({attribute:"aria-busy"})],z.prototype,"ariaBusy",void 0),f([y({attribute:"aria-controls"})],z.prototype,"ariaControls",void 0),f([y({attribute:"aria-current"})],z.prototype,"ariaCurrent",void 0),f([y({attribute:"aria-describedby"})],z.prototype,"ariaDescribedby",void 0),f([y({attribute:"aria-details"})],z.prototype,"ariaDetails",void 0),f([y({attribute:"aria-disabled"})],z.prototype,"ariaDisabled",void 0),f([y({attribute:"aria-errormessage"})],z.prototype,"ariaErrormessage",void 0),f([y({attribute:"aria-flowto"})],z.prototype,"ariaFlowto",void 0),f([y({attribute:"aria-haspopup"})],z.prototype,"ariaHaspopup",void 0),f([y({attribute:"aria-hidden"})],z.prototype,"ariaHidden",void 0),f([y({attribute:"aria-invalid"})],z.prototype,"ariaInvalid",void 0),f([y({attribute:"aria-keyshortcuts"})],z.prototype,"ariaKeyshortcuts",void 0),f([y({attribute:"aria-label"})],z.prototype,"ariaLabel",void 0),f([y({attribute:"aria-labelledby"})],z.prototype,"ariaLabelledby",void 0),f([y({attribute:"aria-live"})],z.prototype,"ariaLive",void 0),f([y({attribute:"aria-owns"})],z.prototype,"ariaOwns",void 0),f([y({attribute:"aria-relevant"})],z.prototype,"ariaRelevant",void 0),f([y({attribute:"aria-roledescription"})],z.prototype,"ariaRoledescription",void 0);const ye=i=>{const t=i.closest("[dir]");return t!==null&&t.dir==="rtl"?A.rtl:A.ltr};class Rr{constructor(){this.intersectionDetector=null,this.observedElements=new Map,this.requestPosition=(t,e)=>{var s;if(this.intersectionDetector!==null){if(this.observedElements.has(t)){(s=this.observedElements.get(t))===null||s===void 0||s.push(e);return}this.observedElements.set(t,[e]),this.intersectionDetector.observe(t)}},this.cancelRequestPosition=(t,e)=>{const s=this.observedElements.get(t);if(s!==void 0){const o=s.indexOf(e);o!==-1&&s.splice(o,1)}},this.initializeIntersectionDetector=()=>{Ft.IntersectionObserver&&(this.intersectionDetector=new IntersectionObserver(this.handleIntersection,{root:null,rootMargin:"0px",threshold:[0,1]}))},this.handleIntersection=t=>{if(this.intersectionDetector===null)return;const e=[],s=[];t.forEach(o=>{var n;(n=this.intersectionDetector)===null||n===void 0||n.unobserve(o.target);const r=this.observedElements.get(o.target);r!==void 0&&(r.forEach(a=>{let l=e.indexOf(a);l===-1&&(l=e.length,e.push(a),s.push([])),s[l].push(o)}),this.observedElements.delete(o.target))}),e.forEach((o,n)=>{o(s[n])})},this.initializeIntersectionDetector()}}class M extends ht{constructor(){super(...arguments),this.anchor="",this.viewport="",this.horizontalPositioningMode="uncontrolled",this.horizontalDefaultPosition="unset",this.horizontalViewportLock=!1,this.horizontalInset=!1,this.horizontalScaling="content",this.verticalPositioningMode="uncontrolled",this.verticalDefaultPosition="unset",this.verticalViewportLock=!1,this.verticalInset=!1,this.verticalScaling="content",this.fixedPlacement=!1,this.autoUpdateMode="anchor",this.anchorElement=null,this.viewportElement=null,this.initialLayoutComplete=!1,this.resizeDetector=null,this.baseHorizontalOffset=0,this.baseVerticalOffset=0,this.pendingPositioningUpdate=!1,this.pendingReset=!1,this.currentDirection=A.ltr,this.regionVisible=!1,this.forceUpdate=!1,this.updateThreshold=.5,this.update=()=>{this.pendingPositioningUpdate||this.requestPositionUpdates()},this.startObservers=()=>{this.stopObservers(),this.anchorElement!==null&&(this.requestPositionUpdates(),this.resizeDetector!==null&&(this.resizeDetector.observe(this.anchorElement),this.resizeDetector.observe(this)))},this.requestPositionUpdates=()=>{this.anchorElement===null||this.pendingPositioningUpdate||(M.intersectionService.requestPosition(this,this.handleIntersection),M.intersectionService.requestPosition(this.anchorElement,this.handleIntersection),this.viewportElement!==null&&M.intersectionService.requestPosition(this.viewportElement,this.handleIntersection),this.pendingPositioningUpdate=!0)},this.stopObservers=()=>{this.pendingPositioningUpdate&&(this.pendingPositioningUpdate=!1,M.intersectionService.cancelRequestPosition(this,this.handleIntersection),this.anchorElement!==null&&M.intersectionService.cancelRequestPosition(this.anchorElement,this.handleIntersection),this.viewportElement!==null&&M.intersectionService.cancelRequestPosition(this.viewportElement,this.handleIntersection)),this.resizeDetector!==null&&this.resizeDetector.disconnect()},this.getViewport=()=>typeof this.viewport!="string"||this.viewport===""?document.documentElement:document.getElementById(this.viewport),this.getAnchor=()=>document.getElementById(this.anchor),this.handleIntersection=t=>{this.pendingPositioningUpdate&&(this.pendingPositioningUpdate=!1,this.applyIntersectionEntries(t)&&this.updateLayout())},this.applyIntersectionEntries=t=>{const e=t.find(n=>n.target===this),s=t.find(n=>n.target===this.anchorElement),o=t.find(n=>n.target===this.viewportElement);return e===void 0||o===void 0||s===void 0?!1:!this.regionVisible||this.forceUpdate||this.regionRect===void 0||this.anchorRect===void 0||this.viewportRect===void 0||this.isRectDifferent(this.anchorRect,s.boundingClientRect)||this.isRectDifferent(this.viewportRect,o.boundingClientRect)||this.isRectDifferent(this.regionRect,e.boundingClientRect)?(this.regionRect=e.boundingClientRect,this.anchorRect=s.boundingClientRect,this.viewportElement===document.documentElement?this.viewportRect=new DOMRectReadOnly(o.boundingClientRect.x+document.documentElement.scrollLeft,o.boundingClientRect.y+document.documentElement.scrollTop,o.boundingClientRect.width,o.boundingClientRect.height):this.viewportRect=o.boundingClientRect,this.updateRegionOffset(),this.forceUpdate=!1,!0):!1},this.updateRegionOffset=()=>{this.anchorRect&&this.regionRect&&(this.baseHorizontalOffset=this.baseHorizontalOffset+(this.anchorRect.left-this.regionRect.left)+(this.translateX-this.baseHorizontalOffset),this.baseVerticalOffset=this.baseVerticalOffset+(this.anchorRect.top-this.regionRect.top)+(this.translateY-this.baseVerticalOffset))},this.isRectDifferent=(t,e)=>Math.abs(t.top-e.top)>this.updateThreshold||Math.abs(t.right-e.right)>this.updateThreshold||Math.abs(t.bottom-e.bottom)>this.updateThreshold||Math.abs(t.left-e.left)>this.updateThreshold,this.handleResize=t=>{this.update()},this.reset=()=>{this.pendingReset&&(this.pendingReset=!1,this.anchorElement===null&&(this.anchorElement=this.getAnchor()),this.viewportElement===null&&(this.viewportElement=this.getViewport()),this.currentDirection=ye(this),this.startObservers())},this.updateLayout=()=>{let t,e;if(this.horizontalPositioningMode!=="uncontrolled"){const n=this.getPositioningOptions(this.horizontalInset);if(this.horizontalDefaultPosition==="center")e="center";else if(this.horizontalDefaultPosition!=="unset"){let u=this.horizontalDefaultPosition;if(u==="start"||u==="end"){const p=ye(this);if(p!==this.currentDirection){this.currentDirection=p,this.initialize();return}this.currentDirection===A.ltr?u=u==="start"?"left":"right":u=u==="start"?"right":"left"}switch(u){case"left":e=this.horizontalInset?"insetStart":"start";break;case"right":e=this.horizontalInset?"insetEnd":"end";break}}const r=this.horizontalThreshold!==void 0?this.horizontalThreshold:this.regionRect!==void 0?this.regionRect.width:0,a=this.anchorRect!==void 0?this.anchorRect.left:0,l=this.anchorRect!==void 0?this.anchorRect.right:0,h=this.anchorRect!==void 0?this.anchorRect.width:0,c=this.viewportRect!==void 0?this.viewportRect.left:0,d=this.viewportRect!==void 0?this.viewportRect.right:0;(e===void 0||this.horizontalPositioningMode!=="locktodefault"&&this.getAvailableSpace(e,a,l,h,c,d)<r)&&(e=this.getAvailableSpace(n[0],a,l,h,c,d)>this.getAvailableSpace(n[1],a,l,h,c,d)?n[0]:n[1])}if(this.verticalPositioningMode!=="uncontrolled"){const n=this.getPositioningOptions(this.verticalInset);if(this.verticalDefaultPosition==="center")t="center";else if(this.verticalDefaultPosition!=="unset")switch(this.verticalDefaultPosition){case"top":t=this.verticalInset?"insetStart":"start";break;case"bottom":t=this.verticalInset?"insetEnd":"end";break}const r=this.verticalThreshold!==void 0?this.verticalThreshold:this.regionRect!==void 0?this.regionRect.height:0,a=this.anchorRect!==void 0?this.anchorRect.top:0,l=this.anchorRect!==void 0?this.anchorRect.bottom:0,h=this.anchorRect!==void 0?this.anchorRect.height:0,c=this.viewportRect!==void 0?this.viewportRect.top:0,d=this.viewportRect!==void 0?this.viewportRect.bottom:0;(t===void 0||this.verticalPositioningMode!=="locktodefault"&&this.getAvailableSpace(t,a,l,h,c,d)<r)&&(t=this.getAvailableSpace(n[0],a,l,h,c,d)>this.getAvailableSpace(n[1],a,l,h,c,d)?n[0]:n[1])}const s=this.getNextRegionDimension(e,t),o=this.horizontalPosition!==e||this.verticalPosition!==t;if(this.setHorizontalPosition(e,s),this.setVerticalPosition(t,s),this.updateRegionStyle(),!this.initialLayoutComplete){this.initialLayoutComplete=!0,this.requestPositionUpdates();return}this.regionVisible||(this.regionVisible=!0,this.style.removeProperty("pointer-events"),this.style.removeProperty("opacity"),this.classList.toggle("loaded",!0),this.$emit("loaded",this,{bubbles:!1})),this.updatePositionClasses(),o&&this.$emit("positionchange",this,{bubbles:!1})},this.updateRegionStyle=()=>{this.style.width=this.regionWidth,this.style.height=this.regionHeight,this.style.transform=`translate(${this.translateX}px, ${this.translateY}px)`},this.updatePositionClasses=()=>{this.classList.toggle("top",this.verticalPosition==="start"),this.classList.toggle("bottom",this.verticalPosition==="end"),this.classList.toggle("inset-top",this.verticalPosition==="insetStart"),this.classList.toggle("inset-bottom",this.verticalPosition==="insetEnd"),this.classList.toggle("vertical-center",this.verticalPosition==="center"),this.classList.toggle("left",this.horizontalPosition==="start"),this.classList.toggle("right",this.horizontalPosition==="end"),this.classList.toggle("inset-left",this.horizontalPosition==="insetStart"),this.classList.toggle("inset-right",this.horizontalPosition==="insetEnd"),this.classList.toggle("horizontal-center",this.horizontalPosition==="center")},this.setHorizontalPosition=(t,e)=>{if(t===void 0||this.regionRect===void 0||this.anchorRect===void 0||this.viewportRect===void 0)return;let s=0;switch(this.horizontalScaling){case"anchor":case"fill":s=this.horizontalViewportLock?this.viewportRect.width:e.width,this.regionWidth=`${s}px`;break;case"content":s=this.regionRect.width,this.regionWidth="unset";break}let o=0;switch(t){case"start":this.translateX=this.baseHorizontalOffset-s,this.horizontalViewportLock&&this.anchorRect.left>this.viewportRect.right&&(this.translateX=this.translateX-(this.anchorRect.left-this.viewportRect.right));break;case"insetStart":this.translateX=this.baseHorizontalOffset-s+this.anchorRect.width,this.horizontalViewportLock&&this.anchorRect.right>this.viewportRect.right&&(this.translateX=this.translateX-(this.anchorRect.right-this.viewportRect.right));break;case"insetEnd":this.translateX=this.baseHorizontalOffset,this.horizontalViewportLock&&this.anchorRect.left<this.viewportRect.left&&(this.translateX=this.translateX-(this.anchorRect.left-this.viewportRect.left));break;case"end":this.translateX=this.baseHorizontalOffset+this.anchorRect.width,this.horizontalViewportLock&&this.anchorRect.right<this.viewportRect.left&&(this.translateX=this.translateX-(this.anchorRect.right-this.viewportRect.left));break;case"center":if(o=(this.anchorRect.width-s)/2,this.translateX=this.baseHorizontalOffset+o,this.horizontalViewportLock){const n=this.anchorRect.left+o,r=this.anchorRect.right-o;n<this.viewportRect.left&&!(r>this.viewportRect.right)?this.translateX=this.translateX-(n-this.viewportRect.left):r>this.viewportRect.right&&!(n<this.viewportRect.left)&&(this.translateX=this.translateX-(r-this.viewportRect.right))}break}this.horizontalPosition=t},this.setVerticalPosition=(t,e)=>{if(t===void 0||this.regionRect===void 0||this.anchorRect===void 0||this.viewportRect===void 0)return;let s=0;switch(this.verticalScaling){case"anchor":case"fill":s=this.verticalViewportLock?this.viewportRect.height:e.height,this.regionHeight=`${s}px`;break;case"content":s=this.regionRect.height,this.regionHeight="unset";break}let o=0;switch(t){case"start":this.translateY=this.baseVerticalOffset-s,this.verticalViewportLock&&this.anchorRect.top>this.viewportRect.bottom&&(this.translateY=this.translateY-(this.anchorRect.top-this.viewportRect.bottom));break;case"insetStart":this.translateY=this.baseVerticalOffset-s+this.anchorRect.height,this.verticalViewportLock&&this.anchorRect.bottom>this.viewportRect.bottom&&(this.translateY=this.translateY-(this.anchorRect.bottom-this.viewportRect.bottom));break;case"insetEnd":this.translateY=this.baseVerticalOffset,this.verticalViewportLock&&this.anchorRect.top<this.viewportRect.top&&(this.translateY=this.translateY-(this.anchorRect.top-this.viewportRect.top));break;case"end":this.translateY=this.baseVerticalOffset+this.anchorRect.height,this.verticalViewportLock&&this.anchorRect.bottom<this.viewportRect.top&&(this.translateY=this.translateY-(this.anchorRect.bottom-this.viewportRect.top));break;case"center":if(o=(this.anchorRect.height-s)/2,this.translateY=this.baseVerticalOffset+o,this.verticalViewportLock){const n=this.anchorRect.top+o,r=this.anchorRect.bottom-o;n<this.viewportRect.top&&!(r>this.viewportRect.bottom)?this.translateY=this.translateY-(n-this.viewportRect.top):r>this.viewportRect.bottom&&!(n<this.viewportRect.top)&&(this.translateY=this.translateY-(r-this.viewportRect.bottom))}}this.verticalPosition=t},this.getPositioningOptions=t=>t?["insetStart","insetEnd"]:["start","end"],this.getAvailableSpace=(t,e,s,o,n,r)=>{const a=e-n,l=r-(e+o);switch(t){case"start":return a;case"insetStart":return a+o;case"insetEnd":return l+o;case"end":return l;case"center":return Math.min(a,l)*2+o}},this.getNextRegionDimension=(t,e)=>{const s={height:this.regionRect!==void 0?this.regionRect.height:0,width:this.regionRect!==void 0?this.regionRect.width:0};return t!==void 0&&this.horizontalScaling==="fill"?s.width=this.getAvailableSpace(t,this.anchorRect!==void 0?this.anchorRect.left:0,this.anchorRect!==void 0?this.anchorRect.right:0,this.anchorRect!==void 0?this.anchorRect.width:0,this.viewportRect!==void 0?this.viewportRect.left:0,this.viewportRect!==void 0?this.viewportRect.right:0):this.horizontalScaling==="anchor"&&(s.width=this.anchorRect!==void 0?this.anchorRect.width:0),e!==void 0&&this.verticalScaling==="fill"?s.height=this.getAvailableSpace(e,this.anchorRect!==void 0?this.anchorRect.top:0,this.anchorRect!==void 0?this.anchorRect.bottom:0,this.anchorRect!==void 0?this.anchorRect.height:0,this.viewportRect!==void 0?this.viewportRect.top:0,this.viewportRect!==void 0?this.viewportRect.bottom:0):this.verticalScaling==="anchor"&&(s.height=this.anchorRect!==void 0?this.anchorRect.height:0),s},this.startAutoUpdateEventListeners=()=>{window.addEventListener(yo,this.update,{passive:!0}),window.addEventListener(wo,this.update,{passive:!0,capture:!0}),this.resizeDetector!==null&&this.viewportElement!==null&&this.resizeDetector.observe(this.viewportElement)},this.stopAutoUpdateEventListeners=()=>{window.removeEventListener(yo,this.update),window.removeEventListener(wo,this.update),this.resizeDetector!==null&&this.viewportElement!==null&&this.resizeDetector.unobserve(this.viewportElement)}}anchorChanged(){this.initialLayoutComplete&&(this.anchorElement=this.getAnchor())}viewportChanged(){this.initialLayoutComplete&&(this.viewportElement=this.getViewport())}horizontalPositioningModeChanged(){this.requestReset()}horizontalDefaultPositionChanged(){this.updateForAttributeChange()}horizontalViewportLockChanged(){this.updateForAttributeChange()}horizontalInsetChanged(){this.updateForAttributeChange()}horizontalThresholdChanged(){this.updateForAttributeChange()}horizontalScalingChanged(){this.updateForAttributeChange()}verticalPositioningModeChanged(){this.requestReset()}verticalDefaultPositionChanged(){this.updateForAttributeChange()}verticalViewportLockChanged(){this.updateForAttributeChange()}verticalInsetChanged(){this.updateForAttributeChange()}verticalThresholdChanged(){this.updateForAttributeChange()}verticalScalingChanged(){this.updateForAttributeChange()}fixedPlacementChanged(){this.$fastController.isConnected&&this.initialLayoutComplete&&this.initialize()}autoUpdateModeChanged(t,e){this.$fastController.isConnected&&this.initialLayoutComplete&&(t==="auto"&&this.stopAutoUpdateEventListeners(),e==="auto"&&this.startAutoUpdateEventListeners())}anchorElementChanged(){this.requestReset()}viewportElementChanged(){this.$fastController.isConnected&&this.initialLayoutComplete&&this.initialize()}connectedCallback(){super.connectedCallback(),this.autoUpdateMode==="auto"&&this.startAutoUpdateEventListeners(),this.initialize()}disconnectedCallback(){super.disconnectedCallback(),this.autoUpdateMode==="auto"&&this.stopAutoUpdateEventListeners(),this.stopObservers(),this.disconnectResizeDetector()}adoptedCallback(){this.initialize()}disconnectResizeDetector(){this.resizeDetector!==null&&(this.resizeDetector.disconnect(),this.resizeDetector=null)}initializeResizeDetector(){this.disconnectResizeDetector(),this.resizeDetector=new window.ResizeObserver(this.handleResize)}updateForAttributeChange(){this.$fastController.isConnected&&this.initialLayoutComplete&&(this.forceUpdate=!0,this.update())}initialize(){this.initializeResizeDetector(),this.anchorElement===null&&(this.anchorElement=this.getAnchor()),this.requestReset()}requestReset(){this.$fastController.isConnected&&this.pendingReset===!1&&(this.setInitialState(),T.queueUpdate(()=>this.reset()),this.pendingReset=!0)}setInitialState(){this.initialLayoutComplete=!1,this.regionVisible=!1,this.translateX=0,this.translateY=0,this.baseHorizontalOffset=0,this.baseVerticalOffset=0,this.viewportRect=void 0,this.regionRect=void 0,this.anchorRect=void 0,this.verticalPosition=void 0,this.horizontalPosition=void 0,this.style.opacity="0",this.style.pointerEvents="none",this.forceUpdate=!1,this.style.position=this.fixedPlacement?"fixed":"absolute",this.updatePositionClasses(),this.updateRegionStyle()}}M.intersectionService=new Rr,f([y],M.prototype,"anchor",void 0),f([y],M.prototype,"viewport",void 0),f([y({attribute:"horizontal-positioning-mode"})],M.prototype,"horizontalPositioningMode",void 0),f([y({attribute:"horizontal-default-position"})],M.prototype,"horizontalDefaultPosition",void 0),f([y({attribute:"horizontal-viewport-lock",mode:"boolean"})],M.prototype,"horizontalViewportLock",void 0),f([y({attribute:"horizontal-inset",mode:"boolean"})],M.prototype,"horizontalInset",void 0),f([y({attribute:"horizontal-threshold"})],M.prototype,"horizontalThreshold",void 0),f([y({attribute:"horizontal-scaling"})],M.prototype,"horizontalScaling",void 0),f([y({attribute:"vertical-positioning-mode"})],M.prototype,"verticalPositioningMode",void 0),f([y({attribute:"vertical-default-position"})],M.prototype,"verticalDefaultPosition",void 0),f([y({attribute:"vertical-viewport-lock",mode:"boolean"})],M.prototype,"verticalViewportLock",void 0),f([y({attribute:"vertical-inset",mode:"boolean"})],M.prototype,"verticalInset",void 0),f([y({attribute:"vertical-threshold"})],M.prototype,"verticalThreshold",void 0),f([y({attribute:"vertical-scaling"})],M.prototype,"verticalScaling",void 0),f([y({attribute:"fixed-placement",mode:"boolean"})],M.prototype,"fixedPlacement",void 0),f([y({attribute:"auto-update-mode"})],M.prototype,"autoUpdateMode",void 0),f([S],M.prototype,"anchorElement",void 0),f([S],M.prototype,"viewportElement",void 0),f([S],M.prototype,"initialLayoutComplete",void 0);const Er=(i,t)=>rt`
    <button
        class="control"
        part="control"
        ?autofocus="${e=>e.autofocus}"
        ?disabled="${e=>e.disabled}"
        form="${e=>e.formId}"
        formaction="${e=>e.formaction}"
        formenctype="${e=>e.formenctype}"
        formmethod="${e=>e.formmethod}"
        formnovalidate="${e=>e.formnovalidate}"
        formtarget="${e=>e.formtarget}"
        name="${e=>e.name}"
        type="${e=>e.type}"
        value="${e=>e.value}"
        aria-atomic="${e=>e.ariaAtomic}"
        aria-busy="${e=>e.ariaBusy}"
        aria-controls="${e=>e.ariaControls}"
        aria-current="${e=>e.ariaCurrent}"
        aria-describedby="${e=>e.ariaDescribedby}"
        aria-details="${e=>e.ariaDetails}"
        aria-disabled="${e=>e.ariaDisabled}"
        aria-errormessage="${e=>e.ariaErrormessage}"
        aria-expanded="${e=>e.ariaExpanded}"
        aria-flowto="${e=>e.ariaFlowto}"
        aria-haspopup="${e=>e.ariaHaspopup}"
        aria-hidden="${e=>e.ariaHidden}"
        aria-invalid="${e=>e.ariaInvalid}"
        aria-keyshortcuts="${e=>e.ariaKeyshortcuts}"
        aria-label="${e=>e.ariaLabel}"
        aria-labelledby="${e=>e.ariaLabelledby}"
        aria-live="${e=>e.ariaLive}"
        aria-owns="${e=>e.ariaOwns}"
        aria-pressed="${e=>e.ariaPressed}"
        aria-relevant="${e=>e.ariaRelevant}"
        aria-roledescription="${e=>e.ariaRoledescription}"
        ${at("control")}
    >
        ${er(i,t)}
        <span class="content" part="content">
            <slot ${Oi("defaultSlottedContent")}></slot>
        </span>
        ${tr(i,t)}
    </button>
`,ko="form-associated-proxy",Ro="ElementInternals",Eo=Ro in window&&"setFormValue"in window[Ro].prototype,To=new WeakMap;function Ui(i){const t=class extends i{constructor(...e){super(...e),this.dirtyValue=!1,this.disabled=!1,this.proxyEventsToBlock=["change","click"],this.proxyInitialized=!1,this.required=!1,this.initialValue=this.initialValue||"",this.elementInternals||(this.formResetCallback=this.formResetCallback.bind(this))}static get formAssociated(){return Eo}get validity(){return this.elementInternals?this.elementInternals.validity:this.proxy.validity}get form(){return this.elementInternals?this.elementInternals.form:this.proxy.form}get validationMessage(){return this.elementInternals?this.elementInternals.validationMessage:this.proxy.validationMessage}get willValidate(){return this.elementInternals?this.elementInternals.willValidate:this.proxy.willValidate}get labels(){if(this.elementInternals)return Object.freeze(Array.from(this.elementInternals.labels));if(this.proxy instanceof HTMLElement&&this.proxy.ownerDocument&&this.id){const e=this.proxy.labels,s=Array.from(this.proxy.getRootNode().querySelectorAll(`[for='${this.id}']`)),o=e?s.concat(Array.from(e)):s;return Object.freeze(o)}else return ue}valueChanged(e,s){this.dirtyValue=!0,this.proxy instanceof HTMLElement&&(this.proxy.value=this.value),this.currentValue=this.value,this.setFormValue(this.value),this.validate()}currentValueChanged(){this.value=this.currentValue}initialValueChanged(e,s){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}disabledChanged(e,s){this.proxy instanceof HTMLElement&&(this.proxy.disabled=this.disabled),T.queueUpdate(()=>this.classList.toggle("disabled",this.disabled))}nameChanged(e,s){this.proxy instanceof HTMLElement&&(this.proxy.name=this.name)}requiredChanged(e,s){this.proxy instanceof HTMLElement&&(this.proxy.required=this.required),T.queueUpdate(()=>this.classList.toggle("required",this.required)),this.validate()}get elementInternals(){if(!Eo)return null;let e=To.get(this);return e||(e=this.attachInternals(),To.set(this,e)),e}connectedCallback(){super.connectedCallback(),this.addEventListener("keypress",this._keypressHandler),this.value||(this.value=this.initialValue,this.dirtyValue=!1),this.elementInternals||(this.attachProxy(),this.form&&this.form.addEventListener("reset",this.formResetCallback))}disconnectedCallback(){super.disconnectedCallback(),this.proxyEventsToBlock.forEach(e=>this.proxy.removeEventListener(e,this.stopPropagation)),!this.elementInternals&&this.form&&this.form.removeEventListener("reset",this.formResetCallback)}checkValidity(){return this.elementInternals?this.elementInternals.checkValidity():this.proxy.checkValidity()}reportValidity(){return this.elementInternals?this.elementInternals.reportValidity():this.proxy.reportValidity()}setValidity(e,s,o){this.elementInternals?this.elementInternals.setValidity(e,s,o):typeof s=="string"&&this.proxy.setCustomValidity(s)}formDisabledCallback(e){this.disabled=e}formResetCallback(){this.value=this.initialValue,this.dirtyValue=!1}attachProxy(){var e;this.proxyInitialized||(this.proxyInitialized=!0,this.proxy.style.display="none",this.proxyEventsToBlock.forEach(s=>this.proxy.addEventListener(s,this.stopPropagation)),this.proxy.disabled=this.disabled,this.proxy.required=this.required,typeof this.name=="string"&&(this.proxy.name=this.name),typeof this.value=="string"&&(this.proxy.value=this.value),this.proxy.setAttribute("slot",ko),this.proxySlot=document.createElement("slot"),this.proxySlot.setAttribute("name",ko)),(e=this.shadowRoot)===null||e===void 0||e.appendChild(this.proxySlot),this.appendChild(this.proxy)}detachProxy(){var e;this.removeChild(this.proxy),(e=this.shadowRoot)===null||e===void 0||e.removeChild(this.proxySlot)}validate(e){this.proxy instanceof HTMLElement&&this.setValidity(this.proxy.validity,this.proxy.validationMessage,e)}setFormValue(e,s){this.elementInternals&&this.elementInternals.setFormValue(e,s||e)}_keypressHandler(e){switch(e.key){case Co:if(this.form instanceof HTMLFormElement){const s=this.form.querySelector("[type=submit]");s==null||s.click()}break}}stopPropagation(e){e.stopPropagation()}};return y({mode:"boolean"})(t.prototype,"disabled"),y({mode:"fromView",attribute:"value"})(t.prototype,"initialValue"),y({attribute:"current-value"})(t.prototype,"currentValue"),y(t.prototype,"name"),y({mode:"boolean"})(t.prototype,"required"),S(t.prototype,"value"),t}function Tr(i){class t extends Ui(i){}class e extends t{constructor(...o){super(o),this.dirtyChecked=!1,this.checkedAttribute=!1,this.checked=!1,this.dirtyChecked=!1}checkedAttributeChanged(){this.defaultChecked=this.checkedAttribute}defaultCheckedChanged(){this.dirtyChecked||(this.checked=this.defaultChecked,this.dirtyChecked=!1)}checkedChanged(o,n){this.dirtyChecked||(this.dirtyChecked=!0),this.currentChecked=this.checked,this.updateForm(),this.proxy instanceof HTMLInputElement&&(this.proxy.checked=this.checked),o!==void 0&&this.$emit("change"),this.validate()}currentCheckedChanged(o,n){this.checked=this.currentChecked}updateForm(){const o=this.checked?this.value:null;this.setFormValue(o,o)}connectedCallback(){super.connectedCallback(),this.updateForm()}formResetCallback(){super.formResetCallback(),this.checked=!!this.checkedAttribute,this.dirtyChecked=!1}}return y({attribute:"checked",mode:"boolean"})(e.prototype,"checkedAttribute"),y({attribute:"current-checked",converter:Qs})(e.prototype,"currentChecked"),S(e.prototype,"defaultChecked"),S(e.prototype,"checked"),e}class $r extends ht{}class Mr extends Ui($r){constructor(){super(...arguments),this.proxy=document.createElement("input")}}let mt=class extends Mr{constructor(){super(...arguments),this.handleClick=i=>{var t;this.disabled&&((t=this.defaultSlottedContent)===null||t===void 0?void 0:t.length)<=1&&i.stopPropagation()},this.handleSubmission=()=>{if(!this.form)return;const i=this.proxy.isConnected;i||this.attachProxy(),typeof this.form.requestSubmit=="function"?this.form.requestSubmit(this.proxy):this.proxy.click(),i||this.detachProxy()},this.handleFormReset=()=>{var i;(i=this.form)===null||i===void 0||i.reset()},this.handleUnsupportedDelegatesFocus=()=>{var i;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&!((i=this.$fastController.definition.shadowOptions)===null||i===void 0)&&i.delegatesFocus&&(this.focus=()=>{this.control.focus()})}}formactionChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formAction=this.formaction)}formenctypeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formEnctype=this.formenctype)}formmethodChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formMethod=this.formmethod)}formnovalidateChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formNoValidate=this.formnovalidate)}formtargetChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formTarget=this.formtarget)}typeChanged(i,t){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type),t==="submit"&&this.addEventListener("click",this.handleSubmission),i==="submit"&&this.removeEventListener("click",this.handleSubmission),t==="reset"&&this.addEventListener("click",this.handleFormReset),i==="reset"&&this.removeEventListener("click",this.handleFormReset)}validate(){super.validate(this.control)}connectedCallback(){var i;super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.handleUnsupportedDelegatesFocus();const t=Array.from((i=this.control)===null||i===void 0?void 0:i.children);t&&t.forEach(e=>{e.addEventListener("click",this.handleClick)})}disconnectedCallback(){var i;super.disconnectedCallback();const t=Array.from((i=this.control)===null||i===void 0?void 0:i.children);t&&t.forEach(e=>{e.removeEventListener("click",this.handleClick)})}};f([y({mode:"boolean"})],mt.prototype,"autofocus",void 0),f([y({attribute:"form"})],mt.prototype,"formId",void 0),f([y],mt.prototype,"formaction",void 0),f([y],mt.prototype,"formenctype",void 0),f([y],mt.prototype,"formmethod",void 0),f([y({mode:"boolean"})],mt.prototype,"formnovalidate",void 0),f([y],mt.prototype,"formtarget",void 0),f([y],mt.prototype,"type",void 0),f([S],mt.prototype,"defaultSlottedContent",void 0);class qe{}f([y({attribute:"aria-expanded"})],qe.prototype,"ariaExpanded",void 0),f([y({attribute:"aria-pressed"})],qe.prototype,"ariaPressed",void 0),vo(qe,z),vo(mt,Zn,qe);function Wi(i){const t=i.parentElement;if(t)return t;{const e=i.getRootNode();if(e.host instanceof HTMLElement)return e.host}return null}function Ir(i,t){let e=t;for(;e!==null;){if(e===i)return!0;e=Wi(e)}return!1}const Vt=document.createElement("div");function Dr(i){return i instanceof Ae}class qi{setProperty(t,e){T.queueUpdate(()=>this.target.setProperty(t,e))}removeProperty(t){T.queueUpdate(()=>this.target.removeProperty(t))}}class Pr extends qi{constructor(t){super();const e=new CSSStyleSheet;e[Ys]=!0,this.target=e.cssRules[e.insertRule(":host{}")].style,t.$fastController.addStyles(et.create([e]))}}class Lr extends qi{constructor(){super();const t=new CSSStyleSheet;this.target=t.cssRules[t.insertRule(":root{}")].style,document.adoptedStyleSheets=[...document.adoptedStyleSheets,t]}}class Fr extends qi{constructor(){super(),this.style=document.createElement("style"),document.head.appendChild(this.style);const{sheet:t}=this.style;if(t){const e=t.insertRule(":root{}",t.cssRules.length);this.target=t.cssRules[e].style}}}class $o{constructor(t){this.store=new Map,this.target=null;const e=t.$fastController;this.style=document.createElement("style"),e.addStyles(this.style),V.getNotifier(e).subscribe(this,"isConnected"),this.handleChange(e,"isConnected")}targetChanged(){if(this.target!==null)for(const[t,e]of this.store.entries())this.target.setProperty(t,e)}setProperty(t,e){this.store.set(t,e),T.queueUpdate(()=>{this.target!==null&&this.target.setProperty(t,e)})}removeProperty(t){this.store.delete(t),T.queueUpdate(()=>{this.target!==null&&this.target.removeProperty(t)})}handleChange(t,e){const{sheet:s}=this.style;if(s){const o=s.insertRule(":host{}",s.cssRules.length);this.target=s.cssRules[o].style}else this.target=null}}f([S],$o.prototype,"target",void 0);class Vr{constructor(t){this.target=t.style}setProperty(t,e){T.queueUpdate(()=>this.target.setProperty(t,e))}removeProperty(t){T.queueUpdate(()=>this.target.removeProperty(t))}}class W{setProperty(t,e){W.properties[t]=e;for(const s of W.roots.values())Jt.getOrCreate(W.normalizeRoot(s)).setProperty(t,e)}removeProperty(t){delete W.properties[t];for(const e of W.roots.values())Jt.getOrCreate(W.normalizeRoot(e)).removeProperty(t)}static registerRoot(t){const{roots:e}=W;if(!e.has(t)){e.add(t);const s=Jt.getOrCreate(this.normalizeRoot(t));for(const o in W.properties)s.setProperty(o,W.properties[o])}}static unregisterRoot(t){const{roots:e}=W;if(e.has(t)){e.delete(t);const s=Jt.getOrCreate(W.normalizeRoot(t));for(const o in W.properties)s.removeProperty(o)}}static normalizeRoot(t){return t===Vt?document:t}}W.roots=new Set,W.properties={};const Gi=new WeakMap,Or=T.supportsAdoptedStyleSheets?Pr:$o,Jt=Object.freeze({getOrCreate(i){if(Gi.has(i))return Gi.get(i);let t;return i===Vt?t=new W:i instanceof Document?t=T.supportsAdoptedStyleSheets?new Lr:new Fr:Dr(i)?t=new Or(i):t=new Vr(i),Gi.set(i,t),t}});class st extends Fi{constructor(t){super(),this.subscribers=new WeakMap,this._appliedTo=new Set,this.name=t.name,t.cssCustomPropertyName!==null&&(this.cssCustomProperty=`--${t.cssCustomPropertyName}`,this.cssVar=`var(${this.cssCustomProperty})`),this.id=st.uniqueId(),st.tokensById.set(this.id,this)}get appliedTo(){return[...this._appliedTo]}static from(t){return new st({name:typeof t=="string"?t:t.name,cssCustomPropertyName:typeof t=="string"?t:t.cssCustomPropertyName===void 0?t.name:t.cssCustomPropertyName})}static isCSSDesignToken(t){return typeof t.cssCustomProperty=="string"}static isDerivedDesignTokenValue(t){return typeof t=="function"}static getTokenById(t){return st.tokensById.get(t)}getOrCreateSubscriberSet(t=this){return this.subscribers.get(t)||this.subscribers.set(t,new Set)&&this.subscribers.get(t)}createCSS(){return this.cssVar||""}getValueFor(t){const e=N.getOrCreate(t).get(this);if(e!==void 0)return e;throw new Error(`Value could not be retrieved for token named "${this.name}". Ensure the value is set for ${t} or an ancestor of ${t}.`)}setValueFor(t,e){return this._appliedTo.add(t),e instanceof st&&(e=this.alias(e)),N.getOrCreate(t).set(this,e),this}deleteValueFor(t){return this._appliedTo.delete(t),N.existsFor(t)&&N.getOrCreate(t).delete(this),this}withDefault(t){return this.setValueFor(Vt,t),this}subscribe(t,e){const s=this.getOrCreateSubscriberSet(e);e&&!N.existsFor(e)&&N.getOrCreate(e),s.has(t)||s.add(t)}unsubscribe(t,e){const s=this.subscribers.get(e||this);s&&s.has(t)&&s.delete(t)}notify(t){const e=Object.freeze({token:this,target:t});this.subscribers.has(this)&&this.subscribers.get(this).forEach(s=>s.handleChange(e)),this.subscribers.has(t)&&this.subscribers.get(t).forEach(s=>s.handleChange(e))}alias(t){return e=>t.getValueFor(e)}}st.uniqueId=(()=>{let i=0;return()=>(i++,i.toString(16))})(),st.tokensById=new Map;class Nr{startReflection(t,e){t.subscribe(this,e),this.handleChange({token:t,target:e})}stopReflection(t,e){t.unsubscribe(this,e),this.remove(t,e)}handleChange(t){const{token:e,target:s}=t;this.add(e,s)}add(t,e){Jt.getOrCreate(e).setProperty(t.cssCustomProperty,this.resolveCSSValue(N.getOrCreate(e).get(t)))}remove(t,e){Jt.getOrCreate(e).removeProperty(t.cssCustomProperty)}resolveCSSValue(t){return t&&typeof t.createCSS=="function"?t.createCSS():t}}class Ar{constructor(t,e,s){this.source=t,this.token=e,this.node=s,this.dependencies=new Set,this.observer=V.binding(t,this,!1),this.observer.handleChange=this.observer.call,this.handleChange()}disconnect(){this.observer.disconnect()}handleChange(){this.node.store.set(this.token,this.observer.observe(this.node.target,fe))}}class zr{constructor(){this.values=new Map}set(t,e){this.values.get(t)!==e&&(this.values.set(t,e),V.getNotifier(this).notify(t.id))}get(t){return V.track(this,t.id),this.values.get(t)}delete(t){this.values.delete(t)}all(){return this.values.entries()}}const we=new WeakMap,xe=new WeakMap;class N{constructor(t){this.target=t,this.store=new zr,this.children=[],this.assignedValues=new Map,this.reflecting=new Set,this.bindingObservers=new Map,this.tokenValueChangeHandler={handleChange:(e,s)=>{const o=st.getTokenById(s);o&&(o.notify(this.target),this.updateCSSTokenReflection(e,o))}},we.set(t,this),V.getNotifier(this.store).subscribe(this.tokenValueChangeHandler),t instanceof Ae?t.$fastController.addBehaviors([this]):t.isConnected&&this.bind()}static getOrCreate(t){return we.get(t)||new N(t)}static existsFor(t){return we.has(t)}static findParent(t){if(Vt!==t.target){let e=Wi(t.target);for(;e!==null;){if(we.has(e))return we.get(e);e=Wi(e)}return N.getOrCreate(Vt)}return null}static findClosestAssignedNode(t,e){let s=e;do{if(s.has(t))return s;s=s.parent?s.parent:s.target!==Vt?N.getOrCreate(Vt):null}while(s!==null);return null}get parent(){return xe.get(this)||null}updateCSSTokenReflection(t,e){if(st.isCSSDesignToken(e)){const s=this.parent,o=this.isReflecting(e);if(s){const n=s.get(e),r=t.get(e);n!==r&&!o?this.reflectToCSS(e):n===r&&o&&this.stopReflectToCSS(e)}else o||this.reflectToCSS(e)}}has(t){return this.assignedValues.has(t)}get(t){const e=this.store.get(t);if(e!==void 0)return e;const s=this.getRaw(t);if(s!==void 0)return this.hydrate(t,s),this.get(t)}getRaw(t){var e;return this.assignedValues.has(t)?this.assignedValues.get(t):(e=N.findClosestAssignedNode(t,this))===null||e===void 0?void 0:e.getRaw(t)}set(t,e){st.isDerivedDesignTokenValue(this.assignedValues.get(t))&&this.tearDownBindingObserver(t),this.assignedValues.set(t,e),st.isDerivedDesignTokenValue(e)?this.setupBindingObserver(t,e):this.store.set(t,e)}delete(t){this.assignedValues.delete(t),this.tearDownBindingObserver(t);const e=this.getRaw(t);e?this.hydrate(t,e):this.store.delete(t)}bind(){const t=N.findParent(this);t&&t.appendChild(this);for(const e of this.assignedValues.keys())e.notify(this.target)}unbind(){this.parent&&xe.get(this).removeChild(this)}appendChild(t){t.parent&&xe.get(t).removeChild(t);const e=this.children.filter(s=>t.contains(s));xe.set(t,this),this.children.push(t),e.forEach(s=>t.appendChild(s)),V.getNotifier(this.store).subscribe(t);for(const[s,o]of this.store.all())t.hydrate(s,this.bindingObservers.has(s)?this.getRaw(s):o)}removeChild(t){const e=this.children.indexOf(t);return e!==-1&&this.children.splice(e,1),V.getNotifier(this.store).unsubscribe(t),t.parent===this?xe.delete(t):!1}contains(t){return Ir(this.target,t.target)}reflectToCSS(t){this.isReflecting(t)||(this.reflecting.add(t),N.cssCustomPropertyReflector.startReflection(t,this.target))}stopReflectToCSS(t){this.isReflecting(t)&&(this.reflecting.delete(t),N.cssCustomPropertyReflector.stopReflection(t,this.target))}isReflecting(t){return this.reflecting.has(t)}handleChange(t,e){const s=st.getTokenById(e);s&&(this.hydrate(s,this.getRaw(s)),this.updateCSSTokenReflection(this.store,s))}hydrate(t,e){if(!this.has(t)){const s=this.bindingObservers.get(t);st.isDerivedDesignTokenValue(e)?s?s.source!==e&&(this.tearDownBindingObserver(t),this.setupBindingObserver(t,e)):this.setupBindingObserver(t,e):(s&&this.tearDownBindingObserver(t),this.store.set(t,e))}}setupBindingObserver(t,e){const s=new Ar(e,t,this);return this.bindingObservers.set(t,s),s}tearDownBindingObserver(t){return this.bindingObservers.has(t)?(this.bindingObservers.get(t).disconnect(),this.bindingObservers.delete(t),!0):!1}}N.cssCustomPropertyReflector=new Nr,f([S],N.prototype,"children",void 0);function Br(i){return st.from(i)}const Ge=Object.freeze({create:Br,notifyConnection(i){return!i.isConnected||!N.existsFor(i)?!1:(N.getOrCreate(i).bind(),!0)},notifyDisconnection(i){return i.isConnected||!N.existsFor(i)?!1:(N.getOrCreate(i).unbind(),!0)},registerRoot(i=Vt){W.registerRoot(i)},unregisterRoot(i=Vt){W.unregisterRoot(i)}}),Yi=Object.freeze({definitionCallbackOnly:null,ignoreDuplicate:Symbol()}),Xi=new Map,Ye=new Map;let Zt=null;const Ce=F.createInterface(i=>i.cachedCallback(t=>(Zt===null&&(Zt=new Io(null,t)),Zt))),Mo=Object.freeze({tagFor(i){return Ye.get(i)},responsibleFor(i){return i.$$designSystem$$||F.findResponsibleContainer(i).get(Ce)},getOrCreate(i){if(!i)return Zt===null&&(Zt=F.getOrCreateDOMContainer().get(Ce)),Zt;const t=i.$$designSystem$$;if(t)return t;const e=F.getOrCreateDOMContainer(i);if(e.has(Ce,!1))return e.get(Ce);{const s=new Io(i,e);return e.register(be.instance(Ce,s)),s}}});function jr(i,t,e){return typeof i=="string"?{name:i,type:t,callback:e}:i}class Io{constructor(t,e){this.owner=t,this.container=e,this.designTokensInitialized=!1,this.prefix="fast",this.shadowRootMode=void 0,this.disambiguate=()=>Yi.definitionCallbackOnly,t!==null&&(t.$$designSystem$$=this)}withPrefix(t){return this.prefix=t,this}withShadowRootMode(t){return this.shadowRootMode=t,this}withElementDisambiguation(t){return this.disambiguate=t,this}withDesignTokenRoot(t){return this.designTokenRoot=t,this}register(...t){const e=this.container,s=[],o=this.disambiguate,n=this.shadowRootMode,r={elementPrefix:this.prefix,tryDefineElement(a,l,h){const c=jr(a,l,h),{name:d,callback:u,baseClass:p}=c;let{type:b}=c,w=d,x=Xi.get(w),k=!0;for(;x;){const ot=o(w,b,x);switch(ot){case Yi.ignoreDuplicate:return;case Yi.definitionCallbackOnly:k=!1,x=void 0;break;default:w=ot,x=Xi.get(w);break}}k&&((Ye.has(b)||b===ht)&&(b=class extends b{}),Xi.set(w,b),Ye.set(b,w),p&&Ye.set(p,w)),s.push(new Hr(e,w,b,n,u,k))}};this.designTokensInitialized||(this.designTokensInitialized=!0,this.designTokenRoot!==null&&Ge.registerRoot(this.designTokenRoot)),e.registerWithContext(r,...t);for(const a of s)a.callback(a),a.willDefine&&a.definition!==null&&a.definition.define();return this}}class Hr{constructor(t,e,s,o,n,r){this.container=t,this.name=e,this.type=s,this.shadowRootMode=o,this.callback=n,this.willDefine=r,this.definition=null}definePresentation(t){bo.define(this.name,t,this.container)}defineElement(t){this.definition=new Ne(this.type,Object.assign(Object.assign({},t),{name:this.name}))}tagFor(t){return Mo.tagFor(t)}}const Ur=(i,t)=>rt`
    <div class="positioning-region" part="positioning-region">
        ${Vi(e=>e.modal,rt`
                <div
                    class="overlay"
                    part="overlay"
                    role="presentation"
                    @click="${e=>e.dismiss()}"
                ></div>
            `)}
        <div
            role="dialog"
            tabindex="-1"
            class="control"
            part="control"
            aria-modal="${e=>e.modal}"
            aria-describedby="${e=>e.ariaDescribedby}"
            aria-labelledby="${e=>e.ariaLabelledby}"
            aria-label="${e=>e.ariaLabel}"
            ${at("dialog")}
        >
            <slot></slot>
        </div>
    </div>
`;/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Wr=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],qr=Wr.join(","),Do=typeof Element>"u",Xe=Do?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,_i=!Do&&Element.prototype.getRootNode?function(i){return i.getRootNode()}:function(i){return i.ownerDocument},Gr=function(i,t){return i.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(i.tagName)||i.isContentEditable)&&isNaN(parseInt(i.getAttribute("tabindex"),10))?0:i.tabIndex},Po=function(i){return i.tagName==="INPUT"},Yr=function(i){return Po(i)&&i.type==="hidden"},Xr=function(i){var t=i.tagName==="DETAILS"&&Array.prototype.slice.apply(i.children).some(function(e){return e.tagName==="SUMMARY"});return t},_r=function(i,t){for(var e=0;e<i.length;e++)if(i[e].checked&&i[e].form===t)return i[e]},Kr=function(i){if(!i.name)return!0;var t=i.form||_i(i),e=function(n){return t.querySelectorAll('input[type="radio"][name="'+n+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=e(window.CSS.escape(i.name));else try{s=e(i.name)}catch(n){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",n.message),!1}var o=_r(s,i.form);return!o||o===i},Qr=function(i){return Po(i)&&i.type==="radio"},Jr=function(i){return Qr(i)&&!Kr(i)},Lo=function(i){var t=i.getBoundingClientRect(),e=t.width,s=t.height;return e===0&&s===0},Zr=function(i,t){var e=t.displayCheck,s=t.getShadowRoot;if(getComputedStyle(i).visibility==="hidden")return!0;var o=Xe.call(i,"details>summary:first-of-type"),n=o?i.parentElement:i;if(Xe.call(n,"details:not([open]) *"))return!0;var r=_i(i).host,a=(r==null?void 0:r.ownerDocument.contains(r))||i.ownerDocument.contains(i);if(!e||e==="full"){if(typeof s=="function"){for(var l=i;i;){var h=i.parentElement,c=_i(i);if(h&&!h.shadowRoot&&s(h)===!0)return Lo(i);i.assignedSlot?i=i.assignedSlot:!h&&c!==i.ownerDocument?i=c.host:i=h}i=l}if(a)return!i.getClientRects().length}else if(e==="non-zero-area")return Lo(i);return!1},ta=function(i){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(i.tagName))for(var t=i.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var e=0;e<t.children.length;e++){var s=t.children.item(e);if(s.tagName==="LEGEND")return Xe.call(t,"fieldset[disabled] *")?!0:!s.contains(i)}return!0}t=t.parentElement}return!1},ea=function(i,t){return!(t.disabled||Yr(t)||Zr(t,i)||Xr(t)||ta(t))},ia=function(i,t){return!(Jr(t)||Gr(t)<0||!ea(i,t))},Fo=function(i,t){if(t=t||{},!i)throw new Error("No node provided");return Xe.call(i,qr)===!1?!1:ia(t,i)};class wt extends ht{constructor(){super(...arguments),this.modal=!0,this.hidden=!1,this.trapFocus=!0,this.trapFocusChanged=()=>{this.$fastController.isConnected&&this.updateTrapFocus()},this.isTrappingFocus=!1,this.handleDocumentKeydown=t=>{if(!t.defaultPrevented&&!this.hidden)switch(t.key){case So:this.dismiss(),t.preventDefault();break;case Cr:this.handleTabKeyDown(t);break}},this.handleDocumentFocus=t=>{!t.defaultPrevented&&this.shouldForceFocus(t.target)&&(this.focusFirstElement(),t.preventDefault())},this.handleTabKeyDown=t=>{if(!this.trapFocus||this.hidden)return;const e=this.getTabQueueBounds();if(e.length!==0){if(e.length===1){e[0].focus(),t.preventDefault();return}t.shiftKey&&t.target===e[0]?(e[e.length-1].focus(),t.preventDefault()):!t.shiftKey&&t.target===e[e.length-1]&&(e[0].focus(),t.preventDefault())}},this.getTabQueueBounds=()=>{const t=[];return wt.reduceTabbableItems(t,this)},this.focusFirstElement=()=>{const t=this.getTabQueueBounds();t.length>0?t[0].focus():this.dialog instanceof HTMLElement&&this.dialog.focus()},this.shouldForceFocus=t=>this.isTrappingFocus&&!this.contains(t),this.shouldTrapFocus=()=>this.trapFocus&&!this.hidden,this.updateTrapFocus=t=>{const e=t===void 0?this.shouldTrapFocus():t;e&&!this.isTrappingFocus?(this.isTrappingFocus=!0,document.addEventListener("focusin",this.handleDocumentFocus),T.queueUpdate(()=>{this.shouldForceFocus(document.activeElement)&&this.focusFirstElement()})):!e&&this.isTrappingFocus&&(this.isTrappingFocus=!1,document.removeEventListener("focusin",this.handleDocumentFocus))}}dismiss(){this.$emit("dismiss"),this.$emit("cancel")}show(){this.hidden=!1}hide(){this.hidden=!0,this.$emit("close")}connectedCallback(){super.connectedCallback(),document.addEventListener("keydown",this.handleDocumentKeydown),this.notifier=V.getNotifier(this),this.notifier.subscribe(this,"hidden"),this.updateTrapFocus()}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.handleDocumentKeydown),this.updateTrapFocus(!1),this.notifier.unsubscribe(this,"hidden")}handleChange(t,e){switch(e){case"hidden":this.updateTrapFocus();break}}static reduceTabbableItems(t,e){return e.getAttribute("tabindex")==="-1"?t:Fo(e)||wt.isFocusableFastElement(e)&&wt.hasTabbableShadow(e)?(t.push(e),t):e.childElementCount?t.concat(Array.from(e.children).reduce(wt.reduceTabbableItems,[])):t}static isFocusableFastElement(t){var e,s;return!!(!((s=(e=t.$fastController)===null||e===void 0?void 0:e.definition.shadowOptions)===null||s===void 0)&&s.delegatesFocus)}static hasTabbableShadow(t){var e,s;return Array.from((s=(e=t.shadowRoot)===null||e===void 0?void 0:e.querySelectorAll("*"))!==null&&s!==void 0?s:[]).some(o=>Fo(o))}}f([y({mode:"boolean"})],wt.prototype,"modal",void 0),f([y({mode:"boolean"})],wt.prototype,"hidden",void 0),f([y({attribute:"trap-focus",mode:"boolean"})],wt.prototype,"trapFocus",void 0),f([y({attribute:"aria-describedby"})],wt.prototype,"ariaDescribedby",void 0),f([y({attribute:"aria-labelledby"})],wt.prototype,"ariaLabelledby",void 0),f([y({attribute:"aria-label"})],wt.prototype,"ariaLabel",void 0);const sa=(i,t)=>rt`
    <template
        role="radiogroup"
        aria-disabled="${e=>e.disabled}"
        aria-readonly="${e=>e.readOnly}"
        @click="${(e,s)=>e.clickHandler(s.event)}"
        @keydown="${(e,s)=>e.keydownHandler(s.event)}"
        @focusout="${(e,s)=>e.focusOutHandler(s.event)}"
    >
        <slot name="label"></slot>
        <div
            class="positioning-region ${e=>e.orientation===K.horizontal?"horizontal":"vertical"}"
            part="positioning-region"
        >
            <slot
                ${Oi({property:"slottedRadioButtons",filter:Kn("[role=radio]")})}
            ></slot>
        </div>
    </template>
`;class jt extends ht{constructor(){super(...arguments),this.orientation=K.horizontal,this.radioChangeHandler=t=>{const e=t.target;e.checked&&(this.slottedRadioButtons.forEach(s=>{s!==e&&(s.checked=!1,this.isInsideFoundationToolbar||s.setAttribute("tabindex","-1"))}),this.selectedRadio=e,this.value=e.value,e.setAttribute("tabindex","0"),this.focusedRadio=e),t.stopPropagation()},this.moveToRadioByIndex=(t,e)=>{const s=t[e];this.isInsideToolbar||(s.setAttribute("tabindex","0"),s.readOnly?this.slottedRadioButtons.forEach(o=>{o!==s&&o.setAttribute("tabindex","-1")}):(s.checked=!0,this.selectedRadio=s)),this.focusedRadio=s,s.focus()},this.moveRightOffGroup=()=>{var t;(t=this.nextElementSibling)===null||t===void 0||t.focus()},this.moveLeftOffGroup=()=>{var t;(t=this.previousElementSibling)===null||t===void 0||t.focus()},this.focusOutHandler=t=>{const e=this.slottedRadioButtons,s=t.target,o=s!==null?e.indexOf(s):0,n=this.focusedRadio?e.indexOf(this.focusedRadio):-1;return(n===0&&o===n||n===e.length-1&&n===o)&&(this.selectedRadio?(this.focusedRadio=this.selectedRadio,this.isInsideFoundationToolbar||(this.selectedRadio.setAttribute("tabindex","0"),e.forEach(r=>{r!==this.selectedRadio&&r.setAttribute("tabindex","-1")}))):(this.focusedRadio=e[0],this.focusedRadio.setAttribute("tabindex","0"),e.forEach(r=>{r!==this.focusedRadio&&r.setAttribute("tabindex","-1")}))),!0},this.clickHandler=t=>{const e=t.target;if(e){const s=this.slottedRadioButtons;e.checked||s.indexOf(e)===0?(e.setAttribute("tabindex","0"),this.selectedRadio=e):(e.setAttribute("tabindex","-1"),this.selectedRadio=null),this.focusedRadio=e}t.preventDefault()},this.shouldMoveOffGroupToTheRight=(t,e,s)=>t===e.length&&this.isInsideToolbar&&s===We,this.shouldMoveOffGroupToTheLeft=(t,e)=>(this.focusedRadio?t.indexOf(this.focusedRadio)-1:0)<0&&this.isInsideToolbar&&e===Ue,this.checkFocusedRadio=()=>{this.focusedRadio!==null&&!this.focusedRadio.readOnly&&!this.focusedRadio.checked&&(this.focusedRadio.checked=!0,this.focusedRadio.setAttribute("tabindex","0"),this.focusedRadio.focus(),this.selectedRadio=this.focusedRadio)},this.moveRight=t=>{const e=this.slottedRadioButtons;let s=0;if(s=this.focusedRadio?e.indexOf(this.focusedRadio)+1:1,this.shouldMoveOffGroupToTheRight(s,e,t.key)){this.moveRightOffGroup();return}else s===e.length&&(s=0);for(;s<e.length&&e.length>1;)if(e[s].disabled){if(this.focusedRadio&&s===e.indexOf(this.focusedRadio))break;if(s+1>=e.length){if(this.isInsideToolbar)break;s=0}else s+=1}else{this.moveToRadioByIndex(e,s);break}},this.moveLeft=t=>{const e=this.slottedRadioButtons;let s=0;if(s=this.focusedRadio?e.indexOf(this.focusedRadio)-1:0,s=s<0?e.length-1:s,this.shouldMoveOffGroupToTheLeft(e,t.key)){this.moveLeftOffGroup();return}for(;s>=0&&e.length>1;)if(e[s].disabled){if(this.focusedRadio&&s===e.indexOf(this.focusedRadio))break;s-1<0?s=e.length-1:s-=1}else{this.moveToRadioByIndex(e,s);break}},this.keydownHandler=t=>{const e=t.key;if(e in Sr&&this.isInsideFoundationToolbar)return!0;switch(e){case Co:{this.checkFocusedRadio();break}case We:case ji:{this.direction===A.ltr?this.moveRight(t):this.moveLeft(t);break}case Ue:case Hi:{this.direction===A.ltr?this.moveLeft(t):this.moveRight(t);break}default:return!0}}}readOnlyChanged(){this.slottedRadioButtons!==void 0&&this.slottedRadioButtons.forEach(t=>{this.readOnly?t.readOnly=!0:t.readOnly=!1})}disabledChanged(){this.slottedRadioButtons!==void 0&&this.slottedRadioButtons.forEach(t=>{this.disabled?t.disabled=!0:t.disabled=!1})}nameChanged(){this.slottedRadioButtons&&this.slottedRadioButtons.forEach(t=>{t.setAttribute("name",this.name)})}valueChanged(){this.slottedRadioButtons&&this.slottedRadioButtons.forEach(t=>{t.value===this.value&&(t.checked=!0,this.selectedRadio=t)}),this.$emit("change")}slottedRadioButtonsChanged(t,e){this.slottedRadioButtons&&this.slottedRadioButtons.length>0&&this.setupRadioButtons()}get parentToolbar(){return this.closest('[role="toolbar"]')}get isInsideToolbar(){var t;return(t=this.parentToolbar)!==null&&t!==void 0?t:!1}get isInsideFoundationToolbar(){var t;return!!(!((t=this.parentToolbar)===null||t===void 0)&&t.$fastController)}connectedCallback(){super.connectedCallback(),this.direction=ye(this),this.setupRadioButtons()}disconnectedCallback(){this.slottedRadioButtons.forEach(t=>{t.removeEventListener("change",this.radioChangeHandler)})}setupRadioButtons(){const t=this.slottedRadioButtons.filter(o=>o.hasAttribute("checked")),e=t?t.length:0;if(e>1){const o=t[e-1];o.checked=!0}let s=!1;if(this.slottedRadioButtons.forEach(o=>{this.name!==void 0&&o.setAttribute("name",this.name),this.disabled&&(o.disabled=!0),this.readOnly&&(o.readOnly=!0),this.value&&this.value===o.value?(this.selectedRadio=o,this.focusedRadio=o,o.checked=!0,o.setAttribute("tabindex","0"),s=!0):(this.isInsideFoundationToolbar||o.setAttribute("tabindex","-1"),o.checked=!1),o.addEventListener("change",this.radioChangeHandler)}),this.value===void 0&&this.slottedRadioButtons.length>0){const o=this.slottedRadioButtons.filter(r=>r.hasAttribute("checked")),n=o!==null?o.length:0;if(n>0&&!s){const r=o[n-1];r.checked=!0,this.focusedRadio=r,r.setAttribute("tabindex","0")}else this.slottedRadioButtons[0].setAttribute("tabindex","0"),this.focusedRadio=this.slottedRadioButtons[0]}}}f([y({attribute:"readonly",mode:"boolean"})],jt.prototype,"readOnly",void 0),f([y({attribute:"disabled",mode:"boolean"})],jt.prototype,"disabled",void 0),f([y],jt.prototype,"name",void 0),f([y],jt.prototype,"value",void 0),f([y],jt.prototype,"orientation",void 0),f([S],jt.prototype,"childItems",void 0),f([S],jt.prototype,"slottedRadioButtons",void 0);const oa=(i,t)=>rt`
    <template
        role="radio"
        class="${e=>e.checked?"checked":""} ${e=>e.readOnly?"readonly":""}"
        aria-checked="${e=>e.checked}"
        aria-required="${e=>e.required}"
        aria-disabled="${e=>e.disabled}"
        aria-readonly="${e=>e.readOnly}"
        @keypress="${(e,s)=>e.keypressHandler(s.event)}"
        @click="${(e,s)=>e.clickHandler(s.event)}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${t.checkedIndicator||""}
            </slot>
        </div>
        <label
            part="label"
            class="${e=>e.defaultSlottedNodes&&e.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${Oi("defaultSlottedNodes")}></slot>
        </label>
    </template>
`;class na extends ht{}class ra extends Tr(na){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class _e extends ra{constructor(){super(),this.initialValue="on",this.keypressHandler=t=>{switch(t.key){case xr:!this.checked&&!this.readOnly&&(this.checked=!0);return}return!0},this.proxy.setAttribute("type","radio")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}defaultCheckedChanged(){var t;this.$fastController.isConnected&&!this.dirtyChecked&&(this.isInsideRadioGroup()||(this.checked=(t=this.defaultChecked)!==null&&t!==void 0?t:!1,this.dirtyChecked=!1))}connectedCallback(){var t,e;super.connectedCallback(),this.validate(),((t=this.parentElement)===null||t===void 0?void 0:t.getAttribute("role"))!=="radiogroup"&&this.getAttribute("tabindex")===null&&(this.disabled||this.setAttribute("tabindex","0")),this.checkedAttribute&&(this.dirtyChecked||this.isInsideRadioGroup()||(this.checked=(e=this.defaultChecked)!==null&&e!==void 0?e:!1,this.dirtyChecked=!1))}isInsideRadioGroup(){return this.closest("[role=radiogroup]")!==null}clickHandler(t){!this.disabled&&!this.readOnly&&!this.checked&&(this.checked=!0)}}f([y({attribute:"readonly",mode:"boolean"})],_e.prototype,"readOnly",void 0),f([S],_e.prototype,"name",void 0),f([S],_e.prototype,"defaultSlottedNodes",void 0);const aa=(i,t)=>rt`
    <template
        aria-disabled="${e=>e.disabled}"
        class="${e=>e.sliderOrientation||K.horizontal}
            ${e=>e.disabled?"disabled":""}"
    >
        <div ${at("root")} part="root" class="root" style="${e=>e.positionStyle}">
            <div class="container">
                ${Vi(e=>!e.hideMark,rt`
                        <div class="mark"></div>
                    `)}
                <div class="label">
                    <slot></slot>
                </div>
            </div>
        </div>
    </template>
`;function Ki(i,t,e,s){let o=kr(0,1,(i-t)/(e-t));return s===A.rtl&&(o=1-o),o}const Ke={min:0,max:0,direction:A.ltr,orientation:K.horizontal,disabled:!1};let Et=class extends ht{constructor(){super(...arguments),this.hideMark=!1,this.sliderDirection=A.ltr,this.getSliderConfiguration=()=>{if(!this.isSliderConfig(this.parentNode))this.sliderDirection=Ke.direction||A.ltr,this.sliderOrientation=Ke.orientation,this.sliderMaxPosition=Ke.max,this.sliderMinPosition=Ke.min;else{const i=this.parentNode,{min:t,max:e,direction:s,orientation:o,disabled:n}=i;n!==void 0&&(this.disabled=n),this.sliderDirection=s||A.ltr,this.sliderOrientation=o||K.horizontal,this.sliderMaxPosition=e,this.sliderMinPosition=t}},this.positionAsStyle=()=>{const i=this.sliderDirection?this.sliderDirection:A.ltr,t=Ki(Number(this.position),Number(this.sliderMinPosition),Number(this.sliderMaxPosition));let e=Math.round((1-t)*100),s=Math.round(t*100);return Number.isNaN(s)&&Number.isNaN(e)&&(e=50,s=50),this.sliderOrientation===K.horizontal?i===A.rtl?`right: ${s}%; left: ${e}%;`:`left: ${s}%; right: ${e}%;`:`top: ${s}%; bottom: ${e}%;`}}positionChanged(){this.positionStyle=this.positionAsStyle()}sliderOrientationChanged(){}connectedCallback(){super.connectedCallback(),this.getSliderConfiguration(),this.positionStyle=this.positionAsStyle(),this.notifier=V.getNotifier(this.parentNode),this.notifier.subscribe(this,"orientation"),this.notifier.subscribe(this,"direction"),this.notifier.subscribe(this,"max"),this.notifier.subscribe(this,"min")}disconnectedCallback(){super.disconnectedCallback(),this.notifier.unsubscribe(this,"orientation"),this.notifier.unsubscribe(this,"direction"),this.notifier.unsubscribe(this,"max"),this.notifier.unsubscribe(this,"min")}handleChange(i,t){switch(t){case"direction":this.sliderDirection=i.direction;break;case"orientation":this.sliderOrientation=i.orientation;break;case"max":this.sliderMaxPosition=i.max;break;case"min":this.sliderMinPosition=i.min;break}this.positionStyle=this.positionAsStyle()}isSliderConfig(i){return i.max!==void 0&&i.min!==void 0}};f([S],Et.prototype,"positionStyle",void 0),f([y],Et.prototype,"position",void 0),f([y({attribute:"hide-mark",mode:"boolean"})],Et.prototype,"hideMark",void 0),f([y({attribute:"disabled",mode:"boolean"})],Et.prototype,"disabled",void 0),f([S],Et.prototype,"sliderOrientation",void 0),f([S],Et.prototype,"sliderMinPosition",void 0),f([S],Et.prototype,"sliderMaxPosition",void 0),f([S],Et.prototype,"sliderDirection",void 0);const la=(i,t)=>rt`
    <template
        role="slider"
        class="${e=>e.readOnly?"readonly":""}
        ${e=>e.orientation||K.horizontal}"
        tabindex="${e=>e.disabled?null:0}"
        aria-valuetext="${e=>e.valueTextFormatter(e.value)}"
        aria-valuenow="${e=>e.value}"
        aria-valuemin="${e=>e.min}"
        aria-valuemax="${e=>e.max}"
        aria-disabled="${e=>e.disabled?!0:void 0}"
        aria-readonly="${e=>e.readOnly?!0:void 0}"
        aria-orientation="${e=>e.orientation}"
        class="${e=>e.orientation}"
    >
        <div part="positioning-region" class="positioning-region">
            <div ${at("track")} part="track-container" class="track">
                <slot name="track"></slot>
                <div part="track-start" class="track-start" style="${e=>e.position}">
                    <slot name="track-start"></slot>
                </div>
            </div>
            <slot></slot>
            <div
                ${at("thumb")}
                part="thumb-container"
                class="thumb-container"
                style="${e=>e.position}"
            >
                <slot name="thumb">${t.thumb||""}</slot>
            </div>
        </div>
    </template>
`;class ha extends ht{}class ca extends Ui(ha){constructor(){super(...arguments),this.proxy=document.createElement("input")}}const da={singleValue:"single-value"};class Q extends ca{constructor(){super(...arguments),this.direction=A.ltr,this.isDragging=!1,this.trackWidth=0,this.trackMinWidth=0,this.trackHeight=0,this.trackLeft=0,this.trackMinHeight=0,this.valueTextFormatter=()=>null,this.min=0,this.max=10,this.step=1,this.orientation=K.horizontal,this.mode=da.singleValue,this.keypressHandler=t=>{if(!this.readOnly){if(t.key===yr)t.preventDefault(),this.value=`${this.min}`;else if(t.key===wr)t.preventDefault(),this.value=`${this.max}`;else if(!t.shiftKey)switch(t.key){case We:case Hi:t.preventDefault(),this.increment();break;case Ue:case ji:t.preventDefault(),this.decrement();break}}},this.setupTrackConstraints=()=>{const t=this.track.getBoundingClientRect();this.trackWidth=this.track.clientWidth,this.trackMinWidth=this.track.clientLeft,this.trackHeight=t.bottom,this.trackMinHeight=t.top,this.trackLeft=this.getBoundingClientRect().left,this.trackWidth===0&&(this.trackWidth=1)},this.setupListeners=(t=!1)=>{const e=`${t?"remove":"add"}EventListener`;this[e]("keydown",this.keypressHandler),this[e]("mousedown",this.handleMouseDown),this.thumb[e]("mousedown",this.handleThumbMouseDown,{passive:!0}),this.thumb[e]("touchstart",this.handleThumbMouseDown,{passive:!0}),t&&(this.handleMouseDown(null),this.handleThumbMouseDown(null))},this.initialValue="",this.handleThumbMouseDown=t=>{if(t){if(this.readOnly||this.disabled||t.defaultPrevented)return;t.target.focus()}const e=`${t!==null?"add":"remove"}EventListener`;window[e]("mouseup",this.handleWindowMouseUp),window[e]("mousemove",this.handleMouseMove,{passive:!0}),window[e]("touchmove",this.handleMouseMove,{passive:!0}),window[e]("touchend",this.handleWindowMouseUp),this.isDragging=t!==null},this.handleMouseMove=t=>{if(this.readOnly||this.disabled||t.defaultPrevented)return;const e=window.TouchEvent&&t instanceof TouchEvent?t.touches[0]:t,s=this.orientation===K.horizontal?e.pageX-document.documentElement.scrollLeft-this.trackLeft:e.pageY-document.documentElement.scrollTop;this.value=`${this.calculateNewValue(s)}`},this.calculateNewValue=t=>{const e=Ki(t,this.orientation===K.horizontal?this.trackMinWidth:this.trackMinHeight,this.orientation===K.horizontal?this.trackWidth:this.trackHeight,this.direction),s=(this.max-this.min)*e+this.min;return this.convertToConstrainedValue(s)},this.handleWindowMouseUp=t=>{this.stopDragging()},this.stopDragging=()=>{this.isDragging=!1,this.handleMouseDown(null),this.handleThumbMouseDown(null)},this.handleMouseDown=t=>{const e=`${t!==null?"add":"remove"}EventListener`;if((t===null||!this.disabled&&!this.readOnly)&&(window[e]("mouseup",this.handleWindowMouseUp),window.document[e]("mouseleave",this.handleWindowMouseUp),window[e]("mousemove",this.handleMouseMove),t)){t.preventDefault(),this.setupTrackConstraints(),t.target.focus();const s=this.orientation===K.horizontal?t.pageX-document.documentElement.scrollLeft-this.trackLeft:t.pageY-document.documentElement.scrollTop;this.value=`${this.calculateNewValue(s)}`}},this.convertToConstrainedValue=t=>{isNaN(t)&&(t=this.min);let e=t-this.min;const s=Math.round(e/this.step),o=e-s*(this.stepMultiplier*this.step)/this.stepMultiplier;return e=o>=Number(this.step)/2?e-o+Number(this.step):e-o,e+this.min}}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}get valueAsNumber(){return parseFloat(super.value)}set valueAsNumber(t){this.value=t.toString()}valueChanged(t,e){super.valueChanged(t,e),this.$fastController.isConnected&&this.setThumbPositionForOrientation(this.direction),this.$emit("change")}minChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.min=`${this.min}`),this.validate()}maxChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.max=`${this.max}`),this.validate()}stepChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.step=`${this.step}`),this.updateStepMultiplier(),this.validate()}orientationChanged(){this.$fastController.isConnected&&this.setThumbPositionForOrientation(this.direction)}connectedCallback(){super.connectedCallback(),this.proxy.setAttribute("type","range"),this.direction=ye(this),this.updateStepMultiplier(),this.setupTrackConstraints(),this.setupListeners(),this.setupDefaultValue(),this.setThumbPositionForOrientation(this.direction)}disconnectedCallback(){this.setupListeners(!0)}increment(){const t=this.direction!==A.rtl&&this.orientation!==K.vertical?Number(this.value)+Number(this.step):Number(this.value)-Number(this.step),e=this.convertToConstrainedValue(t),s=e<Number(this.max)?`${e}`:`${this.max}`;this.value=s}decrement(){const t=this.direction!==A.rtl&&this.orientation!==K.vertical?Number(this.value)-Number(this.step):Number(this.value)+Number(this.step),e=this.convertToConstrainedValue(t),s=e>Number(this.min)?`${e}`:`${this.min}`;this.value=s}setThumbPositionForOrientation(t){const e=(1-Ki(Number(this.value),Number(this.min),Number(this.max),t))*100;this.orientation===K.horizontal?this.position=this.isDragging?`right: ${e}%; transition: none;`:`right: ${e}%; transition: all 0.2s ease;`:this.position=this.isDragging?`bottom: ${e}%; transition: none;`:`bottom: ${e}%; transition: all 0.2s ease;`}updateStepMultiplier(){const t=this.step+"",e=this.step%1?t.length-t.indexOf(".")-1:0;this.stepMultiplier=Math.pow(10,e)}get midpoint(){return`${this.convertToConstrainedValue((this.max+this.min)/2)}`}setupDefaultValue(){if(typeof this.value=="string")if(this.value.length===0)this.initialValue=this.midpoint;else{const t=parseFloat(this.value);!Number.isNaN(t)&&(t<this.min||t>this.max)&&(this.value=this.midpoint)}}}f([y({attribute:"readonly",mode:"boolean"})],Q.prototype,"readOnly",void 0),f([S],Q.prototype,"direction",void 0),f([S],Q.prototype,"isDragging",void 0),f([S],Q.prototype,"position",void 0),f([S],Q.prototype,"trackWidth",void 0),f([S],Q.prototype,"trackMinWidth",void 0),f([S],Q.prototype,"trackHeight",void 0),f([S],Q.prototype,"trackLeft",void 0),f([S],Q.prototype,"trackMinHeight",void 0),f([S],Q.prototype,"valueTextFormatter",void 0),f([y({converter:Di})],Q.prototype,"min",void 0),f([y({converter:Di})],Q.prototype,"max",void 0),f([y({converter:Di})],Q.prototype,"step",void 0),f([y],Q.prototype,"orientation",void 0),f([y],Q.prototype,"mode",void 0);const ua=(i,t)=>rt`
        ${Vi(e=>e.tooltipVisible,rt`
            <${i.tagFor(M)}
                fixed-placement="true"
                auto-update-mode="${e=>e.autoUpdateMode}"
                vertical-positioning-mode="${e=>e.verticalPositioningMode}"
                vertical-default-position="${e=>e.verticalDefaultPosition}"
                vertical-inset="${e=>e.verticalInset}"
                vertical-scaling="${e=>e.verticalScaling}"
                horizontal-positioning-mode="${e=>e.horizontalPositioningMode}"
                horizontal-default-position="${e=>e.horizontalDefaultPosition}"
                horizontal-scaling="${e=>e.horizontalScaling}"
                horizontal-inset="${e=>e.horizontalInset}"
                vertical-viewport-lock="${e=>e.horizontalViewportLock}"
                horizontal-viewport-lock="${e=>e.verticalViewportLock}"
                dir="${e=>e.currentDirection}"
                ${at("region")}
            >
                <div class="tooltip" part="tooltip" role="tooltip">
                    <slot></slot>
                </div>
            </${i.tagFor(M)}>
        `)}
    `,lt={top:"top",right:"right",bottom:"bottom",left:"left",start:"start",end:"end",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",topStart:"top-start",topEnd:"top-end",bottomStart:"bottom-start",bottomEnd:"bottom-end"};class B extends ht{constructor(){super(...arguments),this.anchor="",this.delay=300,this.autoUpdateMode="anchor",this.anchorElement=null,this.viewportElement=null,this.verticalPositioningMode="dynamic",this.horizontalPositioningMode="dynamic",this.horizontalInset="false",this.verticalInset="false",this.horizontalScaling="content",this.verticalScaling="content",this.verticalDefaultPosition=void 0,this.horizontalDefaultPosition=void 0,this.tooltipVisible=!1,this.currentDirection=A.ltr,this.showDelayTimer=null,this.hideDelayTimer=null,this.isAnchorHoveredFocused=!1,this.isRegionHovered=!1,this.handlePositionChange=t=>{this.classList.toggle("top",this.region.verticalPosition==="start"),this.classList.toggle("bottom",this.region.verticalPosition==="end"),this.classList.toggle("inset-top",this.region.verticalPosition==="insetStart"),this.classList.toggle("inset-bottom",this.region.verticalPosition==="insetEnd"),this.classList.toggle("center-vertical",this.region.verticalPosition==="center"),this.classList.toggle("left",this.region.horizontalPosition==="start"),this.classList.toggle("right",this.region.horizontalPosition==="end"),this.classList.toggle("inset-left",this.region.horizontalPosition==="insetStart"),this.classList.toggle("inset-right",this.region.horizontalPosition==="insetEnd"),this.classList.toggle("center-horizontal",this.region.horizontalPosition==="center")},this.handleRegionMouseOver=t=>{this.isRegionHovered=!0},this.handleRegionMouseOut=t=>{this.isRegionHovered=!1,this.startHideDelayTimer()},this.handleAnchorMouseOver=t=>{if(this.tooltipVisible){this.isAnchorHoveredFocused=!0;return}this.startShowDelayTimer()},this.handleAnchorMouseOut=t=>{this.isAnchorHoveredFocused=!1,this.clearShowDelayTimer(),this.startHideDelayTimer()},this.handleAnchorFocusIn=t=>{this.startShowDelayTimer()},this.handleAnchorFocusOut=t=>{this.isAnchorHoveredFocused=!1,this.clearShowDelayTimer(),this.startHideDelayTimer()},this.startHideDelayTimer=()=>{this.clearHideDelayTimer(),this.tooltipVisible&&(this.hideDelayTimer=window.setTimeout(()=>{this.updateTooltipVisibility()},60))},this.clearHideDelayTimer=()=>{this.hideDelayTimer!==null&&(clearTimeout(this.hideDelayTimer),this.hideDelayTimer=null)},this.startShowDelayTimer=()=>{if(!this.isAnchorHoveredFocused){if(this.delay>1){this.showDelayTimer===null&&(this.showDelayTimer=window.setTimeout(()=>{this.startHover()},this.delay));return}this.startHover()}},this.startHover=()=>{this.isAnchorHoveredFocused=!0,this.updateTooltipVisibility()},this.clearShowDelayTimer=()=>{this.showDelayTimer!==null&&(clearTimeout(this.showDelayTimer),this.showDelayTimer=null)},this.getAnchor=()=>{const t=this.getRootNode();return t instanceof ShadowRoot?t.getElementById(this.anchor):document.getElementById(this.anchor)},this.handleDocumentKeydown=t=>{if(!t.defaultPrevented&&this.tooltipVisible)switch(t.key){case So:this.isAnchorHoveredFocused=!1,this.updateTooltipVisibility(),this.$emit("dismiss");break}},this.updateTooltipVisibility=()=>{if(this.visible===!1)this.hideTooltip();else if(this.visible===!0){this.showTooltip();return}else{if(this.isAnchorHoveredFocused||this.isRegionHovered){this.showTooltip();return}this.hideTooltip()}},this.showTooltip=()=>{this.tooltipVisible||(this.currentDirection=ye(this),this.tooltipVisible=!0,document.addEventListener("keydown",this.handleDocumentKeydown),T.queueUpdate(this.setRegionProps))},this.hideTooltip=()=>{this.tooltipVisible&&(this.clearHideDelayTimer(),this.region!==null&&this.region!==void 0&&(this.region.removeEventListener("positionchange",this.handlePositionChange),this.region.viewportElement=null,this.region.anchorElement=null,this.region.removeEventListener("mouseover",this.handleRegionMouseOver),this.region.removeEventListener("mouseout",this.handleRegionMouseOut)),document.removeEventListener("keydown",this.handleDocumentKeydown),this.tooltipVisible=!1)},this.setRegionProps=()=>{this.tooltipVisible&&(this.region.viewportElement=this.viewportElement,this.region.anchorElement=this.anchorElement,this.region.addEventListener("positionchange",this.handlePositionChange),this.region.addEventListener("mouseover",this.handleRegionMouseOver,{passive:!0}),this.region.addEventListener("mouseout",this.handleRegionMouseOut,{passive:!0}))}}visibleChanged(){this.$fastController.isConnected&&(this.updateTooltipVisibility(),this.updateLayout())}anchorChanged(){this.$fastController.isConnected&&(this.anchorElement=this.getAnchor())}positionChanged(){this.$fastController.isConnected&&this.updateLayout()}anchorElementChanged(t){if(this.$fastController.isConnected){if(t!=null&&(t.removeEventListener("mouseover",this.handleAnchorMouseOver),t.removeEventListener("mouseout",this.handleAnchorMouseOut),t.removeEventListener("focusin",this.handleAnchorFocusIn),t.removeEventListener("focusout",this.handleAnchorFocusOut)),this.anchorElement!==null&&this.anchorElement!==void 0){this.anchorElement.addEventListener("mouseover",this.handleAnchorMouseOver,{passive:!0}),this.anchorElement.addEventListener("mouseout",this.handleAnchorMouseOut,{passive:!0}),this.anchorElement.addEventListener("focusin",this.handleAnchorFocusIn,{passive:!0}),this.anchorElement.addEventListener("focusout",this.handleAnchorFocusOut,{passive:!0});const e=this.anchorElement.id;this.anchorElement.parentElement!==null&&this.anchorElement.parentElement.querySelectorAll(":hover").forEach(s=>{s.id===e&&this.startShowDelayTimer()})}this.region!==null&&this.region!==void 0&&this.tooltipVisible&&(this.region.anchorElement=this.anchorElement),this.updateLayout()}}viewportElementChanged(){this.region!==null&&this.region!==void 0&&(this.region.viewportElement=this.viewportElement),this.updateLayout()}connectedCallback(){super.connectedCallback(),this.anchorElement=this.getAnchor(),this.updateTooltipVisibility()}disconnectedCallback(){this.hideTooltip(),this.clearShowDelayTimer(),this.clearHideDelayTimer(),super.disconnectedCallback()}updateLayout(){switch(this.verticalPositioningMode="locktodefault",this.horizontalPositioningMode="locktodefault",this.position){case lt.top:case lt.bottom:this.verticalDefaultPosition=this.position,this.horizontalDefaultPosition="center";break;case lt.right:case lt.left:case lt.start:case lt.end:this.verticalDefaultPosition="center",this.horizontalDefaultPosition=this.position;break;case lt.topLeft:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="left";break;case lt.topRight:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="right";break;case lt.bottomLeft:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="left";break;case lt.bottomRight:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="right";break;case lt.topStart:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="start";break;case lt.topEnd:this.verticalDefaultPosition="top",this.horizontalDefaultPosition="end";break;case lt.bottomStart:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="start";break;case lt.bottomEnd:this.verticalDefaultPosition="bottom",this.horizontalDefaultPosition="end";break;default:this.verticalPositioningMode="dynamic",this.horizontalPositioningMode="dynamic",this.verticalDefaultPosition=void 0,this.horizontalDefaultPosition="center";break}}}f([y({mode:"boolean"})],B.prototype,"visible",void 0),f([y],B.prototype,"anchor",void 0),f([y],B.prototype,"delay",void 0),f([y],B.prototype,"position",void 0),f([y({attribute:"auto-update-mode"})],B.prototype,"autoUpdateMode",void 0),f([y({attribute:"horizontal-viewport-lock"})],B.prototype,"horizontalViewportLock",void 0),f([y({attribute:"vertical-viewport-lock"})],B.prototype,"verticalViewportLock",void 0),f([S],B.prototype,"anchorElement",void 0),f([S],B.prototype,"viewportElement",void 0),f([S],B.prototype,"verticalPositioningMode",void 0),f([S],B.prototype,"horizontalPositioningMode",void 0),f([S],B.prototype,"horizontalInset",void 0),f([S],B.prototype,"verticalInset",void 0),f([S],B.prototype,"horizontalScaling",void 0),f([S],B.prototype,"verticalScaling",void 0),f([S],B.prototype,"verticalDefaultPosition",void 0),f([S],B.prototype,"horizontalDefaultPosition",void 0),f([S],B.prototype,"tooltipVisible",void 0),f([S],B.prototype,"currentDirection",void 0);class ga{constructor(t){this.listenerCache=new WeakMap,this.query=t}bind(t){const{query:e}=this,s=this.constructListener(t);s.bind(e)(),e.addListener(s),this.listenerCache.set(t,s)}unbind(t){const e=this.listenerCache.get(t);e&&(this.query.removeListener(e),this.listenerCache.delete(t))}}class Le extends ga{constructor(t,e){super(t),this.styles=e}static with(t){return e=>new Le(t,e)}constructListener(t){let e=!1;const s=this.styles;return function(){const{matches:o}=this;o&&!e?(t.$fastController.addStyles(s),e=o):!o&&e&&(t.$fastController.removeStyles(s),e=o)}}unbind(t){super.unbind(t),t.$fastController.removeStyles(this.styles)}}const it=Le.with(window.matchMedia("(forced-colors)"));Le.with(window.matchMedia("(prefers-color-scheme: dark)")),Le.with(window.matchMedia("(prefers-color-scheme: light)"));class pa{constructor(t,e,s){this.propertyName=t,this.value=e,this.styles=s}bind(t){V.getNotifier(t).subscribe(this,this.propertyName),this.handleChange(t,this.propertyName)}unbind(t){V.getNotifier(t).unsubscribe(this,this.propertyName),t.$fastController.removeStyles(this.styles)}handleChange(t,e){t[e]===this.value?t.$fastController.addStyles(this.styles):t.$fastController.removeStyles(this.styles)}}const Qe="not-allowed",fa=":host([hidden]){display:none}";function Se(i){return`${fa}:host{display:${i}}`}const P=vr()?"focus-visible":"focus";function Ot(i,t,e){return isNaN(i)||i<=t?t:i>=e?e:i}function Qi(i,t,e){return isNaN(i)||i<=t?0:i>=e?1:i/(e-t)}function Gt(i,t,e){return isNaN(i)?t:t+i*(e-t)}function Vo(i){return i*(Math.PI/180)}function ma(i){return i*(180/Math.PI)}function ba(i){const t=Math.round(Ot(i,0,255)).toString(16);return t.length===1?"0"+t:t}function J(i,t,e){return isNaN(i)||i<=0?t:i>=1?e:t+i*(e-t)}function Ji(i,t,e){if(i<=0)return t%360;if(i>=1)return e%360;const s=(t-e+360)%360,o=(e-t+360)%360;return s<=o?(t-s*i+360)%360:(t+s*i+360)%360}function H(i,t){const e=Math.pow(10,t);return Math.round(i*e)/e}class Qt{constructor(t,e,s){this.h=t,this.s=e,this.l=s}static fromObject(t){return t&&!isNaN(t.h)&&!isNaN(t.s)&&!isNaN(t.l)?new Qt(t.h,t.s,t.l):null}equalValue(t){return this.h===t.h&&this.s===t.s&&this.l===t.l}roundToPrecision(t){return new Qt(H(this.h,t),H(this.s,t),H(this.l,t))}toObject(){return{h:this.h,s:this.s,l:this.l}}}class Fe{constructor(t,e,s){this.h=t,this.s=e,this.v=s}static fromObject(t){return t&&!isNaN(t.h)&&!isNaN(t.s)&&!isNaN(t.v)?new Fe(t.h,t.s,t.v):null}equalValue(t){return this.h===t.h&&this.s===t.s&&this.v===t.v}roundToPrecision(t){return new Fe(H(this.h,t),H(this.s,t),H(this.v,t))}toObject(){return{h:this.h,s:this.s,v:this.v}}}class _{constructor(t,e,s){this.l=t,this.a=e,this.b=s}static fromObject(t){return t&&!isNaN(t.l)&&!isNaN(t.a)&&!isNaN(t.b)?new _(t.l,t.a,t.b):null}equalValue(t){return this.l===t.l&&this.a===t.a&&this.b===t.b}roundToPrecision(t){return new _(H(this.l,t),H(this.a,t),H(this.b,t))}toObject(){return{l:this.l,a:this.a,b:this.b}}}_.epsilon=216/24389,_.kappa=24389/27;class he{constructor(t,e,s){this.l=t,this.c=e,this.h=s}static fromObject(t){return t&&!isNaN(t.l)&&!isNaN(t.c)&&!isNaN(t.h)?new he(t.l,t.c,t.h):null}equalValue(t){return this.l===t.l&&this.c===t.c&&this.h===t.h}roundToPrecision(t){return new he(H(this.l,t),H(this.c,t),H(this.h,t))}toObject(){return{l:this.l,c:this.c,h:this.h}}}class O{constructor(t,e,s,o){this.r=t,this.g=e,this.b=s,this.a=typeof o=="number"&&!isNaN(o)?o:1}static fromObject(t){return t&&!isNaN(t.r)&&!isNaN(t.g)&&!isNaN(t.b)?new O(t.r,t.g,t.b,t.a):null}equalValue(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}toStringHexRGB(){return"#"+[this.r,this.g,this.b].map(this.formatHexValue).join("")}toStringHexRGBA(){return this.toStringHexRGB()+this.formatHexValue(this.a)}toStringHexARGB(){return"#"+[this.a,this.r,this.g,this.b].map(this.formatHexValue).join("")}toStringWebRGB(){return`rgb(${Math.round(Gt(this.r,0,255))},${Math.round(Gt(this.g,0,255))},${Math.round(Gt(this.b,0,255))})`}toStringWebRGBA(){return`rgba(${Math.round(Gt(this.r,0,255))},${Math.round(Gt(this.g,0,255))},${Math.round(Gt(this.b,0,255))},${Ot(this.a,0,1)})`}roundToPrecision(t){return new O(H(this.r,t),H(this.g,t),H(this.b,t),H(this.a,t))}clamp(){return new O(Ot(this.r,0,1),Ot(this.g,0,1),Ot(this.b,0,1),Ot(this.a,0,1))}toObject(){return{r:this.r,g:this.g,b:this.b,a:this.a}}formatHexValue(t){return ba(Gt(t,0,255))}}class ct{constructor(t,e,s){this.x=t,this.y=e,this.z=s}static fromObject(t){return t&&!isNaN(t.x)&&!isNaN(t.y)&&!isNaN(t.z)?new ct(t.x,t.y,t.z):null}equalValue(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}roundToPrecision(t){return new ct(H(this.x,t),H(this.y,t),H(this.z,t))}toObject(){return{x:this.x,y:this.y,z:this.z}}}ct.whitePoint=new ct(.95047,1,1.08883);function Zi(i){return i.r*.2126+i.g*.7152+i.b*.0722}function ts(i){function t(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return Zi(new O(t(i.r),t(i.g),t(i.b),1))}const Oo=(i,t)=>(i+.05)/(t+.05);function No(i,t){const e=ts(i),s=ts(t);return e>s?Oo(e,s):Oo(s,e)}function ke(i){const t=Math.max(i.r,i.g,i.b),e=Math.min(i.r,i.g,i.b),s=t-e;let o=0;s!==0&&(t===i.r?o=60*((i.g-i.b)/s%6):t===i.g?o=60*((i.b-i.r)/s+2):o=60*((i.r-i.g)/s+4)),o<0&&(o+=360);const n=(t+e)/2;let r=0;return s!==0&&(r=s/(1-Math.abs(2*n-1))),new Qt(o,r,n)}function es(i,t=1){const e=(1-Math.abs(2*i.l-1))*i.s,s=e*(1-Math.abs(i.h/60%2-1)),o=i.l-e/2;let n=0,r=0,a=0;return i.h<60?(n=e,r=s,a=0):i.h<120?(n=s,r=e,a=0):i.h<180?(n=0,r=e,a=s):i.h<240?(n=0,r=s,a=e):i.h<300?(n=s,r=0,a=e):i.h<360&&(n=e,r=0,a=s),new O(n+o,r+o,a+o,t)}function Ao(i){const t=Math.max(i.r,i.g,i.b),e=Math.min(i.r,i.g,i.b),s=t-e;let o=0;s!==0&&(t===i.r?o=60*((i.g-i.b)/s%6):t===i.g?o=60*((i.b-i.r)/s+2):o=60*((i.r-i.g)/s+4)),o<0&&(o+=360);let n=0;return t!==0&&(n=s/t),new Fe(o,n,t)}function va(i,t=1){const e=i.s*i.v,s=e*(1-Math.abs(i.h/60%2-1)),o=i.v-e;let n=0,r=0,a=0;return i.h<60?(n=e,r=s,a=0):i.h<120?(n=s,r=e,a=0):i.h<180?(n=0,r=e,a=s):i.h<240?(n=0,r=s,a=e):i.h<300?(n=s,r=0,a=e):i.h<360&&(n=e,r=0,a=s),new O(n+o,r+o,a+o,t)}function ya(i){let t=0,e=0;return i.h!==0&&(t=Math.cos(Vo(i.h))*i.c,e=Math.sin(Vo(i.h))*i.c),new _(i.l,t,e)}function wa(i){let t=0;(Math.abs(i.b)>.001||Math.abs(i.a)>.001)&&(t=ma(Math.atan2(i.b,i.a))),t<0&&(t+=360);const e=Math.sqrt(i.a*i.a+i.b*i.b);return new he(i.l,e,t)}function xa(i){const t=(i.l+16)/116,e=t+i.a/500,s=t-i.b/200,o=Math.pow(e,3),n=Math.pow(t,3),r=Math.pow(s,3);let a=0;o>_.epsilon?a=o:a=(116*e-16)/_.kappa;let l=0;i.l>_.epsilon*_.kappa?l=n:l=i.l/_.kappa;let h=0;return r>_.epsilon?h=r:h=(116*s-16)/_.kappa,a=ct.whitePoint.x*a,l=ct.whitePoint.y*l,h=ct.whitePoint.z*h,new ct(a,l,h)}function Ca(i){function t(l){return l>_.epsilon?Math.pow(l,1/3):(_.kappa*l+16)/116}const e=t(i.x/ct.whitePoint.x),s=t(i.y/ct.whitePoint.y),o=t(i.z/ct.whitePoint.z),n=116*s-16,r=500*(e-s),a=200*(s-o);return new _(n,r,a)}function is(i){function t(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}const e=t(i.r),s=t(i.g),o=t(i.b),n=e*.4124564+s*.3575761+o*.1804375,r=e*.2126729+s*.7151522+o*.072175,a=e*.0193339+s*.119192+o*.9503041;return new ct(n,r,a)}function zo(i,t=1){function e(r){return r<=.0031308?r*12.92:1.055*Math.pow(r,1/2.4)-.055}const s=e(i.x*3.2404542-i.y*1.5371385-i.z*.4985314),o=e(i.x*-.969266+i.y*1.8760108+i.z*.041556),n=e(i.x*.0556434-i.y*.2040259+i.z*1.0572252);return new O(s,o,n,t)}function ss(i){return Ca(is(i))}function Bo(i,t=1){return zo(xa(i),t)}function os(i){return wa(ss(i))}function jo(i,t=1){return Bo(ya(i),t)}function Ho(i,t,e=18){const s=os(i);let o=s.c+t*e;return o<0&&(o=0),jo(new he(s.l,o,s.h))}function ns(i,t){return i*t}function Uo(i,t){return new O(ns(i.r,t.r),ns(i.g,t.g),ns(i.b,t.b),1)}function rs(i,t){return i<.5?Ot(2*t*i,0,1):Ot(1-2*(1-t)*(1-i),0,1)}function Wo(i,t){return new O(rs(i.r,t.r),rs(i.g,t.g),rs(i.b,t.b),1)}var qo;(function(i){i[i.Burn=0]="Burn",i[i.Color=1]="Color",i[i.Darken=2]="Darken",i[i.Dodge=3]="Dodge",i[i.Lighten=4]="Lighten",i[i.Multiply=5]="Multiply",i[i.Overlay=6]="Overlay",i[i.Screen=7]="Screen"})(qo||(qo={}));function Sa(i,t,e){return isNaN(i)||i<=0?t:i>=1?e:new O(J(i,t.r,e.r),J(i,t.g,e.g),J(i,t.b,e.b),J(i,t.a,e.a))}function ka(i,t,e){return isNaN(i)||i<=0?t:i>=1?e:new Qt(Ji(i,t.h,e.h),J(i,t.s,e.s),J(i,t.l,e.l))}function Ra(i,t,e){return isNaN(i)||i<=0?t:i>=1?e:new Fe(Ji(i,t.h,e.h),J(i,t.s,e.s),J(i,t.v,e.v))}function Ea(i,t,e){return isNaN(i)||i<=0?t:i>=1?e:new ct(J(i,t.x,e.x),J(i,t.y,e.y),J(i,t.z,e.z))}function Ta(i,t,e){return isNaN(i)||i<=0?t:i>=1?e:new _(J(i,t.l,e.l),J(i,t.a,e.a),J(i,t.b,e.b))}function $a(i,t,e){return isNaN(i)||i<=0?t:i>=1?e:new he(J(i,t.l,e.l),J(i,t.c,e.c),Ji(i,t.h,e.h))}var dt;(function(i){i[i.RGB=0]="RGB",i[i.HSL=1]="HSL",i[i.HSV=2]="HSV",i[i.XYZ=3]="XYZ",i[i.LAB=4]="LAB",i[i.LCH=5]="LCH"})(dt||(dt={}));function Re(i,t,e,s){if(isNaN(i)||i<=0)return e;if(i>=1)return s;switch(t){case dt.HSL:return es(ka(i,ke(e),ke(s)));case dt.HSV:return va(Ra(i,Ao(e),Ao(s)));case dt.XYZ:return zo(Ea(i,is(e),is(s)));case dt.LAB:return Bo(Ta(i,ss(e),ss(s)));case dt.LCH:return jo($a(i,os(e),os(s)));default:return Sa(i,e,s)}}class xt{constructor(t){if(t==null||t.length===0)throw new Error("The stops argument must be non-empty");this.stops=this.sortColorScaleStops(t)}static createBalancedColorScale(t){if(t==null||t.length===0)throw new Error("The colors argument must be non-empty");const e=new Array(t.length);for(let s=0;s<t.length;s++)s===0?e[s]={color:t[s],position:0}:s===t.length-1?e[s]={color:t[s],position:1}:e[s]={color:t[s],position:s*(1/(t.length-1))};return new xt(e)}getColor(t,e=dt.RGB){if(this.stops.length===1)return this.stops[0].color;if(t<=0)return this.stops[0].color;if(t>=1)return this.stops[this.stops.length-1].color;let s=0;for(let r=0;r<this.stops.length;r++)this.stops[r].position<=t&&(s=r);let o=s+1;o>=this.stops.length&&(o=this.stops.length-1);const n=(t-this.stops[s].position)*(1/(this.stops[o].position-this.stops[s].position));return Re(n,e,this.stops[s].color,this.stops[o].color)}trim(t,e,s=dt.RGB){if(t<0||e>1||e<t)throw new Error("Invalid bounds");if(t===e)return new xt([{color:this.getColor(t,s),position:0}]);const o=[];for(let a=0;a<this.stops.length;a++)this.stops[a].position>=t&&this.stops[a].position<=e&&o.push(this.stops[a]);if(o.length===0)return new xt([{color:this.getColor(t),position:t},{color:this.getColor(e),position:e}]);o[0].position!==t&&o.unshift({color:this.getColor(t),position:t}),o[o.length-1].position!==e&&o.push({color:this.getColor(e),position:e});const n=e-t,r=new Array(o.length);for(let a=0;a<o.length;a++)r[a]={color:o[a].color,position:(o[a].position-t)/n};return new xt(r)}findNextColor(t,e,s=!1,o=dt.RGB,n=.005,r=32){isNaN(t)||t<=0?t=0:t>=1&&(t=1);const a=this.getColor(t,o),l=s?0:1,h=this.getColor(l,o);if(No(a,h)<=e)return l;let c=s?0:t,d=s?t:0,u=l,p=0;for(;p<=r;){u=Math.abs(d-c)/2+c;const b=this.getColor(u,o),w=No(a,b);if(Math.abs(w-e)<=n)return u;w>e?s?c=u:d=u:s?d=u:c=u,p++}return u}clone(){const t=new Array(this.stops.length);for(let e=0;e<t.length;e++)t[e]={color:this.stops[e].color,position:this.stops[e].position};return new xt(t)}sortColorScaleStops(t){return t.sort((e,s)=>{const o=e.position,n=s.position;return o<n?-1:o>n?1:0})}}const Ma=/^#((?:[0-9a-f]{6}|[0-9a-f]{3}))$/i;function te(i){const t=Ma.exec(i);if(t===null)return null;let e=t[1];if(e.length===3){const o=e.charAt(0),n=e.charAt(1),r=e.charAt(2);e=o.concat(o,n,n,r,r)}const s=parseInt(e,16);return isNaN(s)?null:new O(Qi((s&16711680)>>>16,0,255),Qi((s&65280)>>>8,0,255),Qi(s&255,0,255),1)}class Wt{constructor(t){this.config=Object.assign({},Wt.defaultPaletteConfig,t),this.palette=[],this.updatePaletteColors()}updatePaletteGenerationValues(t){let e=!1;for(const s in t)this.config[s]&&(this.config[s].equalValue?this.config[s].equalValue(t[s])||(this.config[s]=t[s],e=!0):t[s]!==this.config[s]&&(this.config[s]=t[s],e=!0));return e&&this.updatePaletteColors(),e}updatePaletteColors(){const t=this.generatePaletteColorScale();for(let e=0;e<this.config.steps;e++)this.palette[e]=t.getColor(e/(this.config.steps-1),this.config.interpolationMode)}generatePaletteColorScale(){const t=ke(this.config.baseColor),e=new xt([{position:0,color:this.config.scaleColorLight},{position:.5,color:this.config.baseColor},{position:1,color:this.config.scaleColorDark}]).trim(this.config.clipLight,1-this.config.clipDark),s=e.getColor(0),o=e.getColor(1);let n=s,r=o;if(t.s>=this.config.saturationAdjustmentCutoff&&(n=Ho(n,this.config.saturationLight),r=Ho(r,this.config.saturationDark)),this.config.multiplyLight!==0){const a=Uo(this.config.baseColor,n);n=Re(this.config.multiplyLight,this.config.interpolationMode,n,a)}if(this.config.multiplyDark!==0){const a=Uo(this.config.baseColor,r);r=Re(this.config.multiplyDark,this.config.interpolationMode,r,a)}if(this.config.overlayLight!==0){const a=Wo(this.config.baseColor,n);n=Re(this.config.overlayLight,this.config.interpolationMode,n,a)}if(this.config.overlayDark!==0){const a=Wo(this.config.baseColor,r);r=Re(this.config.overlayDark,this.config.interpolationMode,r,a)}return this.config.baseScalePosition?this.config.baseScalePosition<=0?new xt([{position:0,color:this.config.baseColor},{position:1,color:r.clamp()}]):this.config.baseScalePosition>=1?new xt([{position:0,color:n.clamp()},{position:1,color:this.config.baseColor}]):new xt([{position:0,color:n.clamp()},{position:this.config.baseScalePosition,color:this.config.baseColor},{position:1,color:r.clamp()}]):new xt([{position:0,color:n.clamp()},{position:.5,color:this.config.baseColor},{position:1,color:r.clamp()}])}}Wt.defaultPaletteConfig={baseColor:te("#808080"),steps:11,interpolationMode:dt.RGB,scaleColorLight:new O(1,1,1,1),scaleColorDark:new O(0,0,0,1),clipLight:.185,clipDark:.16,saturationAdjustmentCutoff:.05,saturationLight:.35,saturationDark:1.25,overlayLight:0,overlayDark:.25,multiplyLight:0,multiplyDark:0,baseScalePosition:.5},Wt.greyscalePaletteConfig={baseColor:te("#808080"),steps:11,interpolationMode:dt.RGB,scaleColorLight:new O(1,1,1,1),scaleColorDark:new O(0,0,0,1),clipLight:0,clipDark:0,saturationAdjustmentCutoff:0,saturationLight:0,saturationDark:0,overlayLight:0,overlayDark:0,multiplyLight:0,multiplyDark:0,baseScalePosition:.5},Wt.defaultPaletteConfig.scaleColorLight,Wt.defaultPaletteConfig.scaleColorDark;class vi{constructor(t){this.palette=[],this.config=Object.assign({},vi.defaultPaletteConfig,t),this.regenPalettes()}regenPalettes(){let t=this.config.steps;(isNaN(t)||t<3)&&(t=3);const e=.14,s=.06,o=new O(e,e,e,1),n=94,r=new Wt(Object.assign(Object.assign({},Wt.greyscalePaletteConfig),{baseColor:o,baseScalePosition:(1-e)*100/n,steps:t})).palette,a=Zi(this.config.baseColor),l=ke(this.config.baseColor).l,h=(a+l)/2,c=this.matchRelativeLuminanceIndex(h,r)/(t-1),d=this.matchRelativeLuminanceIndex(e,r)/(t-1),u=ke(this.config.baseColor),p=es(Qt.fromObject({h:u.h,s:u.s,l:e})),b=es(Qt.fromObject({h:u.h,s:u.s,l:s})),w=new Array(5);w[0]={position:0,color:new O(1,1,1,1)},w[1]={position:c,color:this.config.baseColor},w[2]={position:d,color:p},w[3]={position:.99,color:b},w[4]={position:1,color:new O(0,0,0,1)};const x=new xt(w);this.palette=new Array(t);for(let k=0;k<t;k++){const ot=x.getColor(k/(t-1),dt.RGB);this.palette[k]=ot}}matchRelativeLuminanceIndex(t,e){let s=Number.MAX_VALUE,o=0,n=0;const r=e.length;for(;n<r;n++){const a=Math.abs(Zi(e[n])-t);a<s&&(s=a,o=n)}return o}}vi.defaultPaletteConfig={baseColor:te("#808080"),steps:94};function Go(i,t){const e=i.relativeLuminance>t.relativeLuminance?i:t,s=i.relativeLuminance>t.relativeLuminance?t:i;return(e.relativeLuminance+.05)/(s.relativeLuminance+.05)}const Ht=Object.freeze({create(i,t,e){return new yi(i,t,e)},from(i){return new yi(i.r,i.g,i.b)}});function Ia(i){const t={r:0,g:0,b:0,toColorString:()=>"",contrast:()=>0,relativeLuminance:0};for(const e in t)if(typeof t[e]!=typeof i[e])return!1;return!0}class yi extends O{constructor(t,e,s){super(t,e,s,1),this.toColorString=this.toStringHexRGB,this.contrast=Go.bind(null,this),this.createCSS=this.toColorString,this.relativeLuminance=ts(this)}static fromObject(t){return new yi(t.r,t.g,t.b)}}function as(i,t,e=0,s=i.length-1){if(s===e)return i[e];const o=Math.floor((s-e)/2)+e;return t(i[o])?as(i,t,e,o):as(i,t,o+1,s)}const Da=(-.1+Math.sqrt(.21))/2;function Pa(i){return i.relativeLuminance<=Da}function Yt(i){return Pa(i)?-1:1}function La(i,t,e){return typeof i=="number"?Je.from(Ht.create(i,t,e)):Je.from(i)}function Fa(i){return Ia(i)?wi.from(i):wi.from(Ht.create(i.r,i.g,i.b))}const Je=Object.freeze({create:La,from:Fa});class wi{constructor(t,e){this.closestIndexCache=new Map,this.source=t,this.swatches=e,this.reversedSwatches=Object.freeze([...this.swatches].reverse()),this.lastIndex=this.swatches.length-1}colorContrast(t,e,s,o){s===void 0&&(s=this.closestIndexOf(t));let n=this.swatches;const r=this.lastIndex;let a=s;o===void 0&&(o=Yt(t));const l=h=>Go(t,h)>=e;return o===-1&&(n=this.reversedSwatches,a=r-a),as(n,l,a,r)}get(t){return this.swatches[t]||this.swatches[Ot(t,0,this.lastIndex)]}closestIndexOf(t){if(this.closestIndexCache.has(t.relativeLuminance))return this.closestIndexCache.get(t.relativeLuminance);let e=this.swatches.indexOf(t);if(e!==-1)return this.closestIndexCache.set(t.relativeLuminance,e),e;const s=this.swatches.reduce((o,n)=>Math.abs(n.relativeLuminance-t.relativeLuminance)<Math.abs(o.relativeLuminance-t.relativeLuminance)?n:o);return e=this.swatches.indexOf(s),this.closestIndexCache.set(t.relativeLuminance,e),e}static from(t){return new wi(t,Object.freeze(new vi({baseColor:O.fromObject(t)}).palette.map(e=>{const s=te(e.toStringHexRGB());return Ht.create(s.r,s.g,s.b)})))}}function Va(i,t,e,s,o,n,r,a,l){const h=i.source,c=t.closestIndexOf(e),d=Math.max(r,a,l),u=c>=d?-1:1,p=i.closestIndexOf(h),b=p+u*-1*s,w=b+u*o,x=b+u*n;return{rest:i.get(b),hover:i.get(p),active:i.get(w),focus:i.get(x)}}function Oa(i,t,e,s,o,n,r){const a=i.source,l=i.closestIndexOf(a),h=Yt(t),c=l+(h===1?Math.min(s,o):Math.max(h*s,h*o)),d=i.colorContrast(t,e,c,h),u=i.closestIndexOf(d),p=u+h*Math.abs(s-o),b=h===1?s<o:h*s>h*o;let w,x;return b?(w=u,x=p):(w=p,x=u),{rest:i.get(w),hover:i.get(x),active:i.get(w+h*n),focus:i.get(w+h*r)}}const Yo=Ht.create(1,1,1),Na=Ht.create(0,0,0),Aa=Ht.from(te("#808080")),za=Ht.from(te("#DA1A5F"));function Ba(i,t){return i.contrast(Yo)>=t?Yo:Na}function ja(i,t,e,s,o,n){const r=i.closestIndexOf(t),a=Math.max(e,s,o,n),l=r>=a?-1:1;return{rest:i.get(r+l*e),hover:i.get(r+l*s),active:i.get(r+l*o),focus:i.get(r+l*n)}}function Ha(i,t,e,s,o,n){const r=Yt(t),a=i.closestIndexOf(t);return{rest:i.get(a-r*e),hover:i.get(a-r*s),active:i.get(a-r*o),focus:i.get(a-r*n)}}function Ua(i,t,e){const s=i.closestIndexOf(t);return i.get(s-(s<e?e*-1:e))}function Wa(i,t,e,s,o,n,r,a,l,h){const c=Math.max(e,s,o,n,r,a,l,h),d=i.closestIndexOf(t),u=d>=c?-1:1;return{rest:i.get(d+u*e),hover:i.get(d+u*s),active:i.get(d+u*o),focus:i.get(d+u*n)}}function qa(i,t,e,s,o,n){const r=Yt(t),a=i.closestIndexOf(i.colorContrast(t,4.5)),l=a+r*Math.abs(e-s),h=r===1?e<s:r*e>r*s;let c,d;return h?(c=a,d=l):(c=l,d=a),{rest:i.get(c),hover:i.get(d),active:i.get(c+r*o),focus:i.get(c+r*n)}}function Ga(i,t){return i.colorContrast(t,3.5)}function Ya(i,t,e){return i.colorContrast(e,3.5,i.closestIndexOf(i.source),Yt(t)*-1)}function Xa(i,t){return i.colorContrast(t,14)}function _a(i,t){return i.colorContrast(t,4.5)}function Ze(i){return Ht.create(i,i,i)}const Ka={LightMode:1,DarkMode:.23};function Qa(i,t,e){return i.get(i.closestIndexOf(Ze(t))+e)}function Ja(i,t,e){const s=i.closestIndexOf(Ze(t))-e;return i.get(s-e)}function Za(i,t){return i.get(i.closestIndexOf(Ze(t)))}function ls(i,t,e,s,o,n){return Math.max(i.closestIndexOf(Ze(t))+e,s,o,n)}function tl(i,t,e,s,o,n){return i.get(ls(i,t,e,s,o,n))}function el(i,t,e,s,o,n){return i.get(ls(i,t,e,s,o,n)+e)}function il(i,t,e,s,o,n){return i.get(ls(i,t,e,s,o,n)+e*2)}function sl(i,t,e,s,o,n){const r=i.closestIndexOf(t),a=Yt(t),l=r+a*e,h=l+a*(s-e),c=l+a*(o-e),d=l+a*(n-e);return{rest:i.get(l),hover:i.get(h),active:i.get(c),focus:i.get(d)}}function ol(i,t,e){return i.get(i.closestIndexOf(t)+Yt(t)*e)}const{create:v}=Ge;function C(i){return Ge.create({name:i,cssCustomPropertyName:null})}const ti=v("body-font").withDefault('aktiv-grotesk, "Segoe UI", Arial, Helvetica, sans-serif'),Xo=v("base-height-multiplier").withDefault(10);v("base-horizontal-spacing-multiplier").withDefault(3);const ee=v("base-layer-luminance").withDefault(Ka.DarkMode),Xt=v("control-corner-radius").withDefault(4),hs=v("density").withDefault(0),U=v("design-unit").withDefault(4),cs=v("direction").withDefault(A.ltr),ei=v("disabled-opacity").withDefault(.3),Z=v("stroke-width").withDefault(1),kt=v("focus-stroke-width").withDefault(2),ds=v("type-ramp-base-font-size").withDefault("14px"),us=v("type-ramp-base-line-height").withDefault("20px");v("type-ramp-minus-1-font-size").withDefault("12px"),v("type-ramp-minus-1-line-height").withDefault("16px"),v("type-ramp-minus-2-font-size").withDefault("10px"),v("type-ramp-minus-2-line-height").withDefault("16px"),v("type-ramp-plus-1-font-size").withDefault("16px"),v("type-ramp-plus-1-line-height").withDefault("24px"),v("type-ramp-plus-2-font-size").withDefault("20px"),v("type-ramp-plus-2-line-height").withDefault("28px"),v("type-ramp-plus-3-font-size").withDefault("28px"),v("type-ramp-plus-3-line-height").withDefault("36px"),v("type-ramp-plus-4-font-size").withDefault("34px"),v("type-ramp-plus-4-line-height").withDefault("44px"),v("type-ramp-plus-5-font-size").withDefault("46px"),v("type-ramp-plus-5-line-height").withDefault("56px"),v("type-ramp-plus-6-font-size").withDefault("60px"),v("type-ramp-plus-6-line-height").withDefault("72px"),C("accent-fill-rest-delta").withDefault(0);const nl=C("accent-fill-hover-delta").withDefault(4),rl=C("accent-fill-active-delta").withDefault(-5),al=C("accent-fill-focus-delta").withDefault(0),ll=C("accent-foreground-rest-delta").withDefault(0),hl=C("accent-foreground-hover-delta").withDefault(6),cl=C("accent-foreground-active-delta").withDefault(-4),dl=C("accent-foreground-focus-delta").withDefault(0),ie=C("neutral-fill-rest-delta").withDefault(7),se=C("neutral-fill-hover-delta").withDefault(10),oe=C("neutral-fill-active-delta").withDefault(5),_o=C("neutral-fill-focus-delta").withDefault(0),ul=C("neutral-fill-input-rest-delta").withDefault(0),gl=C("neutral-fill-input-hover-delta").withDefault(0),pl=C("neutral-fill-input-active-delta").withDefault(0),fl=C("neutral-fill-input-focus-delta").withDefault(0),ml=C("neutral-fill-stealth-rest-delta").withDefault(0),bl=C("neutral-fill-stealth-hover-delta").withDefault(5),vl=C("neutral-fill-stealth-active-delta").withDefault(3),yl=C("neutral-fill-stealth-focus-delta").withDefault(0),wl=C("neutral-fill-strong-rest-delta").withDefault(0),xl=C("neutral-fill-strong-hover-delta").withDefault(8),Cl=C("neutral-fill-strong-active-delta").withDefault(-5),Sl=C("neutral-fill-strong-focus-delta").withDefault(0),ne=C("neutral-fill-layer-rest-delta").withDefault(3),kl=C("neutral-stroke-rest-delta").withDefault(25),Rl=C("neutral-stroke-hover-delta").withDefault(40),El=C("neutral-stroke-active-delta").withDefault(16),Tl=C("neutral-stroke-focus-delta").withDefault(25),$l=C("neutral-stroke-divider-rest-delta").withDefault(8),Ml=v("neutral-color").withDefault(Aa),G=C("neutral-palette").withDefault(i=>Je.from(Ml.getValueFor(i))),Il=v("accent-color").withDefault(za),gs=C("accent-palette").withDefault(i=>Je.from(Il.getValueFor(i))),Dl=C("neutral-layer-card-container-recipe").withDefault({evaluate:i=>Qa(G.getValueFor(i),ee.getValueFor(i),ne.getValueFor(i))});v("neutral-layer-card-container").withDefault(i=>Dl.getValueFor(i).evaluate(i));const Pl=C("neutral-layer-floating-recipe").withDefault({evaluate:i=>Ja(G.getValueFor(i),ee.getValueFor(i),ne.getValueFor(i))});v("neutral-layer-floating").withDefault(i=>Pl.getValueFor(i).evaluate(i));const Ll=C("neutral-layer-1-recipe").withDefault({evaluate:i=>Za(G.getValueFor(i),ee.getValueFor(i))}),Fl=v("neutral-layer-1").withDefault(i=>Ll.getValueFor(i).evaluate(i)),Vl=C("neutral-layer-2-recipe").withDefault({evaluate:i=>tl(G.getValueFor(i),ee.getValueFor(i),ne.getValueFor(i),ie.getValueFor(i),se.getValueFor(i),oe.getValueFor(i))});v("neutral-layer-2").withDefault(i=>Vl.getValueFor(i).evaluate(i));const Ol=C("neutral-layer-3-recipe").withDefault({evaluate:i=>el(G.getValueFor(i),ee.getValueFor(i),ne.getValueFor(i),ie.getValueFor(i),se.getValueFor(i),oe.getValueFor(i))});v("neutral-layer-3").withDefault(i=>Ol.getValueFor(i).evaluate(i));const Nl=C("neutral-layer-4-recipe").withDefault({evaluate:i=>il(G.getValueFor(i),ee.getValueFor(i),ne.getValueFor(i),ie.getValueFor(i),se.getValueFor(i),oe.getValueFor(i))});v("neutral-layer-4").withDefault(i=>Nl.getValueFor(i).evaluate(i));const Y=v("fill-color").withDefault(i=>Fl.getValueFor(i));var Ee;(function(i){i[i.normal=4.5]="normal",i[i.large=7]="large"})(Ee||(Ee={}));const ii=v({name:"accent-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(i,t)=>Va(gs.getValueFor(i),G.getValueFor(i),t||Y.getValueFor(i),nl.getValueFor(i),rl.getValueFor(i),al.getValueFor(i),ie.getValueFor(i),se.getValueFor(i),oe.getValueFor(i))}),Nt=v("accent-fill-rest").withDefault(i=>ii.getValueFor(i).evaluate(i).rest),re=v("accent-fill-hover").withDefault(i=>ii.getValueFor(i).evaluate(i).hover),ae=v("accent-fill-active").withDefault(i=>ii.getValueFor(i).evaluate(i).active),Ko=v("accent-fill-focus").withDefault(i=>ii.getValueFor(i).evaluate(i).focus),Qo=i=>(t,e)=>Ba(e||Nt.getValueFor(t),i),si=C("foreground-on-accent-recipe").withDefault({evaluate:(i,t)=>Qo(Ee.normal)(i,t)}),ps=v("foreground-on-accent-rest").withDefault(i=>si.getValueFor(i).evaluate(i,Nt.getValueFor(i))),fs=v("foreground-on-accent-hover").withDefault(i=>si.getValueFor(i).evaluate(i,re.getValueFor(i))),ms=v("foreground-on-accent-active").withDefault(i=>si.getValueFor(i).evaluate(i,ae.getValueFor(i)));v("foreground-on-accent-focus").withDefault(i=>si.getValueFor(i).evaluate(i,Ko.getValueFor(i)));const oi=C("foreground-on-accent-large-recipe").withDefault({evaluate:(i,t)=>Qo(Ee.large)(i,t)});v("foreground-on-accent-rest-large").withDefault(i=>oi.getValueFor(i).evaluate(i,Nt.getValueFor(i))),v("foreground-on-accent-hover-large").withDefault(i=>oi.getValueFor(i).evaluate(i,re.getValueFor(i))),v("foreground-on-accent-active-large").withDefault(i=>oi.getValueFor(i).evaluate(i,ae.getValueFor(i))),v("foreground-on-accent-focus-large").withDefault(i=>oi.getValueFor(i).evaluate(i,Ko.getValueFor(i)));const Al=i=>(t,e)=>Oa(gs.getValueFor(t),e||Y.getValueFor(t),i,ll.getValueFor(t),hl.getValueFor(t),cl.getValueFor(t),dl.getValueFor(t)),ni=v({name:"accent-foreground-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(i,t)=>Al(Ee.normal)(i,t)}),Te=v("accent-foreground-rest").withDefault(i=>ni.getValueFor(i).evaluate(i).rest),bs=v("accent-foreground-hover").withDefault(i=>ni.getValueFor(i).evaluate(i).hover),vs=v("accent-foreground-active").withDefault(i=>ni.getValueFor(i).evaluate(i).active);v("accent-foreground-focus").withDefault(i=>ni.getValueFor(i).evaluate(i).focus);const ri=v({name:"neutral-fill-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(i,t)=>ja(G.getValueFor(i),t||Y.getValueFor(i),ie.getValueFor(i),se.getValueFor(i),oe.getValueFor(i),_o.getValueFor(i))}),ys=v("neutral-fill-rest").withDefault(i=>ri.getValueFor(i).evaluate(i).rest),zl=v("neutral-fill-hover").withDefault(i=>ri.getValueFor(i).evaluate(i).hover),Bl=v("neutral-fill-active").withDefault(i=>ri.getValueFor(i).evaluate(i).active);v("neutral-fill-focus").withDefault(i=>ri.getValueFor(i).evaluate(i).focus);const ai=v({name:"neutral-fill-input-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(i,t)=>Ha(G.getValueFor(i),t||Y.getValueFor(i),ul.getValueFor(i),gl.getValueFor(i),pl.getValueFor(i),fl.getValueFor(i))}),jl=v("neutral-fill-input-rest").withDefault(i=>ai.getValueFor(i).evaluate(i).rest),Hl=v("neutral-fill-input-hover").withDefault(i=>ai.getValueFor(i).evaluate(i).hover),Ul=v("neutral-fill-input-active").withDefault(i=>ai.getValueFor(i).evaluate(i).active);v("neutral-fill-input-focus").withDefault(i=>ai.getValueFor(i).evaluate(i).focus);const li=v({name:"neutral-fill-stealth-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(i,t)=>Wa(G.getValueFor(i),t||Y.getValueFor(i),ml.getValueFor(i),bl.getValueFor(i),vl.getValueFor(i),yl.getValueFor(i),ie.getValueFor(i),se.getValueFor(i),oe.getValueFor(i),_o.getValueFor(i))}),Jo=v("neutral-fill-stealth-rest").withDefault(i=>li.getValueFor(i).evaluate(i).rest),Wl=v("neutral-fill-stealth-hover").withDefault(i=>li.getValueFor(i).evaluate(i).hover),ql=v("neutral-fill-stealth-active").withDefault(i=>li.getValueFor(i).evaluate(i).active);v("neutral-fill-stealth-focus").withDefault(i=>li.getValueFor(i).evaluate(i).focus);const hi=v({name:"neutral-fill-strong-recipe",cssCustomPropertyName:null}).withDefault({evaluate:(i,t)=>qa(G.getValueFor(i),t||Y.getValueFor(i),wl.getValueFor(i),xl.getValueFor(i),Cl.getValueFor(i),Sl.getValueFor(i))});v("neutral-fill-strong-rest").withDefault(i=>hi.getValueFor(i).evaluate(i).rest),v("neutral-fill-strong-hover").withDefault(i=>hi.getValueFor(i).evaluate(i).hover),v("neutral-fill-strong-active").withDefault(i=>hi.getValueFor(i).evaluate(i).active),v("neutral-fill-strong-focus").withDefault(i=>hi.getValueFor(i).evaluate(i).focus);const Gl=C("neutral-fill-layer-recipe").withDefault({evaluate:(i,t)=>Ua(G.getValueFor(i),t||Y.getValueFor(i),ne.getValueFor(i))});v("neutral-fill-layer-rest").withDefault(i=>Gl.getValueFor(i).evaluate(i));const Yl=C("focus-stroke-outer-recipe").withDefault({evaluate:i=>Ga(G.getValueFor(i),Y.getValueFor(i))}),bt=v("focus-stroke-outer").withDefault(i=>Yl.getValueFor(i).evaluate(i)),Xl=C("focus-stroke-inner-recipe").withDefault({evaluate:i=>Ya(gs.getValueFor(i),Y.getValueFor(i),bt.getValueFor(i))}),_l=v("focus-stroke-inner").withDefault(i=>Xl.getValueFor(i).evaluate(i)),Kl=C("neutral-foreground-hint-recipe").withDefault({evaluate:i=>_a(G.getValueFor(i),Y.getValueFor(i))});v("neutral-foreground-hint").withDefault(i=>Kl.getValueFor(i).evaluate(i));const Ql=C("neutral-foreground-recipe").withDefault({evaluate:i=>Xa(G.getValueFor(i),Y.getValueFor(i))}),At=v("neutral-foreground-rest").withDefault(i=>Ql.getValueFor(i).evaluate(i)),ci=v({name:"neutral-stroke-recipe",cssCustomPropertyName:null}).withDefault({evaluate:i=>sl(G.getValueFor(i),Y.getValueFor(i),kl.getValueFor(i),Rl.getValueFor(i),El.getValueFor(i),Tl.getValueFor(i))}),ws=v("neutral-stroke-rest").withDefault(i=>ci.getValueFor(i).evaluate(i).rest),Zo=v("neutral-stroke-hover").withDefault(i=>ci.getValueFor(i).evaluate(i).hover),Jl=v("neutral-stroke-active").withDefault(i=>ci.getValueFor(i).evaluate(i).active);v("neutral-stroke-focus").withDefault(i=>ci.getValueFor(i).evaluate(i).focus);const Zl=C("neutral-stroke-divider-recipe").withDefault({evaluate:(i,t)=>ol(G.getValueFor(i),t||Y.getValueFor(i),$l.getValueFor(i))});v("neutral-stroke-divider-rest").withDefault(i=>Zl.getValueFor(i).evaluate(i)),Ge.create({name:"height-number",cssCustomPropertyName:null}).withDefault(i=>(Xo.getValueFor(i)+hs.getValueFor(i))*U.getValueFor(i));const zt=Yn`(${Xo} + ${hs}) * ${U}`,th="0 0 calc((var(--elevation) * 0.225px) + 2px) rgba(0, 0, 0, calc(.11 * (2 - var(--background-luminance, 1))))",eh="0 calc(var(--elevation) * 0.4px) calc((var(--elevation) * 0.9px)) rgba(0, 0, 0, calc(.13 * (2 - var(--background-luminance, 1))))",ih=`box-shadow: ${th}, ${eh};`,sh=R`
    ${Se("inline-flex")} :host {
        font-family: ${ti};
        outline: none;
        font-size: ${ds};
        line-height: ${us};
        height: calc(${zt} * 1px);
        min-width: calc(${zt} * 1px);
        background-color: ${ys};
        color: ${At};
        border-radius: calc(${Xt} * 1px);
        fill: currentcolor;
        cursor: pointer;
    }

    .control {
        background: transparent;
        height: inherit;
        flex-grow: 1;
        box-sizing: border-box;
        display: inline-flex;
        justify-content: center;
        align-items: baseline;
        padding: 0 calc((10 + (${U} * 2 * ${hs})) * 1px);
        white-space: nowrap;
        outline: none;
        text-decoration: none;
        border: calc(${Z} * 1px) solid transparent;
        color: inherit;
        border-radius: inherit;
        fill: inherit;
        cursor: inherit;
        font-weight: inherit;
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
    }

    :host(:hover) {
        background-color: ${zl};
    }

    :host(:active) {
        background-color: ${Bl};
    }

    .control:${P} {
        border-color: ${bt};
        box-shadow: 0 0 0 calc((${kt} - ${Z}) * 1px) ${bt} inset;
    }

    .control::-moz-focus-inner {
        border: 0;
    }

    .start,
    .content,
    .end {
        align-self: center;
    }

    .start,
    .end {
        display: flex;
    }

    .control.icon-only {
        padding: 0;
        line-height: 0;
    }

    ::slotted(svg) {
        ${""} width: 16px;
        height: 16px;
        pointer-events: none;
    }

    .start {
        margin-inline-end: 11px;
    }

    .end {
        margin-inline-start: 11px;
    }
`.withBehaviors(it(R`
            :host .control {
              background-color: ${m.ButtonFace};
              border-color: ${m.ButtonText};
              color: ${m.ButtonText};
              fill: currentColor;
            }

            :host(:hover) .control {
              forced-color-adjust: none;
              background-color: ${m.Highlight};
              color: ${m.HighlightText};
            }

            .control:${P} {
              forced-color-adjust: none;
              background-color: ${m.Highlight};
              border-color: ${m.ButtonText};
              box-shadow: 0 0 0 calc((${kt} - ${Z}) * 1px) ${m.ButtonText} inset;
              color: ${m.HighlightText};
            }

            .control:hover,
            :host([appearance="outline"]) .control:hover {
              border-color: ${m.ButtonText};
            }

            :host([href]) .control {
                border-color: ${m.LinkText};
                color: ${m.LinkText};
            }

            :host([href]) .control:hover,
            :host([href]) .control:${P}{
              forced-color-adjust: none;
              background: ${m.ButtonFace};
              border-color: ${m.LinkText};
              box-shadow: 0 0 0 1px ${m.LinkText} inset;
              color: ${m.LinkText};
              fill: currentColor;
            }
        `)),oh=R`
    :host([appearance="accent"]) {
        background: ${Nt};
        color: ${ps};
    }

    :host([appearance="accent"]:hover) {
        background: ${re};
        color: ${fs};
    }

    :host([appearance="accent"]:active) .control:active {
        background: ${ae};
        color: ${ms};
    }

    :host([appearance="accent"]) .control:${P} {
        box-shadow: 0 0 0 calc((${kt} - ${Z}) * 1px) ${bt} inset,
            0 0 0 calc((${kt} + ${Z}) * 1px) ${_l} inset;
    }
`.withBehaviors(it(R`
            :host([appearance="accent"]) .control {
                forced-color-adjust: none;
                background: ${m.Highlight};
                color: ${m.HighlightText};
            }

            :host([appearance="accent"]) .control:hover,
            :host([appearance="accent"]:active) .control:active {
                background: ${m.HighlightText};
                border-color: ${m.Highlight};
                color: ${m.Highlight};
            }

            :host([appearance="accent"]) .control:${P} {
                border-color: ${m.Highlight};
                box-shadow: 0 0 0 calc(${kt} * 1px) ${m.HighlightText} inset;
            }

            :host([appearance="accent"][href]) .control{
                background: ${m.LinkText};
                color: ${m.HighlightText};
            }

            :host([appearance="accent"][href]) .control:hover {
                background: ${m.ButtonFace};
                border-color: ${m.LinkText};
                box-shadow: none;
                color: ${m.LinkText};
                fill: currentColor;
            }

            :host([appearance="accent"][href]) .control:${P} {
                border-color: ${m.LinkText};
                box-shadow: 0 0 0 calc(${kt} * 1px) ${m.HighlightText} inset;
            }
        `));R`
    :host([appearance="hypertext"]) {
        font-size: inherit;
        line-height: inherit;
        height: auto;
        min-width: 0;
        background: transparent;
    }

    :host([appearance="hypertext"]) .control {
        display: inline;
        padding: 0;
        border: none;
        box-shadow: none;
        border-radius: 0;
        line-height: 1;
    }

    :host a.control:not(:link) {
        background-color: transparent;
        cursor: default;
    }
    :host([appearance="hypertext"]) .control:link,
    :host([appearance="hypertext"]) .control:visited {
        background: transparent;
        color: ${Te};
        border-bottom: calc(${Z} * 1px) solid ${Te};
    }

    :host([appearance="hypertext"]:hover),
    :host([appearance="hypertext"]) .control:hover {
        background: transparent;
        border-bottom-color: ${bs};
    }

    :host([appearance="hypertext"]:active),
    :host([appearance="hypertext"]) .control:active {
        background: transparent;
        border-bottom-color: ${vs};
    }

    :host([appearance="hypertext"]) .control:${P} {
        border-bottom: calc(${kt} * 1px) solid ${bt};
        margin-bottom: calc(calc(${Z} - ${kt}) * 1px);
    }
`.withBehaviors(it(R`
            :host([appearance="hypertext"]:hover) {
                background-color: ${m.ButtonFace};
                color: ${m.ButtonText};
            }
            :host([appearance="hypertext"][href]) .control:hover,
            :host([appearance="hypertext"][href]) .control:active,
            :host([appearance="hypertext"][href]) .control:${P} {
                color: ${m.LinkText};
                border-bottom-color: ${m.LinkText};
                box-shadow: none;
            }
        `));const nh=R`
    :host([appearance="lightweight"]) {
        background: transparent;
        color: ${Te};
    }

    :host([appearance="lightweight"]) .control {
        padding: 0;
        height: initial;
        border: none;
        box-shadow: none;
        border-radius: 0;
    }

    :host([appearance="lightweight"]:hover) {
        background: transparent;
        color: ${bs};
    }

    :host([appearance="lightweight"]:active) {
        background: transparent;
        color: ${vs};
    }

    :host([appearance="lightweight"]) .content {
        position: relative;
    }

    :host([appearance="lightweight"]) .content::before {
        content: "";
        display: block;
        height: calc(${Z} * 1px);
        position: absolute;
        top: calc(1em + 4px);
        width: 100%;
    }

    :host([appearance="lightweight"]:hover) .content::before {
        background: ${bs};
    }

    :host([appearance="lightweight"]:active) .content::before {
        background: ${vs};
    }

    :host([appearance="lightweight"]) .control:${P} .content::before {
        background: ${At};
        height: calc(${kt} * 1px);
    }
`.withBehaviors(it(R`
            :host([appearance="lightweight"]) .control:hover,
            :host([appearance="lightweight"]) .control:${P} {
                forced-color-adjust: none;
                background: ${m.ButtonFace};
                color: ${m.Highlight};
            }
            :host([appearance="lightweight"]) .control:hover .content::before,
            :host([appearance="lightweight"]) .control:${P} .content::before {
                background: ${m.Highlight};
            }

            :host([appearance="lightweight"][href]) .control:hover,
            :host([appearance="lightweight"][href]) .control:${P} {
                background: ${m.ButtonFace};
                box-shadow: none;
                color: ${m.LinkText};
            }

            :host([appearance="lightweight"][href]) .control:hover .content::before,
            :host([appearance="lightweight"][href]) .control:${P} .content::before {
                background: ${m.LinkText};
            }
        `)),rh=R`
    :host([appearance="outline"]) {
        background: transparent;
        border-color: ${Nt};
    }

    :host([appearance="outline"]:hover) {
        border-color: ${re};
    }

    :host([appearance="outline"]:active) {
        border-color: ${ae};
    }

    :host([appearance="outline"]) .control {
        border-color: inherit;
    }

    :host([appearance="outline"]) .control:${P} {
        box-shadow: 0 0 0 calc((${kt} - ${Z}) * 1px) ${bt} inset;
        border-color: ${bt};
    }
`.withBehaviors(it(R`
            :host([appearance="outline"]) .control {
                border-color: ${m.ButtonText};
            }
            :host([appearance="outline"]) .control:${P} {
              forced-color-adjust: none;
              background-color: ${m.Highlight};
              border-color: ${m.ButtonText};
              box-shadow: 0 0 0 calc((${kt} - ${Z}) * 1px) ${m.ButtonText} inset;
              color: ${m.HighlightText};
              fill: currentColor;
            }
            :host([appearance="outline"][href]) .control {
                background: ${m.ButtonFace};
                border-color: ${m.LinkText};
                color: ${m.LinkText};
                fill: currentColor;
            }
            :host([appearance="outline"][href]) .control:hover,
            :host([appearance="outline"][href]) .control:${P} {
              forced-color-adjust: none;
              border-color: ${m.LinkText};
              box-shadow: 0 0 0 1px ${m.LinkText} inset;
            }
        `)),ah=R`
    :host([appearance="stealth"]) {
        background: ${Jo};
    }

    :host([appearance="stealth"]:hover) {
        background: ${Wl};
    }

    :host([appearance="stealth"]:active) {
        background: ${ql};
    }
`.withBehaviors(it(R`
            :host([appearance="stealth"]),
            :host([appearance="stealth"]) .control {
                forced-color-adjust: none;
                background: ${m.ButtonFace};
                border-color: transparent;
                color: ${m.ButtonText};
                fill: currentColor;
            }

            :host([appearance="stealth"]:hover) .control {
                background: ${m.Highlight};
                border-color: ${m.Highlight};
                color: ${m.HighlightText};
                fill: currentColor;
            }

            :host([appearance="stealth"]:${P}) .control {
                background: ${m.Highlight};
                box-shadow: 0 0 0 1px ${m.Highlight};
                color: ${m.HighlightText};
                fill: currentColor;
            }

            :host([appearance="stealth"][href]) .control {
                color: ${m.LinkText};
            }

            :host([appearance="stealth"][href]:hover) .control,
            :host([appearance="stealth"][href]:${P}) .control {
                background: ${m.LinkText};
                border-color: ${m.LinkText};
                color: ${m.HighlightText};
                fill: currentColor;
            }

            :host([appearance="stealth"][href]:${P}) .control {
                forced-color-adjust: none;
                box-shadow: 0 0 0 1px ${m.LinkText};
            }
        `));class lh{constructor(t,e){this.cache=new WeakMap,this.ltr=t,this.rtl=e}bind(t){this.attach(t)}unbind(t){const e=this.cache.get(t);e&&cs.unsubscribe(e)}attach(t){const e=this.cache.get(t)||new hh(this.ltr,this.rtl,t),s=cs.getValueFor(t);cs.subscribe(e),e.attach(s),this.cache.set(t,e)}}class hh{constructor(t,e,s){this.ltr=t,this.rtl=e,this.source=s,this.attached=null}handleChange({target:t,token:e}){this.attach(e.getValueFor(t))}attach(t){this.attached!==this[t]&&(this.attached!==null&&this.source.$fastController.removeStyles(this.attached),this.attached=this[t],this.attached!==null&&this.source.$fastController.addStyles(this.attached))}}function di(i,t){return new pa("appearance",i,t)}const ch=(i,t)=>R`
        :host([disabled]),
        :host([disabled]:hover),
        :host([disabled]:active) {
            opacity: ${ei};
            background-color: ${ys};
            cursor: ${Qe};
        }

        ${sh}
    `.withBehaviors(it(R`
                :host([disabled]),
                :host([disabled]) .control,
                :host([disabled]:hover),
                :host([disabled]:active) {
                    forced-color-adjust: none;
                    background-color: ${m.ButtonFace};
                    border-color: ${m.GrayText};
                    color: ${m.GrayText};
                    cursor: ${Qe};
                    opacity: 1;
                }
            `),di("accent",R`
                :host([appearance="accent"][disabled]),
                :host([appearance="accent"][disabled]:hover),
                :host([appearance="accent"][disabled]:active) {
                    background: ${Nt};
                }

                ${oh}
            `.withBehaviors(it(R`
                        :host([appearance="accent"][disabled]) .control,
                        :host([appearance="accent"][disabled]) .control:hover {
                            background: ${m.ButtonFace};
                            border-color: ${m.GrayText};
                            color: ${m.GrayText};
                        }
                    `))),di("lightweight",R`
                :host([appearance="lightweight"][disabled]:hover),
                :host([appearance="lightweight"][disabled]:active) {
                    background-color: transparent;
                    color: ${Te};
                }

                :host([appearance="lightweight"][disabled]) .content::before,
                :host([appearance="lightweight"][disabled]:hover) .content::before,
                :host([appearance="lightweight"][disabled]:active) .content::before {
                    background: transparent;
                }

                ${nh}
            `.withBehaviors(it(R`
                        :host([appearance="lightweight"].disabled) .control {
                            forced-color-adjust: none;
                            color: ${m.GrayText};
                        }

                        :host([appearance="lightweight"].disabled)
                            .control:hover
                            .content::before {
                            background: none;
                        }
                    `))),di("outline",R`
                :host([appearance="outline"][disabled]),
                :host([appearance="outline"][disabled]:hover),
                :host([appearance="outline"][disabled]:active) {
                    background: transparent;
                    border-color: ${Nt};
                }

                ${rh}
            `.withBehaviors(it(R`
                        :host([appearance="outline"][disabled]) .control {
                            border-color: ${m.GrayText};
                        }
                    `))),di("stealth",R`
                :host([appearance="stealth"][disabled]),
                :host([appearance="stealth"][disabled]:hover),
                :host([appearance="stealth"][disabled]:active) {
                    background: ${Jo};
                }

                ${ah}
            `.withBehaviors(it(R`
                        :host([appearance="stealth"][disabled]) {
                            background: ${m.ButtonFace};
                        }

                        :host([appearance="stealth"][disabled]) .control {
                            background: ${m.ButtonFace};
                            border-color: transparent;
                            color: ${m.GrayText};
                        }
                    `))));class tn extends mt{constructor(){super(...arguments),this.appearance="neutral"}defaultSlottedContentChanged(t,e){const s=this.defaultSlottedContent.filter(o=>o.nodeType===Node.ELEMENT_NODE);s.length===1&&s[0]instanceof SVGElement?this.control.classList.add("icon-only"):this.control.classList.remove("icon-only")}}f([y],tn.prototype,"appearance",void 0);const dh=tn.compose({baseName:"button",baseClass:mt,template:Er,styles:ch,shadowOptions:{delegatesFocus:!0}}),uh=(i,t)=>R`
    :host([hidden]) {
        display: none;
    }

    :host {
        --elevation: 14;
        --dialog-height: 480px;
        --dialog-width: 640px;
        display: block;
    }

    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.3);
        touch-action: none;
    }

    .positioning-region {
        display: flex;
        justify-content: center;
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        overflow: auto;
    }

    .control {
        ${ih}
        margin-top: auto;
        margin-bottom: auto;
        width: var(--dialog-width);
        height: var(--dialog-height);
        background-color: ${Y};
        z-index: 1;
        border-radius: calc(${Xt} * 1px);
        border: calc(${Z} * 1px) solid transparent;
    }
`,gh=wt.compose({baseName:"dialog",template:Ur,styles:uh}),ph=(i,t)=>R`
    ${Se("flex")} :host {
        align-items: flex-start;
        margin: calc(${U} * 1px) 0;
        flex-direction: column;
    }
    .positioning-region {
        display: flex;
        flex-wrap: wrap;
    }
    :host([orientation="vertical"]) .positioning-region {
        flex-direction: column;
    }
    :host([orientation="horizontal"]) .positioning-region {
        flex-direction: row;
    }
`,fh=jt.compose({baseName:"radio-group",template:sa,styles:ph}),mh=(i,t)=>R`
        ${Se("inline-flex")} :host {
            --input-size: calc((${zt} / 2) + ${U});
            align-items: center;
            outline: none;
            margin: calc(${U} * 1px) 0;
            /* Chromium likes to select label text or the default slot when
                the radio is clicked. Maybe there is a better solution here? */
            user-select: none;
            position: relative;
            flex-direction: row;
            transition: all 0.2s ease-in-out;
        }

        .control {
            position: relative;
            width: calc((${zt} / 2 + ${U}) * 1px);
            height: calc((${zt} / 2 + ${U}) * 1px);
            box-sizing: border-box;
            border-radius: 999px;
            border: calc(${Z} * 1px) solid ${ws};
            background: ${jl};
            outline: none;
            cursor: pointer;
        }

        .label {
            font-family: ${ti};
            color: ${At};
            padding-inline-start: calc(${U} * 2px + 2px);
            margin-inline-end: calc(${U} * 2px + 2px);
            cursor: pointer;
            font-size: ${ds};
            line-height: ${us};
        }

        .label__hidden {
            display: none;
            visibility: hidden;
        }

        .control, .checked-indicator {
            flex-shrink: 0;
        }

        .checked-indicator {
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border-radius: 999px;
            display: inline-block;
            background: ${ps};
            fill: ${ps};
            opacity: 0;
            pointer-events: none;
        }

        :host(:not([disabled])) .control:hover{
            background: ${Hl};
            border-color: ${Zo};
        }

        :host(:not([disabled])) .control:active {
            background: ${Ul};
            border-color: ${Jl};
        }

        :host(:${P}) .control {
            box-shadow: 0 0 0 2px ${Y}, 0 0 0 4px ${bt};
        }

        :host([aria-checked="true"]) .control {
            background: ${Nt};
            border: calc(${Z} * 1px) solid ${Nt};
        }

        :host([aria-checked="true"]:not([disabled])) .control:hover {
            background: ${re};
            border: calc(${Z} * 1px) solid ${re};
        }

        :host([aria-checked="true"]:not([disabled])) .control:hover .checked-indicator {
            background: ${fs};
            fill: ${fs};
        }

        :host([aria-checked="true"]:not([disabled])) .control:active {
            background: ${ae};
            border: calc(${Z} * 1px) solid ${ae};
        }

        :host([aria-checked="true"]:not([disabled])) .control:active .checked-indicator {
            background: ${ms};
            fill: ${ms};
        }

        :host([aria-checked="true"]:${P}:not([disabled])) .control {
            box-shadow: 0 0 0 2px ${Y}, 0 0 0 4px ${bt};
        }

        :host([disabled]) .label,
        :host([readonly]) .label,
        :host([readonly]) .control,
        :host([disabled]) .control {
            cursor: ${Qe};
        }

        :host([aria-checked="true"]) .checked-indicator {
            opacity: 1;
        }

        :host([disabled]) {
            opacity: ${ei};
        }
    `.withBehaviors(it(R`
            .control,
            :host([aria-checked="true"]:not([disabled])) .control {
                forced-color-adjust: none;
                border-color: ${m.FieldText};
                background: ${m.Field};
            }
            :host(:not([disabled])) .control:hover {
                border-color: ${m.Highlight};
                background: ${m.Field};
            }
            :host([aria-checked="true"]:not([disabled])) .control:hover,
            :host([aria-checked="true"]:not([disabled])) .control:active {
                border-color: ${m.Highlight};
                background: ${m.Highlight};
            }
            :host([aria-checked="true"]) .checked-indicator {
                background: ${m.Highlight};
                fill: ${m.Highlight};
            }
            :host([aria-checked="true"]:not([disabled])) .control:hover .checked-indicator,
            :host([aria-checked="true"]:not([disabled])) .control:active .checked-indicator {
                background: ${m.HighlightText};
                fill: ${m.HighlightText};
            }
            :host(:${P}) .control {
                border-color: ${m.Highlight};
                box-shadow: 0 0 0 2px ${m.Field}, 0 0 0 4px ${m.FieldText};
            }
            :host([aria-checked="true"]:${P}:not([disabled])) .control {
                border-color: ${m.Highlight};
                box-shadow: 0 0 0 2px ${m.Field}, 0 0 0 4px ${m.FieldText};
            }
            :host([disabled]) {
                forced-color-adjust: none;
                opacity: 1;
            }
            :host([disabled]) .label {
                color: ${m.GrayText};
            }
            :host([disabled]) .control,
            :host([aria-checked="true"][disabled]) .control:hover, .control:active {
                background: ${m.Field};
                border-color: ${m.GrayText};
            }
            :host([disabled]) .checked-indicator,
            :host([aria-checked="true"][disabled]) .control:hover .checked-indicator {
                fill: ${m.GrayText};
                background: ${m.GrayText};
            }
        `)),bh=_e.compose({baseName:"radio",template:oa,styles:mh,checkedIndicator:`
        <div part="checked-indicator" class="checked-indicator"></div>
    `}),en=R`
    :host {
        align-self: start;
        grid-row: 2;
        margin-top: -2px;
        height: calc((${zt} / 2 + ${U}) * 1px);
        width: auto;
    }
    .container {
        grid-template-rows: auto auto;
        grid-template-columns: 0;
    }
    .label {
        margin: 2px 0;
    }
`,sn=R`
    :host {
        justify-self: start;
        grid-column: 2;
        margin-left: 2px;
        height: auto;
        width: calc((${zt} / 2 + ${U}) * 1px);
    }
    .container {
        grid-template-columns: auto auto;
        grid-template-rows: 0;
        min-width: calc(var(--thumb-size) * 1px);
        height: calc(var(--thumb-size) * 1px);
    }
    .mark {
        transform: rotate(90deg);
        align-self: center;
    }
    .label {
        margin-left: calc((${U} / 2) * 3px);
        align-self: center;
    }
`,vh=(i,t)=>R`
        ${Se("block")} :host {
            font-family: ${ti};
            color: ${At};
            fill: currentcolor;
        }
        .root {
            position: absolute;
            display: grid;
        }
        .container {
            display: grid;
            justify-self: center;
        }
        .label {
            justify-self: center;
            align-self: center;
            white-space: nowrap;
            max-width: 30px;
        }
        .mark {
            width: calc((${U} / 4) * 1px);
            height: calc(${zt} * 0.25 * 1px);
            background: ${ws};
            justify-self: center;
        }
        :host(.disabled) {
            opacity: ${ei};
        }
    `.withBehaviors(it(R`
                .mark {
                    forced-color-adjust: none;
                    background: ${m.FieldText};
                }
                :host(.disabled) {
                    forced-color-adjust: none;
                    opacity: 1;
                }
                :host(.disabled) .label {
                    color: ${m.GrayText};
                }
                :host(.disabled) .mark {
                    background: ${m.GrayText};
                }
            `));class yh extends Et{sliderOrientationChanged(){this.sliderOrientation===K.horizontal?(this.$fastController.addStyles(en),this.$fastController.removeStyles(sn)):(this.$fastController.addStyles(sn),this.$fastController.removeStyles(en))}}const wh=yh.compose({baseName:"slider-label",baseClass:Et,template:aa,styles:vh}),xh=R`
    .track-start {
        left: 0;
    }
`,Ch=R`
    .track-start {
        right: 0;
    }
`,Sh=(i,t)=>R`
        :host([hidden]) {
            display: none;
        }

        ${Se("inline-grid")} :host {
            --thumb-size: calc(${zt} * 0.5 - ${U});
            --thumb-translate: calc(var(--thumb-size) * -0.5 + var(--track-width) / 2);
            --track-overhang: calc((${U} / 2) * -1);
            --track-width: ${U};
            --fast-slider-height: calc(var(--thumb-size) * 10);
            align-items: center;
            width: 100%;
            margin: calc(${U} * 1px) 0;
            user-select: none;
            box-sizing: border-box;
            border-radius: calc(${Xt} * 1px);
            outline: none;
            cursor: pointer;
        }
        :host([orientation="horizontal"]) .positioning-region {
            position: relative;
            margin: 0 8px;
            display: grid;
            grid-template-rows: calc(var(--thumb-size) * 1px) 1fr;
        }
        :host([orientation="vertical"]) .positioning-region {
            position: relative;
            margin: 0 8px;
            display: grid;
            height: 100%;
            grid-template-columns: calc(var(--thumb-size) * 1px) 1fr;
        }

        :host(:${P}) .thumb-cursor {
            box-shadow: 0 0 0 2px ${Y}, 0 0 0 4px ${bt};
        }

        .thumb-container {
            position: absolute;
            height: calc(var(--thumb-size) * 1px);
            width: calc(var(--thumb-size) * 1px);
            transition: all 0.2s ease;
            color: ${At};
            fill: currentcolor;
        }
        .thumb-cursor {
            border: none;
            width: calc(var(--thumb-size) * 1px);
            height: calc(var(--thumb-size) * 1px);
            background: ${At};
            border-radius: calc(${Xt} * 1px);
        }
        .thumb-cursor:hover {
            background: ${At};
            border-color: ${Zo};
        }
        .thumb-cursor:active {
            background: ${At};
        }
        .track-start {
            background: ${Te};
            position: absolute;
            height: 100%;
            left: 0;
            border-radius: calc(${Xt} * 1px);
        }
        :host([orientation="horizontal"]) .thumb-container {
            transform: translateX(calc(var(--thumb-size) * 0.5px)) translateY(calc(var(--thumb-translate) * 1px));
        }
        :host([orientation="vertical"]) .thumb-container {
            transform: translateX(calc(var(--thumb-translate) * 1px)) translateY(calc(var(--thumb-size) * 0.5px));
        }
        :host([orientation="horizontal"]) {
            min-width: calc(var(--thumb-size) * 1px);
        }
        :host([orientation="horizontal"]) .track {
            right: calc(var(--track-overhang) * 1px);
            left: calc(var(--track-overhang) * 1px);
            align-self: start;
            height: calc(var(--track-width) * 1px);
        }
        :host([orientation="vertical"]) .track {
            top: calc(var(--track-overhang) * 1px);
            bottom: calc(var(--track-overhang) * 1px);
            width: calc(var(--track-width) * 1px);
            height: 100%;
        }
        .track {
            background: ${ws};
            position: absolute;
            border-radius: calc(${Xt} * 1px);
        }
        :host([orientation="vertical"]) {
            height: calc(var(--fast-slider-height) * 1px);
            min-height: calc(var(--thumb-size) * 1px);
            min-width: calc(${U} * 20px);
        }
        :host([orientation="vertical"]) .track-start {
            height: auto;
            width: 100%;
            top: 0;
        }
        :host([disabled]), :host([readonly]) {
            cursor: ${Qe};
        }
        :host([disabled]) {
            opacity: ${ei};
        }
    `.withBehaviors(new lh(xh,Ch),it(R`
                .thumb-cursor {
                    forced-color-adjust: none;
                    border-color: ${m.FieldText};
                    background: ${m.FieldText};
                }
                .thumb-cursor:hover,
                .thumb-cursor:active {
                    background: ${m.Highlight};
                }
                .track {
                    forced-color-adjust: none;
                    background: ${m.FieldText};
                }
                :host(:${P}) .thumb-cursor {
                    border-color: ${m.Highlight};
                }
                :host([disabled]) {
                    opacity: 1;
                }
                :host([disabled]) .track,
                :host([disabled]) .thumb-cursor {
                    forced-color-adjust: none;
                    background: ${m.GrayText};
                }

                :host(:${P}) .thumb-cursor {
                    background: ${m.Highlight};
                    border-color: ${m.Highlight};
                    box-shadow: 0 0 0 2px ${m.Field}, 0 0 0 4px ${m.FieldText};
                }
            `)),kh=Q.compose({baseName:"slider",template:la,styles:Sh,thumb:`
        <div class="thumb-cursor"></div>
    `}),Rh=(i,t)=>{const e=i.tagFor(M);return R`
            :host {
                contain: size;
                overflow: visible;
                height: 0;
                width: 0;
            }

            .tooltip {
                box-sizing: border-box;
                border-radius: calc(${Xt} * 1px);
                border: calc(${Z} * 1px) solid ${bt};
                box-shadow: 0 0 0 1px ${bt} inset;
                background: ${ys};
                color: ${At};
                padding: 4px;
                height: fit-content;
                width: fit-content;
                font-family: ${ti};
                font-size: ${ds};
                line-height: ${us};
                white-space: nowrap;
                /* TODO: a mechanism to manage z-index across components
                    https://github.com/microsoft/fast/issues/3813 */
                z-index: 10000;
            }

            ${e} {
                display: flex;
                justify-content: center;
                align-items: center;
                overflow: visible;
                flex-direction: row;
            }

            ${e}.right,
            ${e}.left {
                flex-direction: column;
            }

            ${e}.top .tooltip {
                margin-bottom: 4px;
            }

            ${e}.bottom .tooltip {
                margin-top: 4px;
            }

            ${e}.left .tooltip {
                margin-right: 4px;
            }

            ${e}.right .tooltip {
                margin-left: 4px;
            }

            ${e}.top.left .tooltip,
            ${e}.top.right .tooltip {
                margin-bottom: 0px;
            }

            ${e}.bottom.left .tooltip,
            ${e}.bottom.right .tooltip {
                margin-top: 0px;
            }

            ${e}.top.left .tooltip,
            ${e}.bottom.left .tooltip {
                margin-right: 0px;
            }

            ${e}.top.right .tooltip,
            ${e}.bottom.right .tooltip {
                margin-left: 0px;
            }

        `.withBehaviors(it(R`
                :host([disabled]) {
                    opacity: 1;
                }
            `))},Eh=B.compose({baseName:"tooltip",template:ua,styles:Rh});function Th(i){return Mo.getOrCreate(i).withPrefix("fast")}const xs=document.getElementById("raceTrackTitle"),Cs=document.getElementById("graphTitle"),$h=document.getElementById("infoDialogCloseButton"),on=document.getElementById("raceTrack"),nn=document.getElementById("graphCountry"),rn=document.getElementById("raceTrackDialog"),an=document.getElementById("graphDialog"),Ss=document.getElementById("infoDialog");function ln(i){xs.className="enabled",Cs.className="disabled",on.style.display="block",nn.style.display="none",rn.style.display="block",an.style.display="none",un("raceTrack"),i&&Ss.show()}function hn(i){xs.className="disabled",Cs.className="enabled",on.style.display="none",nn.style.display="block",rn.style.display="none",an.style.display="block",un("graph"),i&&Ss.show()}function Mh(){Ss.hide()}xs.addEventListener("click",()=>ln(!0)),Cs.addEventListener("click",()=>hn(!0)),$h.addEventListener("click",Mh);const cn=new Map;function dn(i,t,e){cn.set(i,{startFunc:t,stopFunc:e})}function un(i){const t=cn.get(i);t&&t.startFunc()}var ut=(i=>(i[i.radius=0]="radius",i[i.color=1]="color",i[i.gray=2]="gray",i[i.red=3]="red",i[i.dot=4]="dot",i))(ut||{}),L=(i=>(i[i.manufacturingShare=0]="manufacturingShare",i[i.income=1]="income",i[i.priceIndex=2]="priceIndex",i[i.nominalWage=3]="nominalWage",i[i.realWage=4]="realWage",i))(L||{});const $e=i=>i.target.value,Me=i=>{switch(i){case"radius":return ut.radius;case"color":return ut.color;case"gray":return ut.gray;case"red":return ut.red;case"dot":return ut.dot;default:return}};function Ie(i,t){for(const e of[L.manufacturingShare,L.income,L.priceIndex,L.nominalWage,L.realWage])if(i.get(e)==t)return e}class Ih{constructor(){g(this,"model");g(this,"manufacturingShareVisualizer");g(this,"incomeVisualizer");g(this,"priceIndexVisualizer");g(this,"nominalWageVisualizer");g(this,"realWageVisualizer");g(this,"incomeLabel");g(this,"priceIndexLabel");g(this,"nominalWageLabel");g(this,"realWageLabel");this.manufacturingShareVisualizer=document.getElementById("mshareVisualizer"),this.incomeVisualizer=document.getElementById("incomeVisualizer"),this.priceIndexVisualizer=document.getElementById("priceIndexVisualizer"),this.nominalWageVisualizer=document.getElementById("nominalWageVisualizer"),this.realWageVisualizer=document.getElementById("realWageVisualizer"),this.incomeLabel=document.getElementById("incomeLabel"),this.priceIndexLabel=document.getElementById("priceIndexLabel"),this.nominalWageLabel=document.getElementById("nominalWageLabel"),this.realWageLabel=document.getElementById("realWageLabel"),this.manufacturingShareVisualizer.value="radius",this.incomeVisualizer.value="gray",this.priceIndexVisualizer.value="",this.nominalWageVisualizer.value="",this.realWageVisualizer.value="",this.manufacturingShareVisualizer.addEventListener("change",t=>{const e=$e(t);this.changeManufacturingShareVisualizer(e)}),this.incomeVisualizer.addEventListener("change",t=>{const e=$e(t);this.changeIncomeVisualizer(e)}),this.priceIndexVisualizer.addEventListener("change",t=>{const e=$e(t);this.changePriceIndexVisualizer(e)}),this.nominalWageVisualizer.addEventListener("change",t=>{const e=$e(t);this.changeNominalWageVisualizer(e)}),this.realWageVisualizer.addEventListener("change",t=>{const e=$e(t);this.changeRealWageVisualizer(e)})}updateTextDecoration(t,e){e!==L.manufacturingShare&&(this.manufacturingShareVisualizer.style.textDecoration=this.incomeVisualizer.value==t?"line-through":""),e!==L.income&&(this.incomeVisualizer.style.textDecoration=this.incomeVisualizer.value==t?"line-through":""),e!==L.priceIndex&&(this.priceIndexLabel.style.textDecoration=this.priceIndexVisualizer.value==t?"line-through":""),e!==L.nominalWage&&(this.nominalWageLabel.style.textDecoration=this.nominalWageVisualizer.value==t?"line-through":""),e!==L.realWage&&(this.realWageLabel.style.textDecoration=this.realWageVisualizer.value==t?"line-through":"")}changeManufacturingShareVisualizer(t){const e=Me(t);this.model.bindings.set(L.manufacturingShare,e),this.updateTextDecoration(t,L.manufacturingShare)}changeIncomeVisualizer(t){const e=Me(t);this.model.bindings.set(L.income,e),this.updateTextDecoration(t,L.income)}changePriceIndexVisualizer(t){const e=Me(t);this.model.bindings.set(L.priceIndex,e),this.updateTextDecoration(t,L.priceIndex)}changeNominalWageVisualizer(t){const e=Me(t);this.model.bindings.set(L.nominalWage,e),this.updateTextDecoration(t,L.nominalWage)}changeRealWageVisualizer(t){const e=Me(t);this.model.bindings.set(L.realWage,e),this.updateTextDecoration(t,L.realWage)}setModel(t){this.model=t,t.bindings.set(L.manufacturingShare,ut.radius),t.bindings.set(L.income,ut.gray),t.bindings.set(L.priceIndex,void 0),t.bindings.set(L.nominalWage,void 0),t.bindings.set(L.realWage,void 0)}}var vt=(i=>(i[i.passThrough=0]="passThrough",i[i.multiply100=1]="multiply100",i[i.priceIndex=2]="priceIndex",i[i.ratioToMax=3]="ratioToMax",i[i.multiply100aroundOne=4]="multiply100aroundOne",i[i.multiply1000aroundOne=5]="multiply1000aroundOne",i))(vt||{});function Dh(i){return[{mapper:t=>t.manufacturingShare,type:vt.ratioToMax},{mapper:t=>t.income,type:vt.multiply100},{mapper:t=>t.priceIndex,type:vt.multiply100aroundOne},{mapper:t=>t.nominalWage,type:vt.multiply1000aroundOne},{mapper:t=>t.realWage,type:vt.multiply1000aroundOne}]}function gn(i,t,e){if(i.focusedRegionIds.length>0){t.save();const s=-80,o=-60,n=i.country.regions[i.focusedRegionIds[0]];if(!n)return;t.fillStyle="black",["Region #"+n.id," Share of manufacturing = "+n.manufacturingShare.toFixed(4)," Share of agriculture = "+n.agricultureShare.toFixed(4)," Income = "+n.income.toFixed(4)," Price index = "+n.priceIndex.toFixed(4)," Nominal wage = "+n.nominalWage.toFixed(4)," Real wage = "+n.realWage.toFixed(4)].forEach((r,a)=>{const l=new DOMPoint(e.x+s,e.y+o+a*15);t.fillText(r,l.x,l.y)}),t.restore()}}var $=(i=>(i.SELECTED="selected",i.FOCUSED="focused",i))($||{});class Ph{constructor(){g(this,"canvas");g(this,"model");g(this,"diameter",0);g(this,"mappers");this.canvas=document.getElementById("raceTrackCanvas"),this.canvas.addEventListener("mousemove",t=>this.onMouseMove(t)),this.canvas.addEventListener("mouseenter",t=>this.onMouseMove(t)),this.canvas.addEventListener("mouseleave",t=>this.onMouseMove(t)),this.canvas.addEventListener("mouseover",t=>this.onMouseMove(t))}setModel(t){this.model=t,this.mappers=Dh()}onMouseMove(t){if(!this.canvas||!this.model)return;const e=this.canvas.getBoundingClientRect(),s=this.canvas.width/e.width,o=this.canvas.height/e.height,n=(t.clientX-e.left)*s,r=(t.clientY-e.top)*o,a=new DOMPoint((this.canvas.width-this.diameter)/2+this.diameter/2,(this.canvas.height-this.diameter)/2+this.diameter/2),l=n-a.x,h=r-a.y,c=Math.sqrt(l*l+h*h);if(c<this.diameter/2-30||this.diameter/2+30<c){this.model.notifyRegionSelect("raceTrackView",this.model.focusedRegionIds,$.FOCUSED,!1);return}const d=((u,p,b)=>{const w=Math.atan2(p,u),x=2*Math.PI/b,k=(w+2*Math.PI+x/2)%(2*Math.PI);return Math.floor(k/x)})(l,h,this.model.country.regions.length);this.model.notifyRegionSelect("raceTrackView",this.model.focusedRegionIds,$.FOCUSED,!1),this.model.notifyRegionSelect("raceTrackView",[d],$.FOCUSED,!0)}draw(){if(!this.model||!this.mappers)throw new Error;const t=14,e=.5,s=this.model.country.regions.length,o=this.canvas.getContext("2d");if(!o)return;o.clearRect(0,0,this.canvas.width,this.canvas.height);const n=Math.min(this.canvas.width,this.canvas.height)-80;this.diameter=n;const r=n/2,a=new DOMPoint((this.canvas.width-n)/2+r,(this.canvas.height-n)/2+r),l=this.mappers.map(w=>this.model.country.regions.map(w.mapper).reduce((x,k)=>k>x?k:x,0)),h=(w,x,k,ot)=>{const tt=w.mapper(k);switch(x){case vt.passThrough:return tt;case vt.multiply100:return tt*100;case vt.priceIndex:return Math.max(0,tt-1);case vt.ratioToMax:return tt/ot;case vt.multiply1000aroundOne:return(tt-1)*1e3;case vt.multiply100aroundOne:return(tt-1)*100;default:return 0}},c=this.model.country.regions.map(w=>this.mappers.map((x,k)=>h(x,x.type,w,l[k]))),d=2*Math.PI/s;this.drawBaseCircle(o,a,r),this.drawVertexCitiesAndLabels(s,d,o,a,r,this.model,t,e,c);const u=Ie(this.model.bindings,ut.gray),p=Ie(this.model.bindings,ut.red),b=Ie(this.model.bindings,ut.dot);this.drawPolygon(o,s,d,r,a,u,c,"rgb(0,0,0,0.3)"),this.drawPolygon(o,s,d,r,a,p,c,"rgb(255,0,0,0.5)"),o.setLineDash([4,8]),this.drawPolygon(o,s,d,r,a,b,c,"rgb(255,0,0,0.5)"),o.setLineDash([]),gn(this.model,o,a)}drawCircle(t,e,s,o,n,r){t.strokeStyle="",r&&(t.beginPath(),t.fillStyle="rgb(255, 255, 0, 0.5)",t.arc(e,s,40,0,2*Math.PI),t.fill(),t.closePath()),t.beginPath(),t.fillStyle=`rgb(255, 0, 0, ${n})`,t.arc(e,s,Math.max(0,o),0,2*Math.PI),t.fill(),t.closePath()}drawVertexRegion(t,e,s,o,n,r,a,l,h,c){const d=e.x+s*Math.cos(o),u=e.y+s*Math.sin(o),p=n!=null?a*h[n]:a,b=r!=null?h[r]:l;(n!=null||r!=null)&&this.drawCircle(t,d,u,p,b,c)}drawRegionLabel(t,e,s,o,n){(o<21||o<101&&n%5==0||101<o&&n%50==0)&&(t.fillStyle="rgb(5, 5, 5, .5)",t.fillText(`${n}`,e,s+3))}drawVertexCitiesAndLabels(t,e,s,o,n,r,a,l,h){const c=Ie(r.bindings,ut.radius),d=Ie(r.bindings,ut.color);for(let u=0;u<t;u++){const p=u*e;this.drawVertexRegion(s,o,n,p,c,d,a,l,h[u],r.focusedRegionIds.includes(u));const b=30,w=o.x+(n+b)*Math.cos(p)-7,x=o.y+(n+b)*Math.sin(p);this.drawRegionLabel(s,w,x,t,u)}}drawBaseCircle(t,e,s){if(!this.model)return;const o=this.model.focusedRegionIds,n=2*Math.PI/this.model.country.regions.length;if(o!=null&&o.length==2&&0<=o[0]&&0<=o[1]){const r=o[0]<o[1]?[o[0],o[1]]:[o[1],o[0]];if(this.model.focusEventSource!="adjacencyMatrix"||this.model.focusEventSource=="adjacencyMatrix"&&r[1]-r[0]==1||r[1]-r[0]==this.model.country.regions.length-1)if(r[1]-r[0]<this.model.country.regions.length/2){t.strokeStyle="rgb(0, 0, 0, 0.1)",t.beginPath(),t.lineWidth=1,t.arc(e.x,e.y,s,0,n*r[0]),t.stroke(),t.beginPath(),t.strokeStyle="rgb(255, 255, 0)",t.lineWidth=15,t.arc(e.x,e.y,s,n*r[0],n*r[1]),t.stroke(),t.beginPath(),t.strokeStyle="rgb(0, 0, 0, 0.1)",t.lineWidth=1,t.arc(e.x,e.y,s,n*r[1],2*Math.PI),t.stroke();return}else{t.strokeStyle="rgb(255, 255, 0)",t.beginPath(),t.lineWidth=15,t.arc(e.x,e.y,s,0,n*r[0]),t.stroke(),t.beginPath(),t.strokeStyle="rgb(0, 0, 0, 0.1)",t.lineWidth=1,t.arc(e.x,e.y,s,n*r[0],n*r[1]),t.stroke(),t.beginPath(),t.strokeStyle="rgb(255, 255, 0)",t.lineWidth=15,t.arc(e.x,e.y,s,n*r[1],2*Math.PI),t.stroke(),t.lineWidth=1;return}}t.beginPath(),t.strokeStyle="rgb(0, 0, 0, 0.1)",t.arc(e.x,e.y,s,0,2*Math.PI),t.stroke()}drawPolygon(t,e,s,o,n,r,a,l){t.beginPath(),t.strokeStyle=l;for(let h=0;h<e;h++){const c=h*s;if(r!=null){const d=o+a[h][r],u=n.x+d*Math.cos(c),p=n.y+d*Math.sin(c);h==0&&t.moveTo(u,p),t.lineTo(u,p)}}t.closePath(),t.stroke()}}var Tt=(i=>(i[i.none=0]="none",i[i.focused=1]="focused",i[i.selected=2]="selected",i))(Tt||{});class Lh{constructor(t){g(this,"canvas");g(this,"ctx");g(this,"isDragging",!1);g(this,"mouseDownPoint",null);g(this,"path",new Set);this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.canvas instanceof HTMLElement&&(this.canvas.style.transformOrigin="0 0"),setInterval(()=>{this.draw()},100);const e=s=>{const o=s.deltaY<0?1.1:.9,n=this.ctx.getTransform().a*o;if(s.clientY>0&&s.clientY<this.canvas.height&&s.clientX>0&&s.clientX<this.canvas.width&&.1<n&&n<10){const r=this.getTransformedPoint(this.ctx,s.offsetX,s.offsetY);this.ctx.translate(r.x,r.y),this.ctx.scale(o,o),this.ctx.translate(-r.x,-r.y),this.draw(),s.preventDefault(),s.stopPropagation()}};window.addEventListener("wheel",s=>{e(s)},{passive:!1}),this.canvas.addEventListener("mousedown",this.onMouseDown.bind(this),{passive:!1}),this.canvas.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!1}),this.canvas.addEventListener("mouseup",this.onMouseUp.bind(this),{passive:!1}),this.canvas.addEventListener("mouseout",this.onMouseOut.bind(this),{passive:!1})}getTransformedPoint(t,e,s){const o=new DOMPoint(e,s);return this.ctx.getTransform().invertSelf().transformPoint(o)}onMouseDown(t){this.mouseDownPoint=new DOMPoint(t.offsetX,t.offsetY).matrixTransform(this.ctx.getTransform().invertSelf())}onMouseMove(t){}onMouseUp(t){}onMouseOut(t){}}class Fh extends Lh{constructor(e,s){super(e);g(this,"addNodeButton");g(this,"removeNodeButton");g(this,"addEdgeButton");g(this,"removeEdgeButton");g(this,"importButton");g(this,"exportButton");g(this,"model");this.model=s,this.addNodeButton=document.getElementById("addNodeButton"),this.removeNodeButton=document.getElementById("removeNodeButton"),this.addEdgeButton=document.getElementById("addEdgeButton"),this.removeEdgeButton=document.getElementById("removeEdgeButton"),this.importButton=document.getElementById("importButton"),this.exportButton=document.getElementById("exportButton"),document.getElementById("fitButton").addEventListener("click",()=>{this.fitToScreen()}),this.addNodeButton.addEventListener("click",()=>this.addNode()),this.removeNodeButton.addEventListener("click",()=>{this.doExtractNodes()}),this.addEdgeButton.addEventListener("click",()=>this.addEdge()),this.removeEdgeButton.addEventListener("click",()=>this.removeEdge()),this.updateGraphEditorButtonState()}setModel(e){this.model=e}updateGraphEditorButtonState(){var e;if((e=this.model.timer)!=null&&e.isStarted()){this.addNodeButton.disabled=!0,this.addEdgeButton.disabled=!0,this.removeNodeButton.disabled=!0,this.removeEdgeButton.disabled=!0,this.importButton.disabled=!0,this.exportButton.disabled=!0;return}if(this.importButton.disabled=!1,this.exportButton.disabled=!1,this.model.selectedRegionIds.length>0){this.addNodeButton.disabled=!1,this.removeNodeButton.disabled=!1;let s=0;for(let o=0;o<this.model.selectedRegionIds.length;o++){const n=this.model.selectedRegionIds[o];for(let r=o+1;r<this.model.selectedRegionIds.length;r++){const a=this.model.selectedRegionIds[r],l=this.model.country.matrices.adjacencyMatrix[n][a];0<l&&l<Number.POSITIVE_INFINITY&&s++}}this.addEdgeButton.disabled=!(2<=this.model.selectedRegionIds.length&&s<(1+this.model.selectedRegionIds.length-1)*(this.model.selectedRegionIds.length-1)/2),this.removeEdgeButton.disabled=s==0;return}if(this.model.selectedRegionIds.length==0||this.model.selectedRegionIds.length==0){this.addNodeButton.disabled=!0,this.addEdgeButton.disabled=!0,this.removeNodeButton.disabled=!0,this.removeEdgeButton.disabled=!0;return}this.addNodeButton.disabled=!1,this.addEdgeButton.disabled=!0,this.removeNodeButton.disabled=!0,this.removeEdgeButton.disabled=!0}onMouseOut(e){this.model&&this.model.notifyRegionSelect("graphView",[],$.FOCUSED,!1)}onMouseDown(e){if(!this.model)throw new Error;if(super.onMouseDown(e),!this.mouseDownPoint)throw new Error;const s=this.model.findClosestElementId(this.mouseDownPoint.x,this.mouseDownPoint.y);if(s!=null){const o=this.model.country.regions[s];this.isDragging=!0,this.model.selectedRegionIds.includes(o.id)||(this.model.selectedRegionIds=[...this.model.selectedRegionIds,o.id],this.model.notifyRegionSelect("graphView",this.model.selectedRegionIds,$.SELECTED,!0))}else this.isDragging=!1,this.model.notifyRegionSelect("graphView",this.model.selectedRegionIds,$.SELECTED,!1),this.model.selectedRegionIds=[];requestAnimationFrame(this.draw.bind(this))}onMouseMove(e){if(!this.model||!this.model.country||!this.ctx)return;super.onMouseMove(e);const s=this.getTransformedPoint(this.ctx,e.offsetX,e.offsetY);this.ctx.getTransform().a;function o(r,a){return(r.x-a.x)**2+(r.y-a.y)**2}if(this.isDragging&&this.model.selectedRegionIds.length>0){const r=this.model.nodes.reduce((h,c)=>o(h,s)<o(c,s)?h:c).id,a=s.x-this.model.nodes[r].x,l=s.y-this.model.nodes[r].y;this.model.selectedRegionIds.map(h=>this.model.nodes[h]).forEach(h=>{h.x+=a,h.y+=l}),requestAnimationFrame(this.draw.bind(this));return}if(this.mouseDownPoint){const r=new DOMMatrix;r.translateSelf(s.x-this.mouseDownPoint.x,s.y-this.mouseDownPoint.y),this.ctx.setTransform(this.ctx.getTransform().multiply(r)),requestAnimationFrame(this.draw.bind(this));return}const n=this.model.findClosestElementId(s.x,s.y);n!=null?(this.canvas.style.cursor="pointer",this.model.notifyRegionSelect("graphView",[n],$.FOCUSED,!0)):(this.canvas.style.cursor="default",this.model.notifyRegionSelect("graphView",this.model.focusedRegionIds,$.FOCUSED,!1))}async onMouseUp(e){!this.model||!this.ctx||(this.mouseDownPoint=null,this.onMouseMove(e),this.model.selectedRegionIds.length>0&&this.model.notifyGraphUpdate(),this.isDragging=!1,this.updateGraphEditorButtonState())}getRadius(e,s){switch(s){case Tt.none:return e;case Tt.focused:return e*3;case Tt.selected:return e+2;default:return e}}drawNode(e,s,o,n){e.beginPath(),e.fillStyle="white",e.fill(),e.stroke();const r=this.getRadius(o,n);if(!(r<0)){switch(e.beginPath(),n){case Tt.none:e.fillStyle="rgb(128, 0, 0, 0.2)",e.arc(s.x,s.y,r,0,Math.PI*2),s.radius=r;break;case Tt.focused:e.fillStyle="rgb(255, 0, 0, 0.2)",e.arc(s.x,s.y,r,0,Math.PI*2),e.fillStyle="rgb(255, 255, 0, 0.2)",e.arc(s.x,s.y,r,0,Math.PI*2),s.radius=o;break;case Tt.selected:e.strokeStyle="rgb(255, 220, 0, 0.8)",e.fillStyle="",e.arc(s.x,s.y,r+5,0,Math.PI*2),e.stroke(),e.closePath(),e.beginPath(),e.fillStyle="rgb(255, 220, 0, 0.4)",e.arc(s.x,s.y,r,0,Math.PI*2),s.radius=r;break}e.fill(),e.closePath(),e.fillStyle="rgb(20,20,20,0.6)",e.fillText(s.id.toString(),s.x-3.5,s.y+3.5)}}drawShortestPathEdges(e,s){if(!this.model)return;this.ctx.beginPath(),this.ctx.strokeStyle="rgb(255,0,0,0.5)",this.ctx.lineWidth=5;const o=this.model.nodes[e];for(this.ctx.moveTo(o.x,o.y),this.path.clear();e!=s;){const n=this.model.country.matrices.predecessorMatrix[e][s];this.path.add(e<n?`${e}:${n}`:`${n}:${e}`);const r=this.model.nodes[n];this.ctx.lineTo(r.x,r.y),e=n}this.ctx.stroke()}draw(){if(this.model){if(this.ctx.save(),this.ctx.resetTransform(),this.ctx.fillStyle="#fafafa",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.restore(),this.model.focusedRegionIds.length>0){const e=this.model.focusedRegionIds[0],s=this.model.focusedRegionIds[1],o=this.model.country.matrices.adjacencyMatrix[e]&&this.model.country.matrices.adjacencyMatrix[e][s],n=this.model.country.matrices.distanceMatrix[e]&&this.model.country.matrices.distanceMatrix[e][s];o==Number.POSITIVE_INFINITY&&0<n&&n<Number.POSITIVE_INFINITY?this.drawShortestPathEdges.call(this,e,s):this.path.clear()}for(let e=0;e<this.model.nodes.length;e++){const s=this.model.nodes[e];for(let o=e+1;o<this.model.nodes.length;o++){const n=this.model.country.matrices.adjacencyMatrix[e]&&this.model.country.matrices.adjacencyMatrix[e][o];if(0<n&&n<Number.POSITIVE_INFINITY){const r=this.model.nodes[o];this.drawEdge(e,o,s,r,n)}}}this.ctx.strokeStyle="#000";for(let e of this.model.country.regions){const s=this.model.country.regions[e.id];if(!s)continue;const o=1+s.manufacturingShare*3*10,n=this.model.nodes[e.id];n&&this.drawNode(this.ctx,n,o,Tt.none)}for(let e of this.model.selectedRegionIds){const s=this.model.country.regions[e];if(!s)continue;const o=(1+s.manufacturingShare)*10,n=this.model.nodes[e];n&&this.drawNode(this.ctx,n,o,Tt.selected)}if(this.model.focusedRegionIds.length>0){for(let s of this.model.focusedRegionIds){const o=this.model.nodes[s],n=this.model.country.regions[s];if(o&&n){const r=(1+n.manufacturingShare)*10;this.drawNode(this.ctx,o,r,Tt.focused),this.ctx.save(),this.ctx.resetTransform()}}const e=this.model.focusedRegionIds[this.model.focusedRegionIds.length-1];this.model.country.regions[e]&&this.model.nodes[e]&&gn(this.model,this.ctx,{x:this.canvas.width-120,y:this.canvas.height-80})}this.ctx.restore()}}computeTransformMatrix(e,s,o,n,r,a,l=.2,h=.2){const c=n-o,d=a-r,u=e*(1-l),p=s*(1-h),b=u/p,w=c/d,x=b>w?p/d:u/c,k=(e-c*x)*.5-o*x,ot=(s-d*x)*.5-r*x,tt=new DOMMatrix;return tt.translateSelf(k,ot).scaleSelf(x,x),tt}fitToScreen(){const e=this.getGraphBounds(),s=this.computeTransformMatrix(this.canvas.width,this.canvas.height,e.minX,e.maxX,e.minY,e.maxY);this.ctx.setTransform(s),requestAnimationFrame(this.draw.bind(this))}getGraphBounds(){if(!this.model)throw new Error;let e=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;for(let r of this.model.nodes)e=Math.min(e,r.x),s=Math.min(s,r.y),o=Math.max(o,r.x),n=Math.max(n,r.y);return{minX:e,minY:s,maxX:o,maxY:n}}async addNode(){if(!this.model||this.model.selectedRegionIds.length==0)throw new Error;const e=[...this.model.selectedRegionIds];console.log("  setNumRegions"),this.model.setNumRegions(this.model.nodes.length+1),console.log("  appendRegions"),console.log("  notifyNumRegionsChanged"),this.model.notifyNumRegionsChanged(),this.model.notifyAdjacencyMatrixChanged(),this.model.notifyRegionSelect("graph",e,$.SELECTED,!1),this.model.notifyRegionSelect("graph",[this.model.nodes.length-1],$.SELECTED,!0)}doExtractNodes(){this.extractNodes(this.model.selectedRegionIds)}extractNodes(e){if(!this.model)throw new Error;const s=[];for(let o=0;o<this.model.country.regions.length;o++)e.includes(o)||s.push(o);this.model.extractRegions(this.model.nodes.length,s)}drawEdge(e,s,o,n,r){var l;this.ctx.beginPath(),this.ctx.strokeStyle="#ccc",this.ctx.lineWidth=1,this.ctx.moveTo(o.x,o.y),this.ctx.lineTo(n.x,n.y),this.ctx.stroke(),(l=this.model)!=null&&l.isFocusedRegionIds(e,s)?(this.ctx.beginPath(),this.ctx.strokeStyle="rgb(255, 255, 0, 0.3)",this.ctx.lineWidth=10,this.ctx.moveTo(o.x,o.y),this.ctx.lineTo(n.x,n.y),this.ctx.stroke(),this.ctx.fillStyle="rgb(255,0,0,0.5)"):this.ctx.fillStyle="rgb(0,0,0,0.3)";const a=e<s?`${e}:${s}`:`${s}:${e}`;this.path.has(a)&&(this.ctx.fillStyle="rgb(255,0,255,0.5)"),this.ctx.lineWidth=1,!(this.isDragging&&(this.model.selectedRegionIds.length>=1&&(this.model.selectedRegionIds[0]==e||this.model.selectedRegionIds[0]==s)||this.model.selectedRegionIds.length>=2&&(this.model.selectedRegionIds[1]==e||this.model.selectedRegionIds[1]==s)))&&this.ctx.fillText(r.toFixed(1),(o.x+n.x)/2,(o.y+n.y)/2)}addEdge(){if(!this.model)throw new Error;this.model.addEdge(this.model.selectedRegionIds)}removeEdge(){if(!this.model)throw new Error;this.model.removeEdge(this.model.selectedRegionIds)}}const X=32,ui=16,gt=24;class Vh{constructor(){g(this,"canvas");g(this,"barChartSelector");g(this,"model");g(this,"config",{"Share of Manufacturing":{min:0,max:1,oy:0,ticks:[{min:0,max:1,step:.1},{min:0,max:.25,step:.05},{min:0,max:.1,step:.02}],bar:t=>t.manufacturingShare,toFixed:2},Income:{min:0,max:4,oy:0,ticks:[{min:0,max:4,step:.2},{min:0,max:.2,step:.05}],line:t=>t.income,toFixed:2},"Price Index":{min:0,max:4,oy:0,ticks:[{min:0,max:4,step:.2},{min:0,max:.2,step:.05}],line:t=>t.priceIndex,toFixed:2},"Nominal Wage":{min:.8,max:1.2,oy:1,ticks:[{min:.8,max:1.2,step:.05},{min:.95,max:1.05,step:.005}],line:t=>t.nominalWage,toFixed:3},"Real Wage":{min:.8,max:1.2,oy:1,ticks:[{min:.8,max:1.2,step:.05},{min:.9,max:1.1,step:.01},{min:.95,max:1.05,step:.005}],line:t=>t.realWage,toFixed:3}});this.canvas=document.getElementById("barChartCanvas"),this.barChartSelector=document.getElementById("barChartSelector"),this.barChartSelector.addEventListener("change",()=>{this.model&&(this.model.barChartType=this.barChartSelector.value,this.draw())});const t=e=>{if(!this.model)return null;const s=(this.canvas.width-X-ui)/this.model.country.regions.length;if(e.offsetX<X)return null;for(let o=0;o<this.model.country.regions.length;o++)if(e.offsetX<X+(o+1)*s)return o;return null};this.canvas.addEventListener("mousemove",e=>{if(!this.model)return;const s=t(e);(s==null||!this.model.focusedRegionIds.includes(s))&&this.model.notifyRegionSelect("barChatView",this.model.focusedRegionIds,$.FOCUSED,!1),s!=null?(this.model.notifyRegionSelect("barChatView",[s],$.FOCUSED,!0),this.canvas.style.cursor="pointer"):this.canvas.style.cursor="default"}),this.canvas.addEventListener("mousedown",e=>{if(!this.model)return;const s=t(e);s!=null&&(this.model.notifyRegionSelect("barChatView",this.model.selectedRegionIds,$.SELECTED,!1),this.model.notifyRegionSelect("barChatView",[s],$.SELECTED,!0))}),this.canvas.addEventListener("mouseout",()=>{this.model&&this.model.notifyRegionSelect("barChatView",this.model.focusedRegionIds,$.FOCUSED,!1)})}setModel(t){this.model=t}drawHorizontalLabels(t,e,s,o,n){if(t.fillStyle="#888",t.textAlign="left",o<=20)for(let r=0;r<o;r+=1){const a=s+r*e;t.fillText(r.toString(),a+1,n)}else for(let r=10;r<o;r+=10){const a=s+r*e;t.fillText(r.toString(),a+1,n)}}draw(){var h,c;const t=this.canvas.getContext("2d");if(!t||!this.model)return;t.clearRect(0,0,this.canvas.width,this.canvas.height),t.fillStyle="#f4f4f4",t.fillRect(X,0,this.canvas.width-X-ui,this.canvas.height-gt);const e=this.config[(h=this.model)==null?void 0:h.barChartType],s=(this.canvas.width-X-ui)/this.model.country.regions.length;t.textAlign="right";const o=this.canvas.width-X-ui,n=((c=this.model)==null?void 0:c.barChartScale)||1,r=this.canvas.height-gt,a=d=>l(d,e.max,e.min,r,e.oy,n),l=(d,u,p,b,w=0,x=1)=>{const k=(d-w)/(u-p);return b*x*k+w*b/2};for(let d=0;d<e.ticks.length;d++){const{min:u,max:p,step:b}=e.ticks[d];let w=0;for(let x=u;x<=p;x+=b){t.fillStyle="#ddd";const k=this.canvas.height-gt-a(x);0<=k&&k<=this.canvas.height-gt&&(t.fillRect(X,k,o,1),t.fillStyle="#888",t.fillText(x.toFixed(e.toFixed),X-2,k),w++)}if(w>1)break}this.model.country.regions.forEach((d,u)=>{this.model.focusedRegionIds.includes(u)&&(t.fillStyle="rgb(255,255,0,0.3)",t.fillRect(X+u*s,0,Math.max(s-1,1),this.canvas.height));const p=e.bar?e.bar(d):null;if(p!=null){const b=p<0?"#e88":"#d00";t.strokeStyle=t.fillStyle=b;const w=a(p);0<=w&&w<=this.canvas.height-gt?t.fillRect(X+u*s,this.canvas.height-gt-w,Math.max(s-1,1),w):this.canvas.height-gt<w&&t.fillRect(X+u*s,0,Math.max(s-1,1),this.canvas.height-gt),this.model.selectedRegionIds.includes(u)&&(t.lineWidth=2,t.strokeStyle="#ff0",0<=w&&w<=this.canvas.height-gt?t.strokeRect(X+u*s+2,this.canvas.height-gt-w+2,Math.max(s-1,1)-4,w-4):this.canvas.height-gt<w&&t.strokeRect(X+u*s,0,Math.max(s-1,1),this.canvas.height-gt),t.strokeStyle=b)}}),t.beginPath(),this.model.country.regions.forEach((d,u)=>{const p=e.line?e.line(d):null;if(p!=null){const b=this.canvas.height-gt-a(p);t.strokeStyle="#e88",t.lineWidth=2,u==0?t.moveTo(X+(u+.5)*s,b):t.lineTo(X+(u+.5)*s,b)}}),t.stroke(),this.drawHorizontalLabels(t,s,X,this.model.country.regions.length,this.canvas.height-12)}}class Oh{constructor(){g(this,"scaleSelector");g(this,"model");this.scaleSelector=document.getElementById("scale"),this.scaleSelector.addEventListener("change",t=>this.changeScale(t))}setModel(t){this.model=t}changeScale(t){if(!this.model)throw new Error;const e=t.target.value,s=parseFloat(e.split(" ")[1]);this.model.setBarChartScale(s)}}class Nh{constructor(){g(this,"numRegionsSlider");g(this,"piSlider");g(this,"transportCostSlider");g(this,"sigmaSlider");g(this,"numRegionsElem");g(this,"piElem");g(this,"transportCostElem");g(this,"sigmaElem");g(this,"model");this.numRegionsSlider=document.getElementById("numRegionsSlider"),this.piSlider=document.getElementById("piSlider"),this.transportCostSlider=document.getElementById("tcostSlider"),this.sigmaSlider=document.getElementById("sigmaSlider"),this.numRegionsElem=document.getElementById("numRegions"),this.piElem=document.getElementById("pi"),this.transportCostElem=document.getElementById("tcost"),this.sigmaElem=document.getElementById("sigma"),this.numRegionsSlider.addEventListener("change",async()=>{this.onNumRegionsChanged()}),this.piSlider.addEventListener("change",()=>this.onPiChanged()),this.transportCostSlider.addEventListener("change",()=>this.onTransportCostChanged()),this.sigmaSlider.addEventListener("change",()=>this.onSigmaChanged())}setModel(t){this.model=t,this.numRegionsSlider.valueAsNumber=t.country.numRegions,this.piSlider.valueAsNumber=t.country.pi,this.transportCostSlider.valueAsNumber=t.country.transportCost,this.sigmaSlider.valueAsNumber=t.country.sigma,this.numRegionsElem.innerText=this.numRegionsSlider.value,this.transportCostElem.innerText=this.transportCostSlider.value,this.sigmaElem.innerText=this.sigmaSlider.value,this.piElem.innerText=this.piSlider.value}onNumRegionsChanged(){var e;if(!this.model)throw new Error;const t=Math.floor(this.numRegionsSlider.valueAsNumber);(e=this.model)==null||e.setNumRegions(t),this.numRegionsElem.innerText=`${t}`}onPiChanged(){if(!this.model)throw new Error;this.piElem.innerText=this.piSlider.valueAsNumber.toPrecision(2),this.model.setPi(this.piSlider.valueAsNumber)}onTransportCostChanged(){if(!this.model)throw new Error;this.transportCostElem.innerText=this.transportCostSlider.valueAsNumber.toPrecision(2),this.model.setTransportCost(this.transportCostSlider.valueAsNumber)}onSigmaChanged(){if(!this.model)throw new Error;this.sigmaElem.innerText=this.sigmaSlider.valueAsNumber.toPrecision(3),this.model.setSigma(this.sigmaSlider.valueAsNumber)}}class Ah{constructor(t){g(this,"sliderSet");g(this,"caseSelector");g(this,"model");this.sliderSet=t,this.caseSelector=document.getElementById("caseSelector"),this.caseSelector.addEventListener("change",()=>this.onCaseChanged())}onCaseChanged(){if(this.model)switch(this.caseSelector.value){case"0":this.sliderSet.numRegionsSlider.value="12",this.sliderSet.piSlider.value="0.2",this.sliderSet.transportCostSlider.value="2",this.sliderSet.sigmaSlider.value="4";return;case"1":this.sliderSet.numRegionsSlider.value="12",this.sliderSet.piSlider.value="0.2",this.sliderSet.transportCostSlider.value="2",this.sliderSet.sigmaSlider.value="2";return;case"2":this.sliderSet.numRegionsSlider.value="12",this.sliderSet.piSlider.value="0.4",this.sliderSet.transportCostSlider.value="2",this.sliderSet.sigmaSlider.value="4";return;case"3":this.sliderSet.numRegionsSlider.value="12",this.sliderSet.piSlider.value="0.2",this.sliderSet.transportCostSlider.value="1",this.sliderSet.sigmaSlider.value="4";return}}setModel(t){this.model=t}}const Dt=class Dt{constructor(t){g(this,"type");this.type=t}};g(Dt,"tick",new Dt("tick")),g(Dt,"start",new Dt("start")),g(Dt,"stop",new Dt("stop")),g(Dt,"reset",new Dt("reset"));let ks=Dt;const yt=class yt{constructor(t=.5){g(this,"speed");g(this,"timeout");g(this,"timeCounter");g(this,"timeEventListeners");this.timeCounter=0,this.speed=t,this.timeout=null,this.timeEventListeners=new Array}static getLayoutTimer(){return yt.layoutTimer||(yt.layoutTimer=new yt(1)),yt.layoutTimer}static getSimulationTimer(){return yt.simulationTimer||(yt.simulationTimer=new yt(1)),yt.simulationTimer}isStarted(){return this.timeout!=null}changeSpeed(t){t!=this.speed&&(this.speed=t,this.timeout!=null&&this.start())}start(){this.timeout!=null&&clearInterval(this.timeout);const t=(e=>{const s=Math.log(1),o=Math.log(1e3),n=s+(1-e)*(o-s);return Math.exp(n)})(this.speed);this.timeout=setInterval(()=>this.tick(),t)}stop(){this.timeout!=null&&clearInterval(this.timeout),this.timeout=null}addTimeEventListener(t){this.timeEventListeners.push(t)}reset(){this.timeCounter=0}tick(){this.timeCounter++,this.timeEventListeners.forEach(t=>{t(ks.tick)})}};g(yt,"layoutTimer",null),g(yt,"simulationTimer",null);let $t=yt;class zh{constructor(){g(this,"model");g(this,"startButton");g(this,"stopButton");g(this,"resetButton");g(this,"counterElem");g(this,"speedSlider");this.startButton=document.getElementById("start"),this.stopButton=document.getElementById("stop"),this.resetButton=document.getElementById("reset"),this.counterElem=document.getElementById("counter"),this.speedSlider=document.getElementById("speedSlider"),this.startButton.addEventListener("click",()=>this.start()),this.stopButton.addEventListener("click",()=>this.stop()),this.resetButton.addEventListener("click",()=>this.reset()),this.speedSlider.addEventListener("change",()=>{$t.getSimulationTimer().changeSpeed(this.speedSlider.valueAsNumber)}),this.stopButton.disabled=!0,$t.getSimulationTimer().addTimeEventListener(t=>{var e,s;this.counterElem.innerText=((s=(e=this.model)==null?void 0:e.timer)==null?void 0:s.timeCounter.toLocaleString())||""})}setModel(t){this.model=t}start(){this.startButton.disabled=!0,this.stopButton.disabled=!1,this.stopButton.classList.add("started"),this.resetButton.classList.add("started"),this.model.start()}stop(){this.startButton.disabled=!1,this.stopButton.disabled=!0,this.startButton.classList.remove("started"),this.resetButton.classList.remove("started"),this.model.stop()}reset(){this.model.reset()}}class Rs{constructor(t){g(this,"id");g(this,"tableElement");g(this,"model");this.id=t,this.tableElement=document.getElementById(this.id)}setModel(t){this.model=t}decorateTable(t,e,s,o){o?this.tableElement.classList.add(t):this.tableElement.classList.remove(t);const n=this.tableElement.rows[e];if(n&&n.cells)for(let r=0;r<n.cells.length;r++)o?n.cells[r].classList.add(t):n.cells[r].classList.remove(t);for(let r=0;r<this.tableElement.rows.length;r++){const a=this.tableElement.rows[r];a.cells[s]&&(o?a.cells[s].classList.add(t):a.cells[s].classList.remove(t))}}adjustTableSize(t,e,s,o){if(!this.model)return;const n=Math.min(t,s),r=Math.min(e,o);for(;n<this.tableElement.rows.length-1;)this.tableElement.deleteRow(-1);if(0<this.tableElement.rows.length&&r+1<this.tableElement.rows[0].cells.length)for(let a=0;0<this.tableElement.rows.length&&this.tableElement.rows[a]&&a<this.tableElement.rows[a].cells.length-1||a<n;a++)for(let l=r;this.tableElement.rows[a]&&l<this.tableElement.rows[a].cells.length;l++)this.tableElement.rows[a].deleteCell(-1);for(let a=this.tableElement.rows.length;a<n+1;a++){const l=document.createElement("tr");this.tableElement.appendChild(l)}for(let a=0;a<n+1;a++)for(let l=this.tableElement.rows[a].cells.length;l<r+1;l++){const h=document.createElement(a==0||l==0?"th":"td");h.textContent=a==0?l==0?"":`${l-1}`:l==0?`${a-1}`:"",this.tableElement.rows[a].appendChild(h),a==0?(h.addEventListener("mousedown",()=>{var c,d,u;(d=this.model)==null||d.notifyRegionSelect(this.id,(c=this.model)==null?void 0:c.selectedRegionIds,$.SELECTED,!1),(u=this.model)==null||u.notifyRegionSelect(this.id,[l-1],$.SELECTED,!0)}),h.addEventListener("mouseover",()=>{var c;(c=this.model)==null||c.notifyRegionSelect(this.id,[l-1],$.FOCUSED,!0)}),h.addEventListener("mouseout",()=>{var c;(c=this.model)==null||c.notifyRegionSelect(this.id,[l-1],$.FOCUSED,!1)})):l==0?(h.addEventListener("mousedown",()=>{var c,d,u;(d=this.model)==null||d.notifyRegionSelect(this.id,(c=this.model)==null?void 0:c.selectedRegionIds,$.SELECTED,!1),(u=this.model)==null||u.notifyRegionSelect(this.id,[a-1],$.SELECTED,!0)}),h.addEventListener("mouseover",()=>{var c;(c=this.model)==null||c.notifyRegionSelect(this.id,[a-1],$.FOCUSED,!0)}),h.addEventListener("mouseout",()=>{var c;(c=this.model)==null||c.notifyRegionSelect(this.id,[a-1],$.FOCUSED,!1)})):(h.addEventListener("mousedown",()=>{var c,d,u;(d=this.model)==null||d.notifyRegionSelect(this.id,(c=this.model)==null?void 0:c.selectedRegionIds,$.SELECTED,!1),(u=this.model)==null||u.notifyRegionSelect(this.id,[a-1,l-1],$.SELECTED,!0)}),h.addEventListener("mouseover",()=>{var c;(c=this.model)==null||c.notifyRegionSelect(this.id,[a-1,l-1],$.FOCUSED,!0)}),h.addEventListener("mouseout",()=>{var c;(c=this.model)==null||c.notifyRegionSelect(this.id,[a-1,l-1],$.FOCUSED,!1)}))}if(e>=o)for(let a=1;a<this.tableElement.rows.length;a++){const l=this.tableElement.rows[a].cells,h=l.length;l[h-1].textContent="..."}if(t>=s){const a=this.tableElement.rows.length;for(let l=0;l<this.tableElement.rows[a-1].cells.length;l++)this.tableElement.rows[a-1].cells[l].textContent="..."}}setTableContent(t,e,s,o){let n=0;for(let r=0;r<t.length;r++)for(let a=0;a<t[r].length;a++)t[r][a]!=Number.POSITIVE_INFINITY&&(n=Math.max(n,t[r][a]));for(let r=0;r<e-1&&r<t.length&&r<this.tableElement.rows.length-1;r++)for(let a=0;a<s-1&&a<t[r].length&&a<this.tableElement.rows[r+1].cells.length-1;a++){const l=t[r][a],h=l!=Number.POSITIVE_INFINITY?l/n:"0",c=this.tableElement.rows[r+1].cells[a+1],d=o(t[r][a]);c.textContent=d,c.setAttribute("title",d),c.style.backgroundColor=`rgba(255, 0, 0, ${h})`}}}const Ut=21;class Bh{constructor(){g(this,"adjacencyMatrix");g(this,"distanceMatrix");g(this,"transportCostMatrix");g(this,"model");this.adjacencyMatrix=new Rs("adjacencyMatrix"),this.distanceMatrix=new Rs("distanceMatrix"),this.transportCostMatrix=new Rs("transportCostMatrix")}setModel(t){this.model=t,this.adjacencyMatrix.setModel(t),this.distanceMatrix.setModel(t),this.transportCostMatrix.setModel(t),this.update()}updateTableSize(t){this.adjacencyMatrix.adjustTableSize(t,t,Ut,Ut),this.distanceMatrix.adjustTableSize(t,t,Ut,Ut),this.transportCostMatrix.adjustTableSize(t,t,Ut,Ut)}async updateTableContent(){this.model&&[{table:this.adjacencyMatrix,matrix:this.model.country.matrices.adjacencyMatrix},{table:this.distanceMatrix,matrix:this.model.country.matrices.distanceMatrix},{table:this.transportCostMatrix,matrix:this.model.country.matrices.transportCostMatrix}].forEach(t=>{const{table:e,matrix:s}=t;e.setTableContent(s,Ut,Ut,o=>o==Number.POSITIVE_INFINITY?"Inf":o==null?void 0:o.toFixed(1))})}decorateTable(t,e,s,o,n){this.adjacencyMatrix.decorateTable(o,e,s,n),this.distanceMatrix.decorateTable(o,e,s,n),this.transportCostMatrix.decorateTable(o,e,s,n)}async update(){this.model&&(this.updateTableSize(this.model.country.regions.length),await this.updateTableContent())}}class jh{constructor(){g(this,"typeSelector");g(this,"model");this.typeSelector=document.getElementById("barChartSelector"),this.typeSelector.addEventListener("change",t=>this.changeScale(t))}setModel(t){this.model=t,this.typeSelector.value=this.model.barChartType||""}changeScale(t){if(!this.model)throw new Error;this.model.barChartType=t.target.value}}class Hh{constructor(){g(this,"barChartView");g(this,"visualizerTypeSelector");g(this,"barChartScaleSelector");g(this,"barChartTypeSelector");g(this,"sliderSet");g(this,"caseSelector");g(this,"commandButtonSet");g(this,"diagonalTableViewSet");this.barChartView=new Vh,this.visualizerTypeSelector=new Ih,this.barChartScaleSelector=new Oh,this.barChartTypeSelector=new jh,this.sliderSet=new Nh,this.caseSelector=new Ah(this.sliderSet),this.commandButtonSet=new zh,this.diagonalTableViewSet=new Bh}setModel(t){this.barChartView.setModel(t),this.visualizerTypeSelector.setModel(t),this.barChartScaleSelector.setModel(t),this.barChartTypeSelector.setModel(t),this.sliderSet.setModel(t),this.caseSelector.setModel(t),this.commandButtonSet.setModel(t),this.diagonalTableViewSet.setModel(t)}async update(){await this.diagonalTableViewSet.update(),this.barChartView.draw()}tick(){this.barChartView.draw()}}class Uh{constructor(t){g(this,"adjacencyMatrix");g(this,"predecessorMatrix");g(this,"distanceMatrix");g(this,"transportCostMatrix");this.adjacencyMatrix=this.create2DArray(t),this.predecessorMatrix=this.create2DArray(t),this.distanceMatrix=this.create2DArray(t),this.transportCostMatrix=this.create2DArray(t)}create2DArray(t,e){const s=new Array(t);for(let o=0;o<t;o++)if(s[o]=new Array(t),s[o].fill(Number.POSITIVE_INFINITY),e&&e[o])for(let n=0;n<t;n++)e[o][n]&&(s[o][n]=e[o][n]);return s}extractDiagonal(t,e){const s=[];return e.forEach((o,n)=>{const r=Array(e.length);e.forEach((a,l)=>{t[o]&&t[o][a]&&(r[l]=t[o][a])}),r[o]=0,s.push(r)}),s}resizeMatrix(t,e){const s=new Array(e);for(let o=0;o<e;o++){s[o]=new Array(e);for(let n=0;n<e;n++)o<t.length&&n<t[o].length?s[o][n]=t[o][n]:o==n?s[o][n]=0:s[o][n]=Number.POSITIVE_INFINITY}return s}}var _t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wh(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function qh(i){if(i.__esModule)return i;var t=i.default;if(typeof t=="function"){var e=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var o=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:function(){return i[s]}})}),e}var Es={exports:{}};Es.exports,function(i){(function(t,e,s){function o(l){var h=this,c=a();h.next=function(){var d=2091639*h.s0+h.c*23283064365386963e-26;return h.s0=h.s1,h.s1=h.s2,h.s2=d-(h.c=d|0)},h.c=1,h.s0=c(" "),h.s1=c(" "),h.s2=c(" "),h.s0-=c(l),h.s0<0&&(h.s0+=1),h.s1-=c(l),h.s1<0&&(h.s1+=1),h.s2-=c(l),h.s2<0&&(h.s2+=1),c=null}function n(l,h){return h.c=l.c,h.s0=l.s0,h.s1=l.s1,h.s2=l.s2,h}function r(l,h){var c=new o(l),d=h&&h.state,u=c.next;return u.int32=function(){return c.next()*4294967296|0},u.double=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.quick=u,d&&(typeof d=="object"&&n(d,c),u.state=function(){return n(c,{})}),u}function a(){var l=4022871197,h=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var u=.02519603282416938*l;l=u>>>0,u-=l,u*=l,l=u>>>0,u-=l,l+=u*4294967296}return(l>>>0)*23283064365386963e-26};return h}e&&e.exports?e.exports=r:this.alea=r})(_t,i)}(Es);var Gh=Es.exports,Ts={exports:{}};Ts.exports,function(i){(function(t,e,s){function o(a){var l=this,h="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:h+=a;for(var c=0;c<h.length+64;c++)l.x^=h.charCodeAt(c)|0,l.next()}function n(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function r(a,l){var h=new o(a),c=l&&l.state,d=function(){return(h.next()>>>0)/4294967296};return d.double=function(){do var u=h.next()>>>11,p=(h.next()>>>0)/4294967296,b=(u+p)/(1<<21);while(b===0);return b},d.int32=h.next,d.quick=d,c&&(typeof c=="object"&&n(c,h),d.state=function(){return n(h,{})}),d}e&&e.exports?e.exports=r:this.xor128=r})(_t,i)}(Ts);var Yh=Ts.exports,$s={exports:{}};$s.exports,function(i){(function(t,e,s){function o(a){var l=this,h="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:h+=a;for(var c=0;c<h.length+64;c++)l.x^=h.charCodeAt(c)|0,c==h.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function n(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function r(a,l){var h=new o(a),c=l&&l.state,d=function(){return(h.next()>>>0)/4294967296};return d.double=function(){do var u=h.next()>>>11,p=(h.next()>>>0)/4294967296,b=(u+p)/(1<<21);while(b===0);return b},d.int32=h.next,d.quick=d,c&&(typeof c=="object"&&n(c,h),d.state=function(){return n(h,{})}),d}e&&e.exports?e.exports=r:this.xorwow=r})(_t,i)}($s);var Xh=$s.exports,Ms={exports:{}};Ms.exports,function(i){(function(t,e,s){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,u,p;return u=c[d],u^=u>>>7,p=u^u<<24,u=c[d+1&7],p^=u^u>>>10,u=c[d+3&7],p^=u^u>>>3,u=c[d+4&7],p^=u^u<<7,u=c[d+7&7],u=u^u<<13,p^=u^u<<9,c[d]=p,l.i=d+1&7,p};function h(c,d){var u,p=[];if(d===(d|0))p[0]=d;else for(d=""+d,u=0;u<d.length;++u)p[u&7]=p[u&7]<<15^d.charCodeAt(u)+p[u+1&7]<<13;for(;p.length<8;)p.push(0);for(u=0;u<8&&p[u]===0;++u);for(u==8?p[7]=-1:p[u],c.x=p,c.i=0,u=256;u>0;--u)c.next()}h(l,a)}function n(a,l){return l.x=a.x.slice(),l.i=a.i,l}function r(a,l){a==null&&(a=+new Date);var h=new o(a),c=l&&l.state,d=function(){return(h.next()>>>0)/4294967296};return d.double=function(){do var u=h.next()>>>11,p=(h.next()>>>0)/4294967296,b=(u+p)/(1<<21);while(b===0);return b},d.int32=h.next,d.quick=d,c&&(c.x&&n(c,h),d.state=function(){return n(h,{})}),d}e&&e.exports?e.exports=r:this.xorshift7=r})(_t,i)}(Ms);var _h=Ms.exports,Is={exports:{}};Is.exports,function(i){(function(t,e,s){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,u=l.i,p,b;return l.w=c=c+1640531527|0,b=d[u+34&127],p=d[u=u+1&127],b^=b<<13,p^=p<<17,b^=b>>>15,p^=p>>>12,b=d[u]=b^p,l.i=u,b+(c^c>>>16)|0};function h(c,d){var u,p,b,w,x,k=[],ot=128;for(d===(d|0)?(p=d,d=null):(d=d+"\0",p=0,ot=Math.max(ot,d.length)),b=0,w=-32;w<ot;++w)d&&(p^=d.charCodeAt((w+32)%d.length)),w===0&&(x=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,w>=0&&(x=x+1640531527|0,u=k[w&127]^=p+x,b=u==0?b+1:0);for(b>=128&&(k[(d&&d.length||0)&127]=-1),b=127,w=4*128;w>0;--w)p=k[b+34&127],u=k[b=b+1&127],p^=p<<13,u^=u<<17,p^=p>>>15,u^=u>>>12,k[b]=p^u;c.w=x,c.X=k,c.i=b}h(l,a)}function n(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function r(a,l){a==null&&(a=+new Date);var h=new o(a),c=l&&l.state,d=function(){return(h.next()>>>0)/4294967296};return d.double=function(){do var u=h.next()>>>11,p=(h.next()>>>0)/4294967296,b=(u+p)/(1<<21);while(b===0);return b},d.int32=h.next,d.quick=d,c&&(c.X&&n(c,h),d.state=function(){return n(h,{})}),d}e&&e.exports?e.exports=r:this.xor4096=r})(_t,i)}(Is);var Kh=Is.exports,Ds={exports:{}};Ds.exports,function(i){(function(t,e,s){function o(a){var l=this,h="";l.next=function(){var d=l.b,u=l.c,p=l.d,b=l.a;return d=d<<25^d>>>7^u,u=u-p|0,p=p<<24^p>>>8^b,b=b-d|0,l.b=d=d<<20^d>>>12^u,l.c=u=u-p|0,l.d=p<<16^u>>>16^b,l.a=b-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):h+=a;for(var c=0;c<h.length+20;c++)l.b^=h.charCodeAt(c)|0,l.next()}function n(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function r(a,l){var h=new o(a),c=l&&l.state,d=function(){return(h.next()>>>0)/4294967296};return d.double=function(){do var u=h.next()>>>11,p=(h.next()>>>0)/4294967296,b=(u+p)/(1<<21);while(b===0);return b},d.int32=h.next,d.quick=d,c&&(typeof c=="object"&&n(c,h),d.state=function(){return n(h,{})}),d}e&&e.exports?e.exports=r:this.tychei=r})(_t,i)}(Ds);var Qh=Ds.exports,pn={exports:{}};const Jh={},Zh=Object.freeze(Object.defineProperty({__proto__:null,default:Jh},Symbol.toStringTag,{value:"Module"})),tc=qh(Zh);(function(i){(function(t,e,s){var o=256,n=6,r=52,a="random",l=s.pow(o,n),h=s.pow(2,r),c=h*2,d=o-1,u;function p(I,D,nt){var q=[];D=D==!0?{entropy:!0}:D||{};var j=k(x(D.entropy?[I,tt(e)]:I??ot(),3),q),Ct=new b(q),St=function(){for(var pt=Ct.g(n),Lt=l,Rt=0;pt<h;)pt=(pt+Rt)*o,Lt*=o,Rt=Ct.g(1);for(;pt>=c;)pt/=2,Lt/=2,Rt>>>=1;return(pt+Rt)/Lt};return St.int32=function(){return Ct.g(4)|0},St.quick=function(){return Ct.g(4)/4294967296},St.double=St,k(tt(Ct.S),e),(D.pass||nt||function(pt,Lt,Rt,Bt){return Bt&&(Bt.S&&w(Bt,Ct),pt.state=function(){return w(Ct,{})}),Rt?(s[a]=pt,Lt):pt})(St,j,"global"in D?D.global:this==s,D.state)}function b(I){var D,nt=I.length,q=this,j=0,Ct=q.i=q.j=0,St=q.S=[];for(nt||(I=[nt++]);j<o;)St[j]=j++;for(j=0;j<o;j++)St[j]=St[Ct=d&Ct+I[j%nt]+(D=St[j])],St[Ct]=D;(q.g=function(pt){for(var Lt,Rt=0,Bt=q.i,Ve=q.j,ce=q.S;pt--;)Lt=ce[Bt=d&Bt+1],Rt=Rt*o+ce[d&(ce[Bt]=ce[Ve=d&Ve+Lt])+(ce[Ve]=Lt)];return q.i=Bt,q.j=Ve,Rt})(o)}function w(I,D){return D.i=I.i,D.j=I.j,D.S=I.S.slice(),D}function x(I,D){var nt=[],q=typeof I,j;if(D&&q=="object")for(j in I)try{nt.push(x(I[j],D-1))}catch{}return nt.length?nt:q=="string"?I:I+"\0"}function k(I,D){for(var nt=I+"",q,j=0;j<nt.length;)D[d&j]=d&(q^=D[d&j]*19)+nt.charCodeAt(j++);return tt(D)}function ot(){try{var I;return u&&(I=u.randomBytes)?I=I(o):(I=new Uint8Array(o),(t.crypto||t.msCrypto).getRandomValues(I)),tt(I)}catch{var D=t.navigator,nt=D&&D.plugins;return[+new Date,t,nt,t.screen,tt(e)]}}function tt(I){return String.fromCharCode.apply(0,I)}if(k(s.random(),e),i.exports){i.exports=p;try{u=tc}catch{}}else s["seed"+a]=p})(typeof self<"u"?self:_t,[],Math)})(pn);var ec=pn.exports,ic=Gh,sc=Yh,oc=Xh,nc=_h,rc=Kh,ac=Qh,Kt=ec;Kt.alea=ic,Kt.xor128=sc,Kt.xorwow=oc,Kt.xorshift7=nc,Kt.xor4096=rc,Kt.tychei=ac;var lc=Kt;const hc=Wh(lc),Mt=new URLSearchParams(location.search);class cc{constructor(t){g(this,"rng");t==null&&(t=Math.random().toString()),this.rng=hc(t)}random(){return this.rng.double()}}const dc=Mt.get("seed")||Math.random();let Ps=null;function gi(){return Ps||(Ps=new cc(dc)),Ps.random()}const Pt=class Pt{constructor(t,e,s,o){g(this,"numRegions");g(this,"regions");g(this,"matrices");g(this,"pi");g(this,"transportCost");g(this,"sigma");this.numRegions=t,this.pi=e,this.transportCost=s,this.sigma=o,this.regions=[],this.matrices=new Uh(t),$t.getSimulationTimer().addTimeEventListener(n=>{switch(n.type){case"tick":this.tick();break;case"start":break;case"stop":break;case"reset":this.resetRegions();break}})}setNumRegions(t){this.numRegions=t}setSigma(t){this.sigma=t+Pt.SIGMA_BASE}setTransportCost(t){this.transportCost=t}setPi(t){this.pi=t}resetRegions(){this.regions.forEach(t=>{t.manufacturingShare=1/this.regions.length,t.agricultureShare=1/this.regions.length,t.reset()}),this.disturb()}disturb(){if(this.numRegions>0){const t=1/this.numRegions*Pt.DIFF_SCALE;for(let e=0;e<this.numRegions*Pt.DIFF_RATIO;e++){const s=this.regions[Math.floor(gi()*this.numRegions)];s&&(s.manufacturingShare+=t)}}this.rescale()}rescale(){const t=this.regions.reduce((s,o)=>s+o.manufacturingShare,0),e=this.regions.reduce((s,o)=>s+o.agricultureShare,0);this.regions.forEach(s=>{s.setManufacturingShare(s.manufacturingShare/t),s.setAgricultureShare(s.agricultureShare/e)})}updateIncome(){this.regions.forEach(t=>{t.updateIncome(this.pi)})}updatePriceIndex(){this.regions.forEach(t=>{t.updatePriceIndex(this.regions,this.matrices,this.sigma)})}updateNominalWage(){this.regions.forEach(t=>{t.updateNominalWage(this.regions,this.matrices,this.sigma)})}updateRealWage(){this.regions.forEach(t=>{t.updateRealWage(this.pi)})}calculateAverageRealWage(){return this.regions.reduce((t,e)=>t+e.realWage*e.manufacturingShare,0)}updateDynamics(){const t=this.calculateAverageRealWage();this.regions.forEach(e=>{e.updateDynamics(Pt.SPEED_OF_ADJUSTMENT,t,this.numRegions)}),this.rescale()}tick(){this.updateIncome(),this.updatePriceIndex(),this.updateNominalWage(),this.updateRealWage(),this.updateDynamics()}};g(Pt,"SPEED_OF_ADJUSTMENT",parseFloat(Mt.get("speed")||"0.1")),g(Pt,"DIFF_SCALE",parseFloat(Mt.get("diffScale")||"0.05")),g(Pt,"DIFF_RATIO",parseFloat(Mt.get("diffRatio")||"0.1")),g(Pt,"SIGMA_BASE",parseFloat(Mt.get("sigmaBase")||"0.1"));let pi=Pt;class fn{constructor(t,e){g(this,"timer");g(this,"country");g(this,"barChartType",null);g(this,"barChartScale");g(this,"bindings");g(this,"focusEventSource");g(this,"focusedRegionIds",[]);g(this,"selectedRegionIds",[]);g(this,"numRegionsChangedListeners");g(this,"transportCostChangeListeners");g(this,"selectRegionEventListeners");g(this,"startEventListeners");g(this,"stopEventListeners");g(this,"resetEventListeners");this.timer=$t.getSimulationTimer(),this.country=t,this.barChartScale=e,this.bindings=new Map,this.focusedRegionIds=[],this.focusEventSource=null,this.selectRegionEventListeners=[],this.startEventListeners=[],this.stopEventListeners=[],this.resetEventListeners=[],this.numRegionsChangedListeners=[],this.transportCostChangeListeners=[],this.barChartType="Share of Manufacturing"}reset(){var t;this.selectedRegionIds=[],this.country.disturb(),this.country.resetRegions(),(t=this.timer)==null||t.reset(),this.notifyReset()}start(){var t;(t=this.timer)==null||t.start(),$t.getLayoutTimer().stop(),this.notifyStart()}stop(){var t;(t=this.timer)==null||t.stop(),this.notifyStop()}setBarChartScale(t){this.barChartScale=t}setNumRegions(t){this.country.setNumRegions(t),this.notifyNumRegionsChanged()}setPi(t){this.country.setPi(t)}setTransportCost(t){this.country.setTransportCost(t),this.notifyTransportCostChange()}setSigma(t){this.country.setSigma(t)}setFocusedRegionId(t,e){this.focusEventSource=t,this.focusedRegionIds=e}setFocusedRouteIds(t,e){this.focusEventSource=t,this.focusedRegionIds=e}isFocusedRegionIds(t,e){return this.focusedRegionIds.length==0?!1:Math.min(this.focusedRegionIds[0],this.focusedRegionIds[1])==Math.min(t,e)&&Math.max(this.focusedRegionIds[0],this.focusedRegionIds[1])==Math.max(t,e)}addStartListener(t){this.startEventListeners.push(t)}notifyStart(){this.startEventListeners.forEach(t=>{t()})}addStopListener(t){this.stopEventListeners.push(t)}notifyStop(){this.stopEventListeners.forEach(t=>{t()})}addResetListener(t){this.resetEventListeners.push(t)}notifyReset(){this.resetEventListeners.forEach(t=>{t()})}addRegionSelectListener(t){this.selectRegionEventListeners.push(t)}notifyRegionSelect(t,e,s,o){this.selectRegionEventListeners.forEach(n=>{n(t,e,s,o)})}addTransportCostChangeListener(t){this.transportCostChangeListeners.push(t)}notifyTransportCostChange(){this.transportCostChangeListeners.forEach(t=>{t(this)})}addNumRegionsChangedListener(t){this.numRegionsChangedListeners.push(t)}notifyNumRegionsChanged(){this.numRegionsChangedListeners.forEach(t=>{t()})}updateAdjacencyMatrix(){this.country.matrices.adjacencyMatrix=this.createAdjacencyMatrix(this.country.numRegions)}async updateDistanceMatrixAndTransportCostMatrix(){[this.country.matrices.distanceMatrix,this.country.matrices.predecessorMatrix]=await this.createDistanceMatrix(),this.country.matrices.transportCostMatrix=this.createTransportCostMatrix()}adjustRegions(t){this.country.regions.length<t&&this.appendRegions(t),this.country.regions.length>t&&this.extractRegions(t,[...Array(t).keys()])}}function uc(i,t,e){const s=(i.x+t.x)/2,o=(i.y+t.y)/2,n=.8,r=e?e.x:(t.x-i.x)/2*n,a=e?e.y:(t.y-i.y)/2*n,l=gi()*2*Math.PI,h=Math.sqrt(Math.sqrt(gi())),c=s+h*r*Math.cos(l),d=o+h*a*Math.sin(l);return{x:c,y:d}}function gc(i,t,e,s){const{x:o,y:n}=uc(t,e,s);return{id:i,x:o,y:n,dx:0,dy:0,radius:1}}var De=(i=>(i[i.FloydWarshall=0]="FloydWarshall",i[i.FloydWarshallGPU=1]="FloydWarshallGPU",i[i.Johnson=2]="Johnson",i))(De||{});const It=16,pc=`
struct Distances {
    data: array<f32>
};

@group(0) @binding(0) var<storage, read> adjMatrix: Distances;
@group(0) @binding(1) var<storage, read_write> distances: Distances;

@compute @workgroup_size(64)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>, @builtin(num_workgroups) num_groups: vec3<u32>) {
    let totalSize = num_groups.x * ${It};

    let bxi = global_id.x * ${It};
    let byj = global_id.y * ${It};
    let bz = global_id.z;

    for (var k = 0u; k < ${It}; k++) {
        for (var i = 0u; i < ${It} && bxi + i < totalSize; i++) {
            for (var j = 0u; j < ${It} && byj + j < totalSize; j++) {
                let ik = (bxi + i) * totalSize + byj + k + bz * ${It};
                let kj = (bxi + k + bz * ${It}) * totalSize + byj + j;
                let ij = (bxi + i) * totalSize + byj + j;

                let ikj = adjMatrix.data[ik] + adjMatrix.data[kj];
                if (ikj < adjMatrix.data[ij]) {
                    distances.data[ij] = ikj;
                }
            }
        }
    }
}
`;class fc{constructor(){g(this,"device");g(this,"pipeline");g(this,"bindGroup");g(this,"bindGroupLayout")}async computeShortestPaths(t,e){const s=new Float32Array(e*e);t.forEach((l,h)=>{s.set(l,h*e)});const[o,n]=await this.computeShortestPathsF32(s,e),r=new Array(e);for(let l=0;l<e;l++)r[l]=Array.of(o.slice(l*e,l*e+e-1));const a=new Array(e);for(let l=0;l<e;l++)a[l]=Array.of(n.slice(l*e,l*e+e-1));return[r,a]}async computeShortestPathsF32(t,e){if(await this.initialize(),!this.device||!this.pipeline||!this.bindGroupLayout)throw new Error(`WebGPU is not available device=${!!this.device}, pipeline=${this.pipeline} bindGroupLayout=${!!this.bindGroupLayout}`);const s=e*e*4,o=this.device.createBuffer({size:s,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),n=this.device.createBuffer({size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ,mappedAtCreation:!0}),r=this.device.createBuffer({size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ,mappedAtCreation:!0}),a=this.device.createCommandEncoder();a.copyBufferToBuffer(o,0,n,0,s),a.copyBufferToBuffer(o,0,r,1,s);const l=a.finish();this.device.queue.submit([l]),await n.mapAsync(GPUMapMode.READ),n.getMappedRange(),new Float32Array(n.getMappedRange()).set(t),n.unmap(),await r.mapAsync(GPUMapMode.READ),r.getMappedRange(),new Int32Array(r.getMappedRange()).fill(0),r.unmap(),this.bindGroup=this.device.createBindGroup({layout:this.bindGroupLayout,entries:[{binding:0,resource:{buffer:o}}]});const h=Math.ceil(e/It);this.dispatchShader(h,h,e);const c=e%It;c&&(this.dispatchShader(h,c,e),this.dispatchShader(c,h,e),this.dispatchShader(c,c,e));const d=new Float32Array(e*e);await n.mapAsync(GPUMapMode.READ),d.set(new Float32Array(n.getMappedRange())),n.unmap();const u=new Int32Array(e*e);return await r.mapAsync(GPUMapMode.READ),u.set(new Float32Array(r.getMappedRange())),r.unmap(),[d,u]}async initialize(){const t=await navigator.gpu.requestAdapter();if(!t)throw new Error("GPU is not available");this.device||(this.device=await t.requestDevice(),this.bindGroupLayout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),this.pipeline=this.device.createComputePipeline({layout:this.device.createPipelineLayout({bindGroupLayouts:[this.bindGroupLayout]}),compute:{module:this.device.createShaderModule({code:pc}),entryPoint:"main"}}))}dispatchShader(t,e,s){if(!this.device||!this.pipeline||!this.bindGroupLayout||!this.bindGroup)throw new Error("WebGPU is not available");const o=this.device.createCommandEncoder(),n=o.beginComputePass();n.setPipeline(this.pipeline),n.setBindGroup(0,this.bindGroup),n.dispatchWorkgroups(t,e,s),n.end();const r=o.finish();this.device.queue.submit([r])}}const le=16;class mc{computeShortestPaths(t){const e=t.length,s=new Array(e),o=new Array(e);for(let n=0;n<e;n++){s[n]=new Array(e),o[n]=new Array(e);for(let r=0;r<e;r++)s[n][r]=t[n][r],o[n][r]=r}for(let n=0;n<e;n+=le)for(let r=0;r<e;r+=le)for(let a=0;a<e;a+=le)for(let l=n;l<Math.min(e,n+le);l++)for(let h=r;h<Math.min(e,r+le);h++)for(let c=a;c<Math.min(e,a+le);c++)s[h][l]+s[l][c]<s[h][c]&&(s[h][c]=s[h][l]+s[l][c],o[h][c]=o[h][l]);for(let n=0;n<e;n++)for(let r=0;r<e;r++)for(let a=0;a<e;a++)s[r][n]+s[n][a]<s[r][a]&&(s[r][a]=s[r][n]+s[n][a],o[r][a]=o[r][n]);return[s,o]}}class bc{constructor(){g(this,"floydWarshall");g(this,"floydWarshallGPU")}async computeShortestPaths(t,e,s){switch(t){case De.FloydWarshall:return this.floydWarshall||(this.floydWarshall=new mc),this.floydWarshall.computeShortestPaths(e);case De.FloydWarshallGPU:return this.floydWarshallGPU||(this.floydWarshallGPU=new fc),await this.floydWarshallGPU.computeShortestPaths(e,s);case De.Johnson:return Promise.resolve([]);default:throw new Error("Unsupported algorithm")}}}const xi=class xi{constructor(t,e,s){g(this,"id");g(this,"agricultureShare");g(this,"manufacturingShare");g(this,"income",0);g(this,"priceIndex",1);g(this,"realWage",1);g(this,"nominalWage",1);this.id=t,this.manufacturingShare=e,this.agricultureShare=s,this.reset()}reset(){this.income=0,this.priceIndex=1,this.realWage=1,this.nominalWage=1}setManufacturingShare(t){this.manufacturingShare=t}setAgricultureShare(t){this.agricultureShare=t}updateIncome(t){this.income=t*this.manufacturingShare*this.nominalWage+(1-t)*this.agricultureShare}updatePriceIndex(t,e,s){const o=t.reduce((n,r)=>e.transportCostMatrix[this.id]?n+r.manufacturingShare*Math.pow(r.nominalWage*e.transportCostMatrix[this.id][r.id],1-s):n,0);this.priceIndex=Math.pow(o,1/(1-s))}updateNominalWage(t,e,s){const o=t.reduce((n,r)=>e.transportCostMatrix[this.id]?n+r.income*Math.pow(e.transportCostMatrix[this.id][r.id],1-s)*Math.pow(r.priceIndex,s-1):n,0);this.nominalWage=Math.pow(o,1/s)}updateRealWage(t){this.realWage=this.nominalWage*Math.pow(this.priceIndex,-1*t)}updateDynamics(t,e,s){const o=this.manufacturingShare+t*(this.realWage-e)*this.manufacturingShare,n=xi.MINIMUM_MANUFACTURING_SHARE_NUMERATOR/s;this.manufacturingShare=Math.max(o,n)}};g(xi,"MINIMUM_MANUFACTURING_SHARE_NUMERATOR",.1);let fi=xi;function vc(i,t,e,s){const o=i.length;let n=[];for(let r=0;r<o;r++)for(let a=r+1;a<o;a++)if(e[r][a]==Number.POSITIVE_INFINITY){const l=Math.sqrt((t[r].x-t[1].x)**2+(t[0].y-t[1].y)**2);n.push([r,a,l])}if(n.sort((r,a)=>a[2]-r[2]),n.length!=0){for(let r=0;r<s&&s<n.length;r++){const a=Math.floor(Math.sqrt(gi())*n.length),l=n[r];n[r]=n[a],n[a]=l}for(let r=0;r<s;r++){const a=n[r],l=a[0],h=a[1],c=Math.sqrt(a[2]);e[l][h]=c,e[h][l]=c,r++}}}function mn(i,t,e){const s=Math.sqrt((i.x-t.x)**2+(i.y-t.y)**2);return e[i.id][t.id]=s,e[t.id][i.id]=s,e}function yc(i,t,e){return e[i.id][t.id]=Number.POSITIVE_INFINITY,e[t.id][i.id]=Number.POSITIVE_INFINITY,e}const wc=new bc;class xc extends fn{constructor(e,s,o){super(e,s);g(this,"nodes");g(this,"routes");g(this,"graphUpdateListeners");g(this,"adjacencyMatrixChangeListeners");g(this,"canvas");this.canvas=o,this.nodes=[],this.routes=[],this.graphUpdateListeners=[],this.adjacencyMatrixChangeListeners=[]}addGraphUpdateListener(e){this.graphUpdateListeners.push(e)}notifyGraphUpdate(){this.graphUpdateListeners.forEach(e=>e())}addAdjacencyMatrixListener(e){this.adjacencyMatrixChangeListeners.push(e)}notifyAdjacencyMatrixChanged(){this.adjacencyMatrixChangeListeners.forEach(e=>e())}findClosestElementId(e,s){if(this.nodes.length===0)return null;let o=null,n=Number.POSITIVE_INFINITY;for(let r of this.nodes){const a=this.distance(e,s,r.x,r.y);a<r.radius+2&&a<n&&(n=a,o=r)}return o?o.id:null}createAdjacencyMatrix(e){const s=this.country.regions.length,o=new Array(e);for(let n=0;n<e;n++){const r=new Array(e);if(r.fill(Number.POSITIVE_INFINITY),n<s){for(let a=0;a<e;a++)if(this.country.matrices.adjacencyMatrix&&this.country.matrices.adjacencyMatrix[n]&&this.country.matrices.adjacencyMatrix[n][a]&&0<this.country.matrices.adjacencyMatrix[n][a]&&this.country.matrices.adjacencyMatrix[n][a]<Number.POSITIVE_INFINITY&&this.nodes[n]&&this.nodes[a]){const l=Math.sqrt((this.nodes[n].x-this.nodes[a].x)**2+(this.nodes[n].y-this.nodes[a].y)**2);r[a]=l}}r[n]=0,o[n]=r}if(1<s&&1<this.nodes.length){for(let n=s;1<=n&&n<e;n++)if(this.nodes[n]&&this.nodes[n-1]){const r=Math.sqrt((this.nodes[n].x-this.nodes[n-1].x)**2+(this.nodes[n].y-this.nodes[n-1].y)**2);o[n][n-1]=r,o[n-1][n]=r}}return o}async createDistanceMatrix(){const e=this.country.matrices.adjacencyMatrix,s=e.length;return wc.computeShortestPaths(De.FloydWarshall,e,s)}createTransportCostMatrix(){const e=this.country.matrices.distanceMatrix.length;let s=0;for(let r=0;r<e;r++)if(this.country.matrices.distanceMatrix&&r<this.country.matrices.distanceMatrix.length)for(let a=0;a<e;a++)a<this.country.matrices.distanceMatrix[r].length&&this.country.matrices.distanceMatrix[r][a]!=Number.POSITIVE_INFINITY&&(s=Math.max(this.country.matrices.distanceMatrix[r][a],s));const o=new Array(e);for(let r=0;r<e;r++)o[r]=new Array(e);if(s==0)return o;const n=Math.log(this.country.transportCost);for(let r=0;r<e;r++)if(this.country.matrices.distanceMatrix&&r<this.country.matrices.distanceMatrix.length){for(let a=r;a<e;a++)if(a<this.country.matrices.distanceMatrix[r].length)if(this.country.matrices.distanceMatrix[r][a]!=Number.POSITIVE_INFINITY){const l=this.country.matrices.distanceMatrix[r][a]/s;o[a][r]=o[r][a]=Math.exp(n*l)}else o[a][r]=o[r][a]=Number.POSITIVE_INFINITY}return o}async addEdge(e){if(!(this.selectedRegionIds.length<2)){for(let s=0;s<this.selectedRegionIds.length;s++){const o=this.nodes[this.selectedRegionIds[s]],n=s!=this.selectedRegionIds.length-1?this.nodes[this.selectedRegionIds[s+1]]:this.nodes[0];this.country.matrices.adjacencyMatrix=mn(o,n,this.country.matrices.adjacencyMatrix)}this.updateMatrices()}}async removeEdge(e){if(this.selectedRegionIds.length!=0){for(let s=0;s<this.selectedRegionIds.length;s++){const o=this.nodes[this.selectedRegionIds[s]],n=s!=this.selectedRegionIds.length-1?this.nodes[this.selectedRegionIds[s+1]]:this.nodes[0];this.country.matrices.adjacencyMatrix=yc(o,n,this.country.matrices.adjacencyMatrix)}this.updateMatrices()}}appendRegions(e,s){const o=this.canvas.getContext("2d").getTransform().inverse(),n=o.transformPoint(new DOMPoint(this.canvas.width/2,this.canvas.height/2)),r=o.transformPoint(new DOMPoint(0,0)),a=o.transformPoint(new DOMPoint(this.canvas.width,this.canvas.height)),l=e+this.country.regions.length;for(let c=this.nodes.length;c<l;c++){const d=gc(c,r,a,c==0?n:this.nodes[c-1]);this.nodes.push(d)}for(let c=0;c<this.country.regions.length;c++)this.country.regions[c].manufacturingShare=1/l,this.country.regions[c].agricultureShare=1/l;for(let c=this.country.regions.length;c<l;c++)this.country.regions.push(new fi(c,1/l,1/l));this.country.disturb(),this.country.matrices.adjacencyMatrix=this.country.matrices.create2DArray(l,this.country.matrices.adjacencyMatrix);const h=s?Math.ceil(Math.sqrt(this.country.regions.length*2))*5:1;if(e>1)vc(this.country.regions,this.nodes,this.country.matrices.adjacencyMatrix,h);else if(this.selectedRegionIds.length>0){const c=this.selectedRegionIds[this.selectedRegionIds.length-1],d=this.nodes[c],u=this.nodes[this.nodes.length-1];this.country.matrices.adjacencyMatrix=mn(d,u,this.country.matrices.adjacencyMatrix)}this.updateMatrices()}extractRegions(e,s){this.nodes=this.nodes.filter(o=>s.includes(o.id)),this.nodes.forEach((o,n)=>o.id=n),this.country.regions=this.country.regions.filter(o=>s.includes(o.id)),this.country.regions.forEach((o,n)=>o.id=n),this.country.matrices.adjacencyMatrix=this.country.matrices.extractDiagonal(this.country.matrices.adjacencyMatrix,s),this.updateMatrices()}distance(e,s,o,n){const r=o-e,a=n-s;return Math.sqrt(r*r+a*a)}updateMatrices(){(async()=>([this.country.matrices.distanceMatrix,this.country.matrices.predecessorMatrix]=await this.createDistanceMatrix(),this.country.matrices.transportCostMatrix=this.createTransportCostMatrix(),this.notifyAdjacencyMatrixChanged()))()}}class Cc extends fn{createAdjacencyMatrix(t){const e=new Array(t);if(t==0)return[[]];for(let s=0;s<t;s++)e[s]=new Array(t);e[0].fill(Number.POSITIVE_INFINITY),e[0][0]=0;for(let s=1;s<t;s++)e[s].fill(Number.POSITIVE_INFINITY),e[s][s]=0,e[s-1][s]=1,e[s][s-1]=1;return e[t-1][0]=1,e[0][t-1]=1,e}async createDistanceMatrix(){const t=this.country.regions.length,e=new Array(t),s=new Array(t);for(let o=0;o<t;o++){e[o]=new Array(t),s[o]=new Array(t);for(let n=0;n<t;n++)if(o===n)e[o][n]=0,s[o][n]=o;else{const r=Math.abs(n-o),a=t-r;e[o][n]=Math.min(r,a),s[o][n]=r<a?o+1:o-1,s[o][n]=s[o][n]==-1?t-1:s[o][n]==t?0:s[o][n]}}return[e,s]}createTransportCostMatrix(){const t=this.country.regions.length,e=new Array(t);for(let o=0;o<t;o++)e[o]=new Array(t);const s=Math.log(this.country.transportCost);for(let o=0;o<t;o++)if(this.country.matrices.distanceMatrix[o])for(let n=o;n<t;n++){const r=2*this.country.matrices.distanceMatrix[o][n]/t;e[o][n]=e[n][o]=Math.exp(s*r)}return e}appendRegions(t){const e=new Array;if(this.country.regions)for(const s of this.country.regions)s.manufacturingShare=1/t,s.agricultureShare=1/t,e.push(s);for(let s=e.length;s<t;s++)e.push(new fi(e.length,1/t,1/t));this.country.regions=e}extractRegions(t){const e=this.country.regions.slice(0,t);for(const s of e)s.manufacturingShare=1/t,s.agricultureShare=1/t;this.country.regions=e,console.log(" extractRegions",t,e.length,this.country.regions.length)}}class Sc{constructor(t,e,s,o){g(this,"temperature",0);g(this,"model");g(this,"nodes");g(this,"width");g(this,"height");g(this,"minimumVelocityThreshold",.014);g(this,"minimumVelocity",Number.POSITIVE_INFINITY);this.model=t,this.nodes=e,this.width=s,this.height=o,this.reset(),this.model.addNumRegionsChangedListener(()=>{this.reset()}),$t.getLayoutTimer().addTimeEventListener(()=>{this.tick()}),$t.getLayoutTimer().start()}reset(){this.minimumVelocity=Number.POSITIVE_INFINITY}calculateFrictionalForce(t){return{dx:-.1*t.x,dy:-.1*t.y}}calculateDistance(t,e){const s=t.x-e.x,o=t.y-e.y;return Math.sqrt(s*s+o*o)}tick(){var t,e;if(!(this.minimumVelocity<this.minimumVelocityThreshold)){for(let s=0;s<this.nodes.length;s++){if((t=this.model)!=null&&t.focusedRegionIds.includes(s))continue;let o=0,n=0;for(let l=0;l<this.nodes.length;l++)if(s!==l){const h=this.calculateRepulsion(this.temperature,this.nodes[s],this.nodes[l]);o+=h.dx,n+=h.dy}const r=(e=this.model)==null?void 0:e.country.matrices.adjacencyMatrix;for(let l=0;l<this.nodes.length;l++)if(r&&r.length&&r[s]&&0<r[s].length&&0<r[s][l]&&r[s][l]<Number.POSITIVE_INFINITY){r[s][l]=this.calculateDistance(this.nodes[s],this.nodes[l]);const h=this.calculateAttraction(this.temperature,this.nodes[s],this.nodes[l]);o+=h.dx,n+=h.dy}const a=this.calculateFrictionalForce({x:o,y:n});o+=a.dx,n+=a.dy,this.nodes[s].x+=o,this.nodes[s].y+=n,this.minimumVelocity=Math.min(Math.max(Math.abs(o),Math.abs(n)),this.minimumVelocity)}this.decreaseTemperature(),this.minimumVelocity<this.minimumVelocityThreshold&&(this.temperature=0,this.model.notifyGraphUpdate())}}}class kc extends Sc{reset(){super.reset(),this.temperature=1}calculateRepulsion(t,e,s){const o=e.x-s.x,n=e.y-s.y,r=o*o+n*n,a=Math.sqrt(r);if(a<Number.EPSILON){const h=[{dx:0,dy:-1},{dx:1,dy:0},{dx:0,dy:1},{dx:-1,dy:0}];return h[Math.floor(Math.random()*h.length)]}const l=500/r;return{dx:l*o/a,dy:l*n/a}}calculateAttraction(t,e,s){const o=e.x-s.x,n=e.y-s.y,r=Math.sqrt(o*o+n*n);if(r<Number.EPSILON){const l=[{dx:0,dy:-1},{dx:1,dy:0},{dx:0,dy:1},{dx:-1,dy:0}];return l[Math.floor(Math.random()*l.length)]}const a=-.01*(r-100);return{dx:a*o/r,dy:a*n/r}}decreaseTemperature(){}}Th().register(Eh(),dh(),bh(),fh(),gh(),kh({thumb:'<div style="background-color: #fff; border: 1px solid #777;border-radius: 3px; width: 16px; height: 16px; "></div>'}),wh());const Rc=Mt.get("app")||"raceTrack",mi=parseInt(Mt.get("K")||"12"),bn=parseFloat(Mt.get("pi")||"0.2"),vn=parseFloat(Mt.get("tau")||"2"),yn=parseFloat(Mt.get("sigma")||"4"),E=new Hh;function wn(){const i=document.getElementById("canvasDivContainer"),t=document.getElementById("raceTrackCanvas"),e=document.getElementById("graphCanvas"),s=document.getElementById("barChartCanvas"),o=i.clientWidth-30;t.setAttribute("width",`${o*.65}`),e.setAttribute("width",`${o*.65}`),s.setAttribute("width",`${o*.35}`);const n=500;t.setAttribute("height",`${n}`),e.setAttribute("height",`${n}`),s.setAttribute("height",`${n}`)}function xn(i,t,e,s){for(let o=0;o<t.length;o++)for(let n=0;n<t.length;n++)E.diagonalTableViewSet.decorateTable(i,t[o]+1,t[n]+1,e,s)}function Ec(){var s;const i=new pi(mi,bn,vn,yn),t=new Cc(i,1),e=new Ph;e.setModel(t),t.addResetListener(()=>{e.draw(),E.barChartView.draw()}),t.addRegionSelectListener((o,n,r,a)=>{xn(o,n,r,a),a?t.focusedRegionIds=n:t.focusedRegionIds=[],E.barChartView.draw(),e.draw()}),t.addNumRegionsChangedListener(async()=>{const o=E.sliderSet.numRegionsSlider.valueAsNumber;t.adjustRegions(o),t.updateAdjacencyMatrix(),await t.updateDistanceMatrixAndTransportCostMatrix(),t.country.resetRegions(),e.draw(),await E.update()}),t.addTransportCostChangeListener(async()=>{i.matrices.transportCostMatrix=t.createTransportCostMatrix(),e.draw(),await E.update()}),(s=t.timer)==null||s.addTimeEventListener(()=>{e.draw(),E.barChartView.draw()}),window.addEventListener("resize",()=>{e.draw()}),dn("raceTrack",()=>{E.setModel(t),t.notifyNumRegionsChanged(),E.visualizerTypeSelector.incomeVisualizer.disabled=!1,E.visualizerTypeSelector.priceIndexVisualizer.disabled=!1,E.visualizerTypeSelector.nominalWageVisualizer.disabled=!1,E.visualizerTypeSelector.realWageVisualizer.disabled=!1,E.update()},()=>{t==null||t.stop()})}async function Tc(){var n;const i=document.getElementById("graphCanvas"),t=new pi(mi,bn,vn,yn),e=new xc(t,1,i),s=new Fh(i,e),o=new kc(e,e.nodes,i.width,i.height);e.addStartListener(()=>{s.updateGraphEditorButtonState()}),e.addStopListener(()=>{s.updateGraphEditorButtonState()}),e.addResetListener(()=>{s.draw(),E.barChartView.draw()}),e.addRegionSelectListener((r,a,l,h)=>{xn(r,a,l,h),h?l==$.FOCUSED?e.focusedRegionIds=a:l==$.SELECTED&&(e.selectedRegionIds=a):l==$.FOCUSED?e.focusedRegionIds=[]:e.selectedRegionIds=[],s.draw(),E.barChartView.draw()}),e.addNumRegionsChangedListener(async()=>{const r=E.sliderSet.numRegionsSlider.valueAsNumber;await e.adjustRegions(r),e.updateAdjacencyMatrix(),await e.updateDistanceMatrixAndTransportCostMatrix(),await E.diagonalTableViewSet.updateTableContent(),e.country.resetRegions(),s.draw(),E.sliderSet.numRegionsElem.innerText=`${e.nodes.length}`,await E.update()}),e.addGraphUpdateListener(async()=>{e.updateAdjacencyMatrix(),await e.updateDistanceMatrixAndTransportCostMatrix(),await E.diagonalTableViewSet.updateTableContent(),s.draw(),await E.update()}),e.addAdjacencyMatrixListener(async()=>{await E.diagonalTableViewSet.updateTableContent(),await E.update(),s.draw()}),e.addTransportCostChangeListener(async()=>{await E.diagonalTableViewSet.updateTableContent(),await E.update(),s.draw()}),(n=e.timer)==null||n.addTimeEventListener(async()=>{s.draw(),E.tick()}),s.setModel(e),e.appendRegions(mi,!0),s.fitToScreen(),s.draw(),window.addEventListener("resize",()=>{o.reset(),s.draw()}),dn("graph",()=>{E.setModel(e),e.setNumRegions(mi),E.visualizerTypeSelector.incomeVisualizer.disabled=!0,E.visualizerTypeSelector.priceIndexVisualizer.disabled=!0,E.visualizerTypeSelector.nominalWageVisualizer.disabled=!0,E.visualizerTypeSelector.realWageVisualizer.disabled=!0,$t.getLayoutTimer().start(),E.update()},()=>{e==null||e.stop()})}window.addEventListener("resize",()=>{wn(),E.barChartView.draw()}),window.addEventListener("load",async()=>{switch(wn(),Ec(),await Tc(),Rc){case"raceTrack":ln(!1);break;case"graph":default:hn(!1);break}});
